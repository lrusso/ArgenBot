<?php
error_reporting(0);ini_set("display_errors",0);
date_default_timezone_set("America/Argentina/Buenos_Aires");
ini_set("max_execution_time", 600);

$horaDeEjecucion = "05";
$horaDeEjecucion_Consultas_INPI = "07";
$horaActual = date("H");

// ----------------------------------------------------------------------------------------------------------------
// FUNCIONES PRINCIPALES PARA LAS TAREAS PROGRAMADAS
// ----------------------------------------------------------------------------------------------------------------

$agent = "Mozilla/5.0 (Windows NT 5.1; rv:25.0) Gecko/20100101 Firefox/52.0";
$lang = "es-AR,es;q=0.8,en-US;q=0.5,en;q=0.3";

if(!defined('PCLZIP_READ_BLOCK_SIZE')){define('PCLZIP_READ_BLOCK_SIZE',2048);}if(!defined('PCLZIP_SEPARATOR')){define('PCLZIP_SEPARATOR',',');}if(!defined('PCLZIP_ERROR_EXTERNAL')){define('PCLZIP_ERROR_EXTERNAL',0);}if(!defined('PCLZIP_TEMPORARY_DIR')){define('PCLZIP_TEMPORARY_DIR','');}if(!defined('PCLZIP_TEMPORARY_FILE_RATIO')){define('PCLZIP_TEMPORARY_FILE_RATIO',0.47);}$g_pclzip_version="2.8.2";define('PCLZIP_ERR_USER_ABORTED',2);define('PCLZIP_ERR_NO_ERROR',0);define('PCLZIP_ERR_WRITE_OPEN_FAIL',-1);define('PCLZIP_ERR_READ_OPEN_FAIL',-2);define('PCLZIP_ERR_INVALID_PARAMETER',-3);define('PCLZIP_ERR_MISSING_FILE',-4);define('PCLZIP_ERR_FILENAME_TOO_LONG',-5);define('PCLZIP_ERR_INVALID_ZIP',-6);define('PCLZIP_ERR_BAD_EXTRACTED_FILE',-7);define('PCLZIP_ERR_DIR_CREATE_FAIL',-8);define('PCLZIP_ERR_BAD_EXTENSION',-9);define('PCLZIP_ERR_BAD_FORMAT',-10);define('PCLZIP_ERR_DELETE_FILE_FAIL',-11);define('PCLZIP_ERR_RENAME_FILE_FAIL',-12);define('PCLZIP_ERR_BAD_CHECKSUM',-13);define('PCLZIP_ERR_INVALID_ARCHIVE_ZIP',-14);define('PCLZIP_ERR_MISSING_OPTION_VALUE',-15);define('PCLZIP_ERR_INVALID_OPTION_VALUE',-16);define('PCLZIP_ERR_ALREADY_A_DIRECTORY',-17);define('PCLZIP_ERR_UNSUPPORTED_COMPRESSION',-18);define('PCLZIP_ERR_UNSUPPORTED_ENCRYPTION',-19);define('PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE',-20);define('PCLZIP_ERR_DIRECTORY_RESTRICTION',-21);define('PCLZIP_OPT_PATH',77001);define('PCLZIP_OPT_ADD_PATH',77002);define('PCLZIP_OPT_REMOVE_PATH',77003);define('PCLZIP_OPT_REMOVE_ALL_PATH',77004);define('PCLZIP_OPT_SET_CHMOD',77005);define('PCLZIP_OPT_EXTRACT_AS_STRING',77006);define('PCLZIP_OPT_NO_COMPRESSION',77007);define('PCLZIP_OPT_BY_NAME',77008);define('PCLZIP_OPT_BY_INDEX',77009);define('PCLZIP_OPT_BY_EREG',77010);define('PCLZIP_OPT_BY_PREG',77011);define('PCLZIP_OPT_COMMENT',77012);define('PCLZIP_OPT_ADD_COMMENT',77013);define('PCLZIP_OPT_PREPEND_COMMENT',77014);define('PCLZIP_OPT_EXTRACT_IN_OUTPUT',77015);define('PCLZIP_OPT_REPLACE_NEWER',77016);define('PCLZIP_OPT_STOP_ON_ERROR',77017);define('PCLZIP_OPT_EXTRACT_DIR_RESTRICTION',77019);define('PCLZIP_OPT_TEMP_FILE_THRESHOLD',77020);define('PCLZIP_OPT_ADD_TEMP_FILE_THRESHOLD',77020);define('PCLZIP_OPT_TEMP_FILE_ON',77021);define('PCLZIP_OPT_ADD_TEMP_FILE_ON',77021);define('PCLZIP_OPT_TEMP_FILE_OFF',77022);define('PCLZIP_OPT_ADD_TEMP_FILE_OFF',77022);define('PCLZIP_ATT_FILE_NAME',79001);define('PCLZIP_ATT_FILE_NEW_SHORT_NAME',79002);define('PCLZIP_ATT_FILE_NEW_FULL_NAME',79003);define('PCLZIP_ATT_FILE_MTIME',79004);define('PCLZIP_ATT_FILE_CONTENT',79005);define('PCLZIP_ATT_FILE_COMMENT',79006);define('PCLZIP_CB_PRE_EXTRACT',78001);define('PCLZIP_CB_POST_EXTRACT',78002);define('PCLZIP_CB_PRE_ADD',78003);define('PCLZIP_CB_POST_ADD',78004);class PclZip{var $zipname='';var $zip_fd=0;var $error_code=1;var $error_string='';var $magic_quotes_status;function PclZip($p_zipname){if(!function_exists('gzopen')){die('Abort '.basename(__FILE__).' : Missing zlib extensions');}$this->zipname=$p_zipname;$this->zip_fd=0;$this->magic_quotes_status=-1;return;}function create($p_filelist){$v_result=1;$this->privErrorReset();$v_options=array();$v_options[PCLZIP_OPT_NO_COMPRESSION]=FALSE;$v_size=func_num_args();if($v_size>1){$v_arg_list=func_get_args();array_shift($v_arg_list);$v_size--;if((is_integer($v_arg_list[0]))&&($v_arg_list[0]>77000)){$v_result=$this->privParseOptions($v_arg_list,$v_size,$v_options,array(PCLZIP_OPT_REMOVE_PATH=>'optional',PCLZIP_OPT_REMOVE_ALL_PATH=>'optional',PCLZIP_OPT_ADD_PATH=>'optional',PCLZIP_CB_PRE_ADD=>'optional',PCLZIP_CB_POST_ADD=>'optional',PCLZIP_OPT_NO_COMPRESSION=>'optional',PCLZIP_OPT_COMMENT=>'optional',PCLZIP_OPT_TEMP_FILE_THRESHOLD=>'optional',PCLZIP_OPT_TEMP_FILE_ON=>'optional',PCLZIP_OPT_TEMP_FILE_OFF=>'optional'));if($v_result!=1){return 0;}}else{$v_options[PCLZIP_OPT_ADD_PATH]=$v_arg_list[0];if($v_size==2){$v_options[PCLZIP_OPT_REMOVE_PATH]=$v_arg_list[1];}else if($v_size>2){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid number / type of arguments");return 0;}}}$this->privOptionDefaultThreshold($v_options);$v_string_list=array();$v_att_list=array();$v_filedescr_list=array();$p_result_list=array();if(is_array($p_filelist)){if(isset($p_filelist[0])&&is_array($p_filelist[0])){$v_att_list=$p_filelist;}else{$v_string_list=$p_filelist;}}else if(is_string($p_filelist)){$v_string_list=explode(PCLZIP_SEPARATOR,$p_filelist);}else{PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid variable type p_filelist");return 0;}if(sizeof($v_string_list)!=0){foreach($v_string_list as $v_string){if($v_string!=''){$v_att_list[][PCLZIP_ATT_FILE_NAME]=$v_string;}else{}}}$v_supported_attributes=array(PCLZIP_ATT_FILE_NAME=>'mandatory',PCLZIP_ATT_FILE_NEW_SHORT_NAME=>'optional',PCLZIP_ATT_FILE_NEW_FULL_NAME=>'optional',PCLZIP_ATT_FILE_MTIME=>'optional',PCLZIP_ATT_FILE_CONTENT=>'optional',PCLZIP_ATT_FILE_COMMENT=>'optional');foreach($v_att_list as $v_entry){$v_result=$this->privFileDescrParseAtt($v_entry,$v_filedescr_list[],$v_options,$v_supported_attributes);if($v_result!=1){return 0;}}$v_result=$this->privFileDescrExpand($v_filedescr_list,$v_options);if($v_result!=1){return 0;}$v_result=$this->privCreate($v_filedescr_list,$p_result_list,$v_options);if($v_result!=1){return 0;}return $p_result_list;}function add($p_filelist){$v_result=1;$this->privErrorReset();$v_options=array();$v_options[PCLZIP_OPT_NO_COMPRESSION]=FALSE;$v_size=func_num_args();if($v_size>1){$v_arg_list=func_get_args();array_shift($v_arg_list);$v_size--;if((is_integer($v_arg_list[0]))&&($v_arg_list[0]>77000)){$v_result=$this->privParseOptions($v_arg_list,$v_size,$v_options,array(PCLZIP_OPT_REMOVE_PATH=>'optional',PCLZIP_OPT_REMOVE_ALL_PATH=>'optional',PCLZIP_OPT_ADD_PATH=>'optional',PCLZIP_CB_PRE_ADD=>'optional',PCLZIP_CB_POST_ADD=>'optional',PCLZIP_OPT_NO_COMPRESSION=>'optional',PCLZIP_OPT_COMMENT=>'optional',PCLZIP_OPT_ADD_COMMENT=>'optional',PCLZIP_OPT_PREPEND_COMMENT=>'optional',PCLZIP_OPT_TEMP_FILE_THRESHOLD=>'optional',PCLZIP_OPT_TEMP_FILE_ON=>'optional',PCLZIP_OPT_TEMP_FILE_OFF=>'optional'));if($v_result!=1){return 0;}}else{$v_options[PCLZIP_OPT_ADD_PATH]=$v_add_path=$v_arg_list[0];if($v_size==2){$v_options[PCLZIP_OPT_REMOVE_PATH]=$v_arg_list[1];}else if($v_size>2){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid number / type of arguments");return 0;}}}$this->privOptionDefaultThreshold($v_options);$v_string_list=array();$v_att_list=array();$v_filedescr_list=array();$p_result_list=array();if(is_array($p_filelist)){if(isset($p_filelist[0])&&is_array($p_filelist[0])){$v_att_list=$p_filelist;}else{$v_string_list=$p_filelist;}}else if(is_string($p_filelist)){$v_string_list=explode(PCLZIP_SEPARATOR,$p_filelist);}else{PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid variable type '".gettype($p_filelist)."' for p_filelist");return 0;}if(sizeof($v_string_list)!=0){foreach($v_string_list as $v_string){$v_att_list[][PCLZIP_ATT_FILE_NAME]=$v_string;}}$v_supported_attributes=array(PCLZIP_ATT_FILE_NAME=>'mandatory',PCLZIP_ATT_FILE_NEW_SHORT_NAME=>'optional',PCLZIP_ATT_FILE_NEW_FULL_NAME=>'optional',PCLZIP_ATT_FILE_MTIME=>'optional',PCLZIP_ATT_FILE_CONTENT=>'optional',PCLZIP_ATT_FILE_COMMENT=>'optional');foreach($v_att_list as $v_entry){$v_result=$this->privFileDescrParseAtt($v_entry,$v_filedescr_list[],$v_options,$v_supported_attributes);if($v_result!=1){return 0;}}$v_result=$this->privFileDescrExpand($v_filedescr_list,$v_options);if($v_result!=1){return 0;}$v_result=$this->privAdd($v_filedescr_list,$p_result_list,$v_options);if($v_result!=1){return 0;}return $p_result_list;}function listContent(){$v_result=1;$this->privErrorReset();if(!$this->privCheckFormat()){return(0);}$p_list=array();if(($v_result=$this->privList($p_list))!=1){unset($p_list);return(0);}return $p_list;}function extract(){$v_result=1;$this->privErrorReset();if(!$this->privCheckFormat()){return(0);}$v_options=array();$v_path='';$v_remove_path="";$v_remove_all_path=false;$v_size=func_num_args();$v_options[PCLZIP_OPT_EXTRACT_AS_STRING]=FALSE;if($v_size>0){$v_arg_list=func_get_args();if((is_integer($v_arg_list[0]))&&($v_arg_list[0]>77000)){$v_result=$this->privParseOptions($v_arg_list,$v_size,$v_options,array(PCLZIP_OPT_PATH=>'optional',PCLZIP_OPT_REMOVE_PATH=>'optional',PCLZIP_OPT_REMOVE_ALL_PATH=>'optional',PCLZIP_OPT_ADD_PATH=>'optional',PCLZIP_CB_PRE_EXTRACT=>'optional',PCLZIP_CB_POST_EXTRACT=>'optional',PCLZIP_OPT_SET_CHMOD=>'optional',PCLZIP_OPT_BY_NAME=>'optional',PCLZIP_OPT_BY_EREG=>'optional',PCLZIP_OPT_BY_PREG=>'optional',PCLZIP_OPT_BY_INDEX=>'optional',PCLZIP_OPT_EXTRACT_AS_STRING=>'optional',PCLZIP_OPT_EXTRACT_IN_OUTPUT=>'optional',PCLZIP_OPT_REPLACE_NEWER=>'optional',PCLZIP_OPT_STOP_ON_ERROR=>'optional',PCLZIP_OPT_EXTRACT_DIR_RESTRICTION=>'optional',PCLZIP_OPT_TEMP_FILE_THRESHOLD=>'optional',PCLZIP_OPT_TEMP_FILE_ON=>'optional',PCLZIP_OPT_TEMP_FILE_OFF=>'optional'));if($v_result!=1){return 0;}if(isset($v_options[PCLZIP_OPT_PATH])){$v_path=$v_options[PCLZIP_OPT_PATH];}if(isset($v_options[PCLZIP_OPT_REMOVE_PATH])){$v_remove_path=$v_options[PCLZIP_OPT_REMOVE_PATH];}if(isset($v_options[PCLZIP_OPT_REMOVE_ALL_PATH])){$v_remove_all_path=$v_options[PCLZIP_OPT_REMOVE_ALL_PATH];}if(isset($v_options[PCLZIP_OPT_ADD_PATH])){if((strlen($v_path)>0)&&(substr($v_path,-1)!='/')){$v_path.='/';}$v_path.=$v_options[PCLZIP_OPT_ADD_PATH];}}else{$v_path=$v_arg_list[0];if($v_size==2){$v_remove_path=$v_arg_list[1];}else if($v_size>2){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid number / type of arguments");return 0;}}}$this->privOptionDefaultThreshold($v_options);$p_list=array();$v_result=$this->privExtractByRule($p_list,$v_path,$v_remove_path,$v_remove_all_path,$v_options);if($v_result<1){unset($p_list);return(0);}return $p_list;}function extractByIndex($p_index){$v_result=1;$this->privErrorReset();if(!$this->privCheckFormat()){return(0);}$v_options=array();$v_path='';$v_remove_path="";$v_remove_all_path=false;$v_size=func_num_args();$v_options[PCLZIP_OPT_EXTRACT_AS_STRING]=FALSE;if($v_size>1){$v_arg_list=func_get_args();array_shift($v_arg_list);$v_size--;if((is_integer($v_arg_list[0]))&&($v_arg_list[0]>77000)){$v_result=$this->privParseOptions($v_arg_list,$v_size,$v_options,array(PCLZIP_OPT_PATH=>'optional',PCLZIP_OPT_REMOVE_PATH=>'optional',PCLZIP_OPT_REMOVE_ALL_PATH=>'optional',PCLZIP_OPT_EXTRACT_AS_STRING=>'optional',PCLZIP_OPT_ADD_PATH=>'optional',PCLZIP_CB_PRE_EXTRACT=>'optional',PCLZIP_CB_POST_EXTRACT=>'optional',PCLZIP_OPT_SET_CHMOD=>'optional',PCLZIP_OPT_REPLACE_NEWER=>'optional',PCLZIP_OPT_STOP_ON_ERROR=>'optional',PCLZIP_OPT_EXTRACT_DIR_RESTRICTION=>'optional',PCLZIP_OPT_TEMP_FILE_THRESHOLD=>'optional',PCLZIP_OPT_TEMP_FILE_ON=>'optional',PCLZIP_OPT_TEMP_FILE_OFF=>'optional'));if($v_result!=1){return 0;}if(isset($v_options[PCLZIP_OPT_PATH])){$v_path=$v_options[PCLZIP_OPT_PATH];}if(isset($v_options[PCLZIP_OPT_REMOVE_PATH])){$v_remove_path=$v_options[PCLZIP_OPT_REMOVE_PATH];}if(isset($v_options[PCLZIP_OPT_REMOVE_ALL_PATH])){$v_remove_all_path=$v_options[PCLZIP_OPT_REMOVE_ALL_PATH];}if(isset($v_options[PCLZIP_OPT_ADD_PATH])){if((strlen($v_path)>0)&&(substr($v_path,-1)!='/')){$v_path.='/';}$v_path.=$v_options[PCLZIP_OPT_ADD_PATH];}if(!isset($v_options[PCLZIP_OPT_EXTRACT_AS_STRING])){$v_options[PCLZIP_OPT_EXTRACT_AS_STRING]=FALSE;}else{}}else{$v_path=$v_arg_list[0];if($v_size==2){$v_remove_path=$v_arg_list[1];}else if($v_size>2){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid number / type of arguments");return 0;}}}$v_arg_trick=array(PCLZIP_OPT_BY_INDEX,$p_index);$v_options_trick=array();$v_result=$this->privParseOptions($v_arg_trick,sizeof($v_arg_trick),$v_options_trick,array(PCLZIP_OPT_BY_INDEX=>'optional'));if($v_result!=1){return 0;}$v_options[PCLZIP_OPT_BY_INDEX]=$v_options_trick[PCLZIP_OPT_BY_INDEX];$this->privOptionDefaultThreshold($v_options);if(($v_result=$this->privExtractByRule($p_list,$v_path,$v_remove_path,$v_remove_all_path,$v_options))<1){return(0);}return $p_list;}function delete(){$v_result=1;$this->privErrorReset();if(!$this->privCheckFormat()){return(0);}$v_options=array();$v_size=func_num_args();if($v_size>0){$v_arg_list=func_get_args();$v_result=$this->privParseOptions($v_arg_list,$v_size,$v_options,array(PCLZIP_OPT_BY_NAME=>'optional',PCLZIP_OPT_BY_EREG=>'optional',PCLZIP_OPT_BY_PREG=>'optional',PCLZIP_OPT_BY_INDEX=>'optional'));if($v_result!=1){return 0;}}$this->privDisableMagicQuotes();$v_list=array();if(($v_result=$this->privDeleteByRule($v_list,$v_options))!=1){$this->privSwapBackMagicQuotes();unset($v_list);return(0);}$this->privSwapBackMagicQuotes();return $v_list;}function deleteByIndex($p_index){$p_list=$this->delete(PCLZIP_OPT_BY_INDEX,$p_index);return $p_list;}function properties(){$this->privErrorReset();$this->privDisableMagicQuotes();if(!$this->privCheckFormat()){$this->privSwapBackMagicQuotes();return(0);}$v_prop=array();$v_prop['comment']='';$v_prop['nb']=0;$v_prop['status']='not_exist';if(@is_file($this->zipname)){if(($this->zip_fd=@fopen($this->zipname,'rb'))==0){$this->privSwapBackMagicQuotes();PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,'Unable to open archive \''.$this->zipname.'\' in binary read mode');return 0;}$v_central_dir=array();if(($v_result=$this->privReadEndCentralDir($v_central_dir))!=1){$this->privSwapBackMagicQuotes();return 0;}$this->privCloseFd();$v_prop['comment']=$v_central_dir['comment'];$v_prop['nb']=$v_central_dir['entries'];$v_prop['status']='ok';}$this->privSwapBackMagicQuotes();return $v_prop;}function duplicate($p_archive){$v_result=1;$this->privErrorReset();if((is_object($p_archive))&&(get_class($p_archive)=='pclzip')){$v_result=$this->privDuplicate($p_archive->zipname);}else if(is_string($p_archive)){if(!is_file($p_archive)){PclZip::privErrorLog(PCLZIP_ERR_MISSING_FILE,"No file with filename '".$p_archive."'");$v_result=PCLZIP_ERR_MISSING_FILE;}else{$v_result=$this->privDuplicate($p_archive);}}else{PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid variable type p_archive_to_add");$v_result=PCLZIP_ERR_INVALID_PARAMETER;}return $v_result;}function merge($p_archive_to_add){$v_result=1;$this->privErrorReset();if(!$this->privCheckFormat()){return(0);}if((is_object($p_archive_to_add))&&(get_class($p_archive_to_add)=='pclzip')){$v_result=$this->privMerge($p_archive_to_add);}else if(is_string($p_archive_to_add)){$v_object_archive=new PclZip($p_archive_to_add);$v_result=$this->privMerge($v_object_archive);}else{PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid variable type p_archive_to_add");$v_result=PCLZIP_ERR_INVALID_PARAMETER;}return $v_result;}function errorCode(){if(PCLZIP_ERROR_EXTERNAL==1){return(PclErrorCode());}else{return($this->error_code);}}function errorName($p_with_code=false){$v_name=array(PCLZIP_ERR_NO_ERROR=>'PCLZIP_ERR_NO_ERROR',PCLZIP_ERR_WRITE_OPEN_FAIL=>'PCLZIP_ERR_WRITE_OPEN_FAIL',PCLZIP_ERR_READ_OPEN_FAIL=>'PCLZIP_ERR_READ_OPEN_FAIL',PCLZIP_ERR_INVALID_PARAMETER=>'PCLZIP_ERR_INVALID_PARAMETER',PCLZIP_ERR_MISSING_FILE=>'PCLZIP_ERR_MISSING_FILE',PCLZIP_ERR_FILENAME_TOO_LONG=>'PCLZIP_ERR_FILENAME_TOO_LONG',PCLZIP_ERR_INVALID_ZIP=>'PCLZIP_ERR_INVALID_ZIP',PCLZIP_ERR_BAD_EXTRACTED_FILE=>'PCLZIP_ERR_BAD_EXTRACTED_FILE',PCLZIP_ERR_DIR_CREATE_FAIL=>'PCLZIP_ERR_DIR_CREATE_FAIL',PCLZIP_ERR_BAD_EXTENSION=>'PCLZIP_ERR_BAD_EXTENSION',PCLZIP_ERR_BAD_FORMAT=>'PCLZIP_ERR_BAD_FORMAT',PCLZIP_ERR_DELETE_FILE_FAIL=>'PCLZIP_ERR_DELETE_FILE_FAIL',PCLZIP_ERR_RENAME_FILE_FAIL=>'PCLZIP_ERR_RENAME_FILE_FAIL',PCLZIP_ERR_BAD_CHECKSUM=>'PCLZIP_ERR_BAD_CHECKSUM',PCLZIP_ERR_INVALID_ARCHIVE_ZIP=>'PCLZIP_ERR_INVALID_ARCHIVE_ZIP',PCLZIP_ERR_MISSING_OPTION_VALUE=>'PCLZIP_ERR_MISSING_OPTION_VALUE',PCLZIP_ERR_INVALID_OPTION_VALUE=>'PCLZIP_ERR_INVALID_OPTION_VALUE',PCLZIP_ERR_UNSUPPORTED_COMPRESSION=>'PCLZIP_ERR_UNSUPPORTED_COMPRESSION',PCLZIP_ERR_UNSUPPORTED_ENCRYPTION=>'PCLZIP_ERR_UNSUPPORTED_ENCRYPTION',PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE=>'PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE',PCLZIP_ERR_DIRECTORY_RESTRICTION=>'PCLZIP_ERR_DIRECTORY_RESTRICTION');if(isset($v_name[$this->error_code])){$v_value=$v_name[$this->error_code];}else{$v_value='NoName';}if($p_with_code){return($v_value.' ('.$this->error_code.')');}else{return($v_value);}}function errorInfo($p_full=false){if(PCLZIP_ERROR_EXTERNAL==1){return(PclErrorString());}else{if($p_full){return($this->errorName(true)." : ".$this->error_string);}else{return($this->error_string." [code ".$this->error_code."]");}}}function privCheckFormat($p_level=0){$v_result=true;clearstatcache();$this->privErrorReset();if(!is_file($this->zipname)){PclZip::privErrorLog(PCLZIP_ERR_MISSING_FILE,"Missing archive file '".$this->zipname."'");return(false);}if(!is_readable($this->zipname)){PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,"Unable to read archive '".$this->zipname."'");return(false);}return $v_result;}function privParseOptions(&$p_options_list,$p_size,&$v_result_list,$v_requested_options=false){$v_result=1;$i=0;while($i<$p_size){if(!isset($v_requested_options[$p_options_list[$i]])){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid optional parameter '".$p_options_list[$i]."' for this method");return PclZip::errorCode();}switch($p_options_list[$i]){case PCLZIP_OPT_PATH:case PCLZIP_OPT_REMOVE_PATH:case PCLZIP_OPT_ADD_PATH:if(($i+1)>=$p_size){PclZip::privErrorLog(PCLZIP_ERR_MISSING_OPTION_VALUE,"Missing parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$v_result_list[$p_options_list[$i]]=PclZipUtilTranslateWinPath($p_options_list[$i+1],FALSE);$i++;break;case PCLZIP_OPT_TEMP_FILE_THRESHOLD:if(($i+1)>=$p_size){PclZip::privErrorLog(PCLZIP_ERR_MISSING_OPTION_VALUE,"Missing parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}if(isset($v_result_list[PCLZIP_OPT_TEMP_FILE_OFF])){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Option '".PclZipUtilOptionText($p_options_list[$i])."' can not be used with option 'PCLZIP_OPT_TEMP_FILE_OFF'");return PclZip::errorCode();}$v_value=$p_options_list[$i+1];if((!is_integer($v_value))||($v_value<0)){PclZip::privErrorLog(PCLZIP_ERR_INVALID_OPTION_VALUE,"Integer expected for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$v_result_list[$p_options_list[$i]]=$v_value*1048576;$i++;break;case PCLZIP_OPT_TEMP_FILE_ON:if(isset($v_result_list[PCLZIP_OPT_TEMP_FILE_OFF])){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Option '".PclZipUtilOptionText($p_options_list[$i])."' can not be used with option 'PCLZIP_OPT_TEMP_FILE_OFF'");return PclZip::errorCode();}$v_result_list[$p_options_list[$i]]=true;break;case PCLZIP_OPT_TEMP_FILE_OFF:if(isset($v_result_list[PCLZIP_OPT_TEMP_FILE_ON])){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Option '".PclZipUtilOptionText($p_options_list[$i])."' can not be used with option 'PCLZIP_OPT_TEMP_FILE_ON'");return PclZip::errorCode();}if(isset($v_result_list[PCLZIP_OPT_TEMP_FILE_THRESHOLD])){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Option '".PclZipUtilOptionText($p_options_list[$i])."' can not be used with option 'PCLZIP_OPT_TEMP_FILE_THRESHOLD'");return PclZip::errorCode();}$v_result_list[$p_options_list[$i]]=true;break;case PCLZIP_OPT_EXTRACT_DIR_RESTRICTION:if(($i+1)>=$p_size){PclZip::privErrorLog(PCLZIP_ERR_MISSING_OPTION_VALUE,"Missing parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}if(is_string($p_options_list[$i+1])&&($p_options_list[$i+1]!='')){$v_result_list[$p_options_list[$i]]=PclZipUtilTranslateWinPath($p_options_list[$i+1],FALSE);$i++;}else{}break;case PCLZIP_OPT_BY_NAME:if(($i+1)>=$p_size){PclZip::privErrorLog(PCLZIP_ERR_MISSING_OPTION_VALUE,"Missing parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}if(is_string($p_options_list[$i+1])){$v_result_list[$p_options_list[$i]][0]=$p_options_list[$i+1];}else if(is_array($p_options_list[$i+1])){$v_result_list[$p_options_list[$i]]=$p_options_list[$i+1];}else{PclZip::privErrorLog(PCLZIP_ERR_INVALID_OPTION_VALUE,"Wrong parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$i++;break;case PCLZIP_OPT_BY_EREG:$p_options_list[$i]=PCLZIP_OPT_BY_PREG;case PCLZIP_OPT_BY_PREG:if(($i+1)>=$p_size){PclZip::privErrorLog(PCLZIP_ERR_MISSING_OPTION_VALUE,"Missing parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}if(is_string($p_options_list[$i+1])){$v_result_list[$p_options_list[$i]]=$p_options_list[$i+1];}else{PclZip::privErrorLog(PCLZIP_ERR_INVALID_OPTION_VALUE,"Wrong parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$i++;break;case PCLZIP_OPT_COMMENT:case PCLZIP_OPT_ADD_COMMENT:case PCLZIP_OPT_PREPEND_COMMENT:if(($i+1)>=$p_size){PclZip::privErrorLog(PCLZIP_ERR_MISSING_OPTION_VALUE,"Missing parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}if(is_string($p_options_list[$i+1])){$v_result_list[$p_options_list[$i]]=$p_options_list[$i+1];}else{PclZip::privErrorLog(PCLZIP_ERR_INVALID_OPTION_VALUE,"Wrong parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$i++;break;case PCLZIP_OPT_BY_INDEX:if(($i+1)>=$p_size){PclZip::privErrorLog(PCLZIP_ERR_MISSING_OPTION_VALUE,"Missing parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$v_work_list=array();if(is_string($p_options_list[$i+1])){$p_options_list[$i+1]=strtr($p_options_list[$i+1],' ','');$v_work_list=explode(",",$p_options_list[$i+1]);}else if(is_integer($p_options_list[$i+1])){$v_work_list[0]=$p_options_list[$i+1].'-'.$p_options_list[$i+1];}else if(is_array($p_options_list[$i+1])){$v_work_list=$p_options_list[$i+1];}else{PclZip::privErrorLog(PCLZIP_ERR_INVALID_OPTION_VALUE,"Value must be integer, string or array for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$v_sort_flag=false;$v_sort_value=0;for($j=0;$j<sizeof($v_work_list);$j++){$v_item_list=explode("-",$v_work_list[$j]);$v_size_item_list=sizeof($v_item_list);if($v_size_item_list==1){$v_result_list[$p_options_list[$i]][$j]['start']=$v_item_list[0];$v_result_list[$p_options_list[$i]][$j]['end']=$v_item_list[0];}elseif($v_size_item_list==2){$v_result_list[$p_options_list[$i]][$j]['start']=$v_item_list[0];$v_result_list[$p_options_list[$i]][$j]['end']=$v_item_list[1];}else{PclZip::privErrorLog(PCLZIP_ERR_INVALID_OPTION_VALUE,"Too many values in index range for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}if($v_result_list[$p_options_list[$i]][$j]['start']<$v_sort_value){$v_sort_flag=true;PclZip::privErrorLog(PCLZIP_ERR_INVALID_OPTION_VALUE,"Invalid order of index range for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$v_sort_value=$v_result_list[$p_options_list[$i]][$j]['start'];}if($v_sort_flag){}$i++;break;case PCLZIP_OPT_REMOVE_ALL_PATH:case PCLZIP_OPT_EXTRACT_AS_STRING:case PCLZIP_OPT_NO_COMPRESSION:case PCLZIP_OPT_EXTRACT_IN_OUTPUT:case PCLZIP_OPT_REPLACE_NEWER:case PCLZIP_OPT_STOP_ON_ERROR:$v_result_list[$p_options_list[$i]]=true;break;case PCLZIP_OPT_SET_CHMOD:if(($i+1)>=$p_size){PclZip::privErrorLog(PCLZIP_ERR_MISSING_OPTION_VALUE,"Missing parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$v_result_list[$p_options_list[$i]]=$p_options_list[$i+1];$i++;break;case PCLZIP_CB_PRE_EXTRACT:case PCLZIP_CB_POST_EXTRACT:case PCLZIP_CB_PRE_ADD:case PCLZIP_CB_POST_ADD:if(($i+1)>=$p_size){PclZip::privErrorLog(PCLZIP_ERR_MISSING_OPTION_VALUE,"Missing parameter value for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$v_function_name=$p_options_list[$i+1];if(!function_exists($v_function_name)){PclZip::privErrorLog(PCLZIP_ERR_INVALID_OPTION_VALUE,"Function '".$v_function_name."()' is not an existing function for option '".PclZipUtilOptionText($p_options_list[$i])."'");return PclZip::errorCode();}$v_result_list[$p_options_list[$i]]=$v_function_name;$i++;break;default:PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Unknown parameter '".$p_options_list[$i]."'");return PclZip::errorCode();}$i++;}if($v_requested_options!==false){for($key=reset($v_requested_options);$key=key($v_requested_options);$key=next($v_requested_options)){if($v_requested_options[$key]=='mandatory'){if(!isset($v_result_list[$key])){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Missing mandatory parameter ".PclZipUtilOptionText($key)."(".$key.")");return PclZip::errorCode();}}}}if(!isset($v_result_list[PCLZIP_OPT_TEMP_FILE_THRESHOLD])){}return $v_result;}function privOptionDefaultThreshold(&$p_options){$v_result=1;if(isset($p_options[PCLZIP_OPT_TEMP_FILE_THRESHOLD])||isset($p_options[PCLZIP_OPT_TEMP_FILE_OFF])){return $v_result;}$v_memory_limit=ini_get('memory_limit');$v_memory_limit=trim($v_memory_limit);$last=strtolower(substr($v_memory_limit,-1));if($last=='g')$v_memory_limit=$v_memory_limit*1073741824;if($last=='m')$v_memory_limit=$v_memory_limit*1048576;if($last=='k')$v_memory_limit=$v_memory_limit*1024;$p_options[PCLZIP_OPT_TEMP_FILE_THRESHOLD]=floor($v_memory_limit*PCLZIP_TEMPORARY_FILE_RATIO);if($p_options[PCLZIP_OPT_TEMP_FILE_THRESHOLD]<1048576){unset($p_options[PCLZIP_OPT_TEMP_FILE_THRESHOLD]);}return $v_result;}function privFileDescrParseAtt(&$p_file_list,&$p_filedescr,$v_options,$v_requested_options=false){$v_result=1;foreach($p_file_list as $v_key=>$v_value){if(!isset($v_requested_options[$v_key])){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid file attribute '".$v_key."' for this file");return PclZip::errorCode();}switch($v_key){case PCLZIP_ATT_FILE_NAME:if(!is_string($v_value)){PclZip::privErrorLog(PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE,"Invalid type ".gettype($v_value).". String expected for attribute '".PclZipUtilOptionText($v_key)."'");return PclZip::errorCode();}$p_filedescr['filename']=PclZipUtilPathReduction($v_value);if($p_filedescr['filename']==''){PclZip::privErrorLog(PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE,"Invalid empty filename for attribute '".PclZipUtilOptionText($v_key)."'");return PclZip::errorCode();}break;case PCLZIP_ATT_FILE_NEW_SHORT_NAME:if(!is_string($v_value)){PclZip::privErrorLog(PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE,"Invalid type ".gettype($v_value).". String expected for attribute '".PclZipUtilOptionText($v_key)."'");return PclZip::errorCode();}$p_filedescr['new_short_name']=PclZipUtilPathReduction($v_value);if($p_filedescr['new_short_name']==''){PclZip::privErrorLog(PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE,"Invalid empty short filename for attribute '".PclZipUtilOptionText($v_key)."'");return PclZip::errorCode();}break;case PCLZIP_ATT_FILE_NEW_FULL_NAME:if(!is_string($v_value)){PclZip::privErrorLog(PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE,"Invalid type ".gettype($v_value).". String expected for attribute '".PclZipUtilOptionText($v_key)."'");return PclZip::errorCode();}$p_filedescr['new_full_name']=PclZipUtilPathReduction($v_value);if($p_filedescr['new_full_name']==''){PclZip::privErrorLog(PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE,"Invalid empty full filename for attribute '".PclZipUtilOptionText($v_key)."'");return PclZip::errorCode();}break;case PCLZIP_ATT_FILE_COMMENT:if(!is_string($v_value)){PclZip::privErrorLog(PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE,"Invalid type ".gettype($v_value).". String expected for attribute '".PclZipUtilOptionText($v_key)."'");return PclZip::errorCode();}$p_filedescr['comment']=$v_value;break;case PCLZIP_ATT_FILE_MTIME:if(!is_integer($v_value)){PclZip::privErrorLog(PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE,"Invalid type ".gettype($v_value).". Integer expected for attribute '".PclZipUtilOptionText($v_key)."'");return PclZip::errorCode();}$p_filedescr['mtime']=$v_value;break;case PCLZIP_ATT_FILE_CONTENT:$p_filedescr['content']=$v_value;break;default:PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Unknown parameter '".$v_key."'");return PclZip::errorCode();}if($v_requested_options!==false){for($key=reset($v_requested_options);$key=key($v_requested_options);$key=next($v_requested_options)){if($v_requested_options[$key]=='mandatory'){if(!isset($p_file_list[$key])){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Missing mandatory parameter ".PclZipUtilOptionText($key)."(".$key.")");return PclZip::errorCode();}}}}}return $v_result;}function privFileDescrExpand(&$p_filedescr_list,&$p_options){$v_result=1;$v_result_list=array();for($i=0;$i<sizeof($p_filedescr_list);$i++){$v_descr=$p_filedescr_list[$i];$v_descr['filename']=PclZipUtilTranslateWinPath($v_descr['filename'],false);$v_descr['filename']=PclZipUtilPathReduction($v_descr['filename']);if(file_exists($v_descr['filename'])){if(@is_file($v_descr['filename'])){$v_descr['type']='file';}else if(@is_dir($v_descr['filename'])){$v_descr['type']='folder';}else if(@is_link($v_descr['filename'])){continue;}else{continue;}}else if(isset($v_descr['content'])){$v_descr['type']='virtual_file';}else{PclZip::privErrorLog(PCLZIP_ERR_MISSING_FILE,"File '".$v_descr['filename']."' does not exist");return PclZip::errorCode();}$this->privCalculateStoredFilename($v_descr,$p_options);$v_result_list[sizeof($v_result_list)]=$v_descr;if($v_descr['type']=='folder'){$v_dirlist_descr=array();$v_dirlist_nb=0;if($v_folder_handler=@opendir($v_descr['filename'])){while(($v_item_handler=@readdir($v_folder_handler))!==false){if(($v_item_handler=='.')||($v_item_handler=='..')){continue;}$v_dirlist_descr[$v_dirlist_nb]['filename']=$v_descr['filename'].'/'.$v_item_handler;if(($v_descr['stored_filename']!=$v_descr['filename'])&&(!isset($p_options[PCLZIP_OPT_REMOVE_ALL_PATH]))){if($v_descr['stored_filename']!=''){$v_dirlist_descr[$v_dirlist_nb]['new_full_name']=$v_descr['stored_filename'].'/'.$v_item_handler;}else{$v_dirlist_descr[$v_dirlist_nb]['new_full_name']=$v_item_handler;}}$v_dirlist_nb++;}@closedir($v_folder_handler);}else{}if($v_dirlist_nb!=0){if(($v_result=$this->privFileDescrExpand($v_dirlist_descr,$p_options))!=1){return $v_result;}$v_result_list=array_merge($v_result_list,$v_dirlist_descr);}else{}unset($v_dirlist_descr);}}$p_filedescr_list=$v_result_list;return $v_result;}function privCreate($p_filedescr_list,&$p_result_list,&$p_options){$v_result=1;$v_list_detail=array();$this->privDisableMagicQuotes();if(($v_result=$this->privOpenFd('wb'))!=1){return $v_result;}$v_result=$this->privAddList($p_filedescr_list,$p_result_list,$p_options);$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result;}function privAdd($p_filedescr_list,&$p_result_list,&$p_options){$v_result=1;$v_list_detail=array();if((!is_file($this->zipname))||(filesize($this->zipname)==0)){$v_result=$this->privCreate($p_filedescr_list,$p_result_list,$p_options);return $v_result;}$this->privDisableMagicQuotes();if(($v_result=$this->privOpenFd('rb'))!=1){$this->privSwapBackMagicQuotes();return $v_result;}$v_central_dir=array();if(($v_result=$this->privReadEndCentralDir($v_central_dir))!=1){$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result;}@rewind($this->zip_fd);$v_zip_temp_name=PCLZIP_TEMPORARY_DIR.uniqid('pclzip-').'.tmp';if(($v_zip_temp_fd=@fopen($v_zip_temp_name,'wb'))==0){$this->privCloseFd();$this->privSwapBackMagicQuotes();PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,'Unable to open temporary file \''.$v_zip_temp_name.'\' in binary write mode');return PclZip::errorCode();}$v_size=$v_central_dir['offset'];while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=fread($this->zip_fd,$v_read_size);@fwrite($v_zip_temp_fd,$v_buffer,$v_read_size);$v_size-=$v_read_size;}$v_swap=$this->zip_fd;$this->zip_fd=$v_zip_temp_fd;$v_zip_temp_fd=$v_swap;$v_header_list=array();if(($v_result=$this->privAddFileList($p_filedescr_list,$v_header_list,$p_options))!=1){fclose($v_zip_temp_fd);$this->privCloseFd();@unlink($v_zip_temp_name);$this->privSwapBackMagicQuotes();return $v_result;}$v_offset=@ftell($this->zip_fd);$v_size=$v_central_dir['size'];while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@fread($v_zip_temp_fd,$v_read_size);@fwrite($this->zip_fd,$v_buffer,$v_read_size);$v_size-=$v_read_size;}for($i=0,$v_count=0;$i<sizeof($v_header_list);$i++){if($v_header_list[$i]['status']=='ok'){if(($v_result=$this->privWriteCentralFileHeader($v_header_list[$i]))!=1){fclose($v_zip_temp_fd);$this->privCloseFd();@unlink($v_zip_temp_name);$this->privSwapBackMagicQuotes();return $v_result;}$v_count++;}$this->privConvertHeader2FileInfo($v_header_list[$i],$p_result_list[$i]);}$v_comment=$v_central_dir['comment'];if(isset($p_options[PCLZIP_OPT_COMMENT])){$v_comment=$p_options[PCLZIP_OPT_COMMENT];}if(isset($p_options[PCLZIP_OPT_ADD_COMMENT])){$v_comment=$v_comment.$p_options[PCLZIP_OPT_ADD_COMMENT];}if(isset($p_options[PCLZIP_OPT_PREPEND_COMMENT])){$v_comment=$p_options[PCLZIP_OPT_PREPEND_COMMENT].$v_comment;}$v_size=@ftell($this->zip_fd)-$v_offset;if(($v_result=$this->privWriteCentralHeader($v_count+$v_central_dir['entries'],$v_size,$v_offset,$v_comment))!=1){unset($v_header_list);$this->privSwapBackMagicQuotes();return $v_result;}$v_swap=$this->zip_fd;$this->zip_fd=$v_zip_temp_fd;$v_zip_temp_fd=$v_swap;$this->privCloseFd();@fclose($v_zip_temp_fd);$this->privSwapBackMagicQuotes();@unlink($this->zipname);PclZipUtilRename($v_zip_temp_name,$this->zipname);return $v_result;}function privOpenFd($p_mode){$v_result=1;if($this->zip_fd!=0){PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,'Zip file \''.$this->zipname.'\' already open');return PclZip::errorCode();}if(($this->zip_fd=@fopen($this->zipname,$p_mode))==0){PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,'Unable to open archive \''.$this->zipname.'\' in '.$p_mode.' mode');return PclZip::errorCode();}return $v_result;}function privCloseFd(){$v_result=1;if($this->zip_fd!=0)@fclose($this->zip_fd);$this->zip_fd=0;return $v_result;}function privAddList($p_filedescr_list,&$p_result_list,&$p_options){$v_result=1;$v_header_list=array();if(($v_result=$this->privAddFileList($p_filedescr_list,$v_header_list,$p_options))!=1){return $v_result;}$v_offset=@ftell($this->zip_fd);for($i=0,$v_count=0;$i<sizeof($v_header_list);$i++){if($v_header_list[$i]['status']=='ok'){if(($v_result=$this->privWriteCentralFileHeader($v_header_list[$i]))!=1){return $v_result;}$v_count++;}$this->privConvertHeader2FileInfo($v_header_list[$i],$p_result_list[$i]);}$v_comment='';if(isset($p_options[PCLZIP_OPT_COMMENT])){$v_comment=$p_options[PCLZIP_OPT_COMMENT];}$v_size=@ftell($this->zip_fd)-$v_offset;if(($v_result=$this->privWriteCentralHeader($v_count,$v_size,$v_offset,$v_comment))!=1){unset($v_header_list);return $v_result;}return $v_result;}function privAddFileList($p_filedescr_list,&$p_result_list,&$p_options){$v_result=1;$v_header=array();$v_nb=sizeof($p_result_list);for($j=0;($j<sizeof($p_filedescr_list))&&($v_result==1);$j++){$p_filedescr_list[$j]['filename']=PclZipUtilTranslateWinPath($p_filedescr_list[$j]['filename'],false);if($p_filedescr_list[$j]['filename']==""){continue;}if(($p_filedescr_list[$j]['type']!='virtual_file')&&(!file_exists($p_filedescr_list[$j]['filename']))){PclZip::privErrorLog(PCLZIP_ERR_MISSING_FILE,"File '".$p_filedescr_list[$j]['filename']."' does not exist");return PclZip::errorCode();}if(($p_filedescr_list[$j]['type']=='file')||($p_filedescr_list[$j]['type']=='virtual_file')||(($p_filedescr_list[$j]['type']=='folder')&&(!isset($p_options[PCLZIP_OPT_REMOVE_ALL_PATH])||!$p_options[PCLZIP_OPT_REMOVE_ALL_PATH]))){$v_result=$this->privAddFile($p_filedescr_list[$j],$v_header,$p_options);if($v_result!=1){return $v_result;}$p_result_list[$v_nb++]=$v_header;}}return $v_result;}function privAddFile($p_filedescr,&$p_header,&$p_options){$v_result=1;$p_filename=$p_filedescr['filename'];if($p_filename==""){PclZip::privErrorLog(PCLZIP_ERR_INVALID_PARAMETER,"Invalid file list parameter (invalid or empty list)");return PclZip::errorCode();}clearstatcache();$p_header['version']=20;$p_header['version_extracted']=10;$p_header['flag']=0;$p_header['compression']=0;$p_header['crc']=0;$p_header['compressed_size']=0;$p_header['filename_len']=strlen($p_filename);$p_header['extra_len']=0;$p_header['disk']=0;$p_header['internal']=0;$p_header['offset']=0;$p_header['filename']=$p_filename;$p_header['stored_filename']=$p_filedescr['stored_filename'];$p_header['extra']='';$p_header['status']='ok';$p_header['index']=-1;if($p_filedescr['type']=='file'){$p_header['external']=0x00000000;$p_header['size']=filesize($p_filename);}else if($p_filedescr['type']=='folder'){$p_header['external']=0x00000010;$p_header['mtime']=filemtime($p_filename);$p_header['size']=filesize($p_filename);}else if($p_filedescr['type']=='virtual_file'){$p_header['external']=0x00000000;$p_header['size']=strlen($p_filedescr['content']);}if(isset($p_filedescr['mtime'])){$p_header['mtime']=$p_filedescr['mtime'];}else if($p_filedescr['type']=='virtual_file'){$p_header['mtime']=time();}else{$p_header['mtime']=filemtime($p_filename);}if(isset($p_filedescr['comment'])){$p_header['comment_len']=strlen($p_filedescr['comment']);$p_header['comment']=$p_filedescr['comment'];}else{$p_header['comment_len']=0;$p_header['comment']='';}if(isset($p_options[PCLZIP_CB_PRE_ADD])){$v_local_header=array();$this->privConvertHeader2FileInfo($p_header,$v_local_header);$v_result=$p_options[PCLZIP_CB_PRE_ADD](PCLZIP_CB_PRE_ADD,$v_local_header);if($v_result==0){$p_header['status']="skipped";$v_result=1;}if($p_header['stored_filename']!=$v_local_header['stored_filename']){$p_header['stored_filename']=PclZipUtilPathReduction($v_local_header['stored_filename']);}}if($p_header['stored_filename']==""){$p_header['status']="filtered";}if(strlen($p_header['stored_filename'])>0xFF){$p_header['status']='filename_too_long';}if($p_header['status']=='ok'){if($p_filedescr['type']=='file'){if((!isset($p_options[PCLZIP_OPT_TEMP_FILE_OFF]))&&(isset($p_options[PCLZIP_OPT_TEMP_FILE_ON])||(isset($p_options[PCLZIP_OPT_TEMP_FILE_THRESHOLD])&&($p_options[PCLZIP_OPT_TEMP_FILE_THRESHOLD]<=$p_header['size'])))){$v_result=$this->privAddFileUsingTempFile($p_filedescr,$p_header,$p_options);if($v_result<PCLZIP_ERR_NO_ERROR){return $v_result;}}else{if(($v_file=@fopen($p_filename,"rb"))==0){PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,"Unable to open file '$p_filename' in binary read mode");return PclZip::errorCode();}$v_content=@fread($v_file,$p_header['size']);@fclose($v_file);$p_header['crc']=@crc32($v_content);if($p_options[PCLZIP_OPT_NO_COMPRESSION]){$p_header['compressed_size']=$p_header['size'];$p_header['compression']=0;}else{$v_content=@gzdeflate($v_content);$p_header['compressed_size']=strlen($v_content);$p_header['compression']=8;}if(($v_result=$this->privWriteFileHeader($p_header))!=1){@fclose($v_file);return $v_result;}@fwrite($this->zip_fd,$v_content,$p_header['compressed_size']);}}else if($p_filedescr['type']=='virtual_file'){$v_content=$p_filedescr['content'];$p_header['crc']=@crc32($v_content);if($p_options[PCLZIP_OPT_NO_COMPRESSION]){$p_header['compressed_size']=$p_header['size'];$p_header['compression']=0;}else{$v_content=@gzdeflate($v_content);$p_header['compressed_size']=strlen($v_content);$p_header['compression']=8;}if(($v_result=$this->privWriteFileHeader($p_header))!=1){@fclose($v_file);return $v_result;}@fwrite($this->zip_fd,$v_content,$p_header['compressed_size']);}else if($p_filedescr['type']=='folder'){if(@substr($p_header['stored_filename'],-1)!='/'){$p_header['stored_filename'].='/';}$p_header['size']=0;$p_header['external']=0x00000010;if(($v_result=$this->privWriteFileHeader($p_header))!=1){return $v_result;}}}if(isset($p_options[PCLZIP_CB_POST_ADD])){$v_local_header=array();$this->privConvertHeader2FileInfo($p_header,$v_local_header);$v_result=$p_options[PCLZIP_CB_POST_ADD](PCLZIP_CB_POST_ADD,$v_local_header);if($v_result==0){$v_result=1;}}return $v_result;}function privAddFileUsingTempFile($p_filedescr,&$p_header,&$p_options){$v_result=PCLZIP_ERR_NO_ERROR;$p_filename=$p_filedescr['filename'];if(($v_file=@fopen($p_filename,"rb"))==0){PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,"Unable to open file '$p_filename' in binary read mode");return PclZip::errorCode();}$v_gzip_temp_name=PCLZIP_TEMPORARY_DIR.uniqid('pclzip-').'.gz';if(($v_file_compressed=@gzopen($v_gzip_temp_name,"wb"))==0){fclose($v_file);PclZip::privErrorLog(PCLZIP_ERR_WRITE_OPEN_FAIL,'Unable to open temporary file \''.$v_gzip_temp_name.'\' in binary write mode');return PclZip::errorCode();}$v_size=filesize($p_filename);while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@fread($v_file,$v_read_size);@gzputs($v_file_compressed,$v_buffer,$v_read_size);$v_size-=$v_read_size;}@fclose($v_file);@gzclose($v_file_compressed);if(filesize($v_gzip_temp_name)<18){PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,'gzip temporary file \''.$v_gzip_temp_name.'\' has invalid filesize - should be minimum 18 bytes');return PclZip::errorCode();}if(($v_file_compressed=@fopen($v_gzip_temp_name,"rb"))==0){PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,'Unable to open temporary file \''.$v_gzip_temp_name.'\' in binary read mode');return PclZip::errorCode();}$v_binary_data=@fread($v_file_compressed,10);$v_data_header=unpack('a1id1/a1id2/a1cm/a1flag/Vmtime/a1xfl/a1os',$v_binary_data);$v_data_header['os']=bin2hex($v_data_header['os']);@fseek($v_file_compressed,filesize($v_gzip_temp_name)-8);$v_binary_data=@fread($v_file_compressed,8);$v_data_footer=unpack('Vcrc/Vcompressed_size',$v_binary_data);$p_header['compression']=ord($v_data_header['cm']);$p_header['crc']=$v_data_footer['crc'];$p_header['compressed_size']=filesize($v_gzip_temp_name)-18;@fclose($v_file_compressed);if(($v_result=$this->privWriteFileHeader($p_header))!=1){return $v_result;}if(($v_file_compressed=@fopen($v_gzip_temp_name,"rb"))==0){PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,'Unable to open temporary file \''.$v_gzip_temp_name.'\' in binary read mode');return PclZip::errorCode();}fseek($v_file_compressed,10);$v_size=$p_header['compressed_size'];while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@fread($v_file_compressed,$v_read_size);@fwrite($this->zip_fd,$v_buffer,$v_read_size);$v_size-=$v_read_size;}@fclose($v_file_compressed);@unlink($v_gzip_temp_name);return $v_result;}function privCalculateStoredFilename(&$p_filedescr,&$p_options){$v_result=1;$p_filename=$p_filedescr['filename'];if(isset($p_options[PCLZIP_OPT_ADD_PATH])){$p_add_dir=$p_options[PCLZIP_OPT_ADD_PATH];}else{$p_add_dir='';}if(isset($p_options[PCLZIP_OPT_REMOVE_PATH])){$p_remove_dir=$p_options[PCLZIP_OPT_REMOVE_PATH];}else{$p_remove_dir='';}if(isset($p_options[PCLZIP_OPT_REMOVE_ALL_PATH])){$p_remove_all_dir=$p_options[PCLZIP_OPT_REMOVE_ALL_PATH];}else{$p_remove_all_dir=0;}if(isset($p_filedescr['new_full_name'])){$v_stored_filename=PclZipUtilTranslateWinPath($p_filedescr['new_full_name']);}else{if(isset($p_filedescr['new_short_name'])){$v_path_info=pathinfo($p_filename);$v_dir='';if($v_path_info['dirname']!=''){$v_dir=$v_path_info['dirname'].'/';}$v_stored_filename=$v_dir.$p_filedescr['new_short_name'];}else{$v_stored_filename=$p_filename;}if($p_remove_all_dir){$v_stored_filename=basename($p_filename);}else if($p_remove_dir!=""){if(substr($p_remove_dir,-1)!='/')$p_remove_dir.="/";if((substr($p_filename,0,2)=="./")||(substr($p_remove_dir,0,2)=="./")){if((substr($p_filename,0,2)=="./")&&(substr($p_remove_dir,0,2)!="./")){$p_remove_dir="./".$p_remove_dir;}if((substr($p_filename,0,2)!="./")&&(substr($p_remove_dir,0,2)=="./")){$p_remove_dir=substr($p_remove_dir,2);}}$v_compare=PclZipUtilPathInclusion($p_remove_dir,$v_stored_filename);if($v_compare>0){if($v_compare==2){$v_stored_filename="";}else{$v_stored_filename=substr($v_stored_filename,strlen($p_remove_dir));}}}$v_stored_filename=PclZipUtilTranslateWinPath($v_stored_filename);if($p_add_dir!=""){if(substr($p_add_dir,-1)=="/")$v_stored_filename=$p_add_dir.$v_stored_filename;else $v_stored_filename=$p_add_dir."/".$v_stored_filename;}}$v_stored_filename=PclZipUtilPathReduction($v_stored_filename);$p_filedescr['stored_filename']=$v_stored_filename;return $v_result;}function privWriteFileHeader(&$p_header){$v_result=1;$p_header['offset']=ftell($this->zip_fd);$v_date=getdate($p_header['mtime']);$v_mtime=($v_date['hours']<<11)+($v_date['minutes']<<5)+$v_date['seconds']/2;$v_mdate=(($v_date['year']-1980)<<9)+($v_date['mon']<<5)+$v_date['mday'];$v_binary_data=pack("VvvvvvVVVvv",0x04034b50,$p_header['version_extracted'],$p_header['flag'],$p_header['compression'],$v_mtime,$v_mdate,$p_header['crc'],$p_header['compressed_size'],$p_header['size'],strlen($p_header['stored_filename']),$p_header['extra_len']);fputs($this->zip_fd,$v_binary_data,30);if(strlen($p_header['stored_filename'])!=0){fputs($this->zip_fd,$p_header['stored_filename'],strlen($p_header['stored_filename']));}if($p_header['extra_len']!=0){fputs($this->zip_fd,$p_header['extra'],$p_header['extra_len']);}return $v_result;}function privWriteCentralFileHeader(&$p_header){$v_result=1;$v_date=getdate($p_header['mtime']);$v_mtime=($v_date['hours']<<11)+($v_date['minutes']<<5)+$v_date['seconds']/2;$v_mdate=(($v_date['year']-1980)<<9)+($v_date['mon']<<5)+$v_date['mday'];$v_binary_data=pack("VvvvvvvVVVvvvvvVV",0x02014b50,$p_header['version'],$p_header['version_extracted'],$p_header['flag'],$p_header['compression'],$v_mtime,$v_mdate,$p_header['crc'],$p_header['compressed_size'],$p_header['size'],strlen($p_header['stored_filename']),$p_header['extra_len'],$p_header['comment_len'],$p_header['disk'],$p_header['internal'],$p_header['external'],$p_header['offset']);fputs($this->zip_fd,$v_binary_data,46);if(strlen($p_header['stored_filename'])!=0){fputs($this->zip_fd,$p_header['stored_filename'],strlen($p_header['stored_filename']));}if($p_header['extra_len']!=0){fputs($this->zip_fd,$p_header['extra'],$p_header['extra_len']);}if($p_header['comment_len']!=0){fputs($this->zip_fd,$p_header['comment'],$p_header['comment_len']);}return $v_result;}function privWriteCentralHeader($p_nb_entries,$p_size,$p_offset,$p_comment){$v_result=1;$v_binary_data=pack("VvvvvVVv",0x06054b50,0,0,$p_nb_entries,$p_nb_entries,$p_size,$p_offset,strlen($p_comment));fputs($this->zip_fd,$v_binary_data,22);if(strlen($p_comment)!=0){fputs($this->zip_fd,$p_comment,strlen($p_comment));}return $v_result;}function privList(&$p_list){$v_result=1;$this->privDisableMagicQuotes();if(($this->zip_fd=@fopen($this->zipname,'rb'))==0){$this->privSwapBackMagicQuotes();PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,'Unable to open archive \''.$this->zipname.'\' in binary read mode');return PclZip::errorCode();}$v_central_dir=array();if(($v_result=$this->privReadEndCentralDir($v_central_dir))!=1){$this->privSwapBackMagicQuotes();return $v_result;}@rewind($this->zip_fd);if(@fseek($this->zip_fd,$v_central_dir['offset'])){$this->privSwapBackMagicQuotes();PclZip::privErrorLog(PCLZIP_ERR_INVALID_ARCHIVE_ZIP,'Invalid archive size');return PclZip::errorCode();}for($i=0;$i<$v_central_dir['entries'];$i++){if(($v_result=$this->privReadCentralFileHeader($v_header))!=1){$this->privSwapBackMagicQuotes();return $v_result;}$v_header['index']=$i;$this->privConvertHeader2FileInfo($v_header,$p_list[$i]);unset($v_header);}$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result;}function privConvertHeader2FileInfo($p_header,&$p_info){$v_result=1;$v_temp_path=PclZipUtilPathReduction($p_header['filename']);$p_info['filename']=$v_temp_path;$v_temp_path=PclZipUtilPathReduction($p_header['stored_filename']);$p_info['stored_filename']=$v_temp_path;$p_info['size']=$p_header['size'];$p_info['compressed_size']=$p_header['compressed_size'];$p_info['mtime']=$p_header['mtime'];$p_info['comment']=$p_header['comment'];$p_info['folder']=(($p_header['external']&0x00000010)==0x00000010);$p_info['index']=$p_header['index'];$p_info['status']=$p_header['status'];$p_info['crc']=$p_header['crc'];return $v_result;}function privExtractByRule(&$p_file_list,$p_path,$p_remove_path,$p_remove_all_path,&$p_options){$v_result=1;$this->privDisableMagicQuotes();if(($p_path=="")||((substr($p_path,0,1)!="/")&&(substr($p_path,0,3)!="../")&&(substr($p_path,1,2)!=":/")))$p_path="./".$p_path;if(($p_path!="./")&&($p_path!="/")){while(substr($p_path,-1)=="/"){$p_path=substr($p_path,0,strlen($p_path)-1);}}if(($p_remove_path!="")&&(substr($p_remove_path,-1)!='/')){$p_remove_path.='/';}$p_remove_path_size=strlen($p_remove_path);if(($v_result=$this->privOpenFd('rb'))!=1){$this->privSwapBackMagicQuotes();return $v_result;}$v_central_dir=array();if(($v_result=$this->privReadEndCentralDir($v_central_dir))!=1){$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result;}$v_pos_entry=$v_central_dir['offset'];$j_start=0;for($i=0,$v_nb_extracted=0;$i<$v_central_dir['entries'];$i++){@rewind($this->zip_fd);if(@fseek($this->zip_fd,$v_pos_entry)){$this->privCloseFd();$this->privSwapBackMagicQuotes();PclZip::privErrorLog(PCLZIP_ERR_INVALID_ARCHIVE_ZIP,'Invalid archive size');return PclZip::errorCode();}$v_header=array();if(($v_result=$this->privReadCentralFileHeader($v_header))!=1){$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result;}$v_header['index']=$i;$v_pos_entry=ftell($this->zip_fd);$v_extract=false;if((isset($p_options[PCLZIP_OPT_BY_NAME]))&&($p_options[PCLZIP_OPT_BY_NAME]!=0)){for($j=0;($j<sizeof($p_options[PCLZIP_OPT_BY_NAME]))&&(!$v_extract);$j++){if(substr($p_options[PCLZIP_OPT_BY_NAME][$j],-1)=="/"){if((strlen($v_header['stored_filename'])>strlen($p_options[PCLZIP_OPT_BY_NAME][$j]))&&(substr($v_header['stored_filename'],0,strlen($p_options[PCLZIP_OPT_BY_NAME][$j]))==$p_options[PCLZIP_OPT_BY_NAME][$j])){$v_extract=true;}}elseif($v_header['stored_filename']==$p_options[PCLZIP_OPT_BY_NAME][$j]){$v_extract=true;}}}else if((isset($p_options[PCLZIP_OPT_BY_PREG]))&&($p_options[PCLZIP_OPT_BY_PREG]!="")){if(preg_match($p_options[PCLZIP_OPT_BY_PREG],$v_header['stored_filename'])){$v_extract=true;}}else if((isset($p_options[PCLZIP_OPT_BY_INDEX]))&&($p_options[PCLZIP_OPT_BY_INDEX]!=0)){for($j=$j_start;($j<sizeof($p_options[PCLZIP_OPT_BY_INDEX]))&&(!$v_extract);$j++){if(($i>=$p_options[PCLZIP_OPT_BY_INDEX][$j]['start'])&&($i<=$p_options[PCLZIP_OPT_BY_INDEX][$j]['end'])){$v_extract=true;}if($i>=$p_options[PCLZIP_OPT_BY_INDEX][$j]['end']){$j_start=$j+1;}if($p_options[PCLZIP_OPT_BY_INDEX][$j]['start']>$i){break;}}}else{$v_extract=true;}if(($v_extract)&&(($v_header['compression']!=8)&&($v_header['compression']!=0))){$v_header['status']='unsupported_compression';if((isset($p_options[PCLZIP_OPT_STOP_ON_ERROR]))&&($p_options[PCLZIP_OPT_STOP_ON_ERROR]===true)){$this->privSwapBackMagicQuotes();PclZip::privErrorLog(PCLZIP_ERR_UNSUPPORTED_COMPRESSION,"Filename '".$v_header['stored_filename']."' is "."compressed by an unsupported compression "."method (".$v_header['compression'].") ");return PclZip::errorCode();}}if(($v_extract)&&(($v_header['flag']&1)==1)){$v_header['status']='unsupported_encryption';if((isset($p_options[PCLZIP_OPT_STOP_ON_ERROR]))&&($p_options[PCLZIP_OPT_STOP_ON_ERROR]===true)){$this->privSwapBackMagicQuotes();PclZip::privErrorLog(PCLZIP_ERR_UNSUPPORTED_ENCRYPTION,"Unsupported encryption for "." filename '".$v_header['stored_filename']."'");return PclZip::errorCode();}}if(($v_extract)&&($v_header['status']!='ok')){$v_result=$this->privConvertHeader2FileInfo($v_header,$p_file_list[$v_nb_extracted++]);if($v_result!=1){$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result;}$v_extract=false;}if($v_extract){@rewind($this->zip_fd);if(@fseek($this->zip_fd,$v_header['offset'])){$this->privCloseFd();$this->privSwapBackMagicQuotes();PclZip::privErrorLog(PCLZIP_ERR_INVALID_ARCHIVE_ZIP,'Invalid archive size');return PclZip::errorCode();}if($p_options[PCLZIP_OPT_EXTRACT_AS_STRING]){$v_string='';$v_result1=$this->privExtractFileAsString($v_header,$v_string,$p_options);if($v_result1<1){$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result1;}if(($v_result=$this->privConvertHeader2FileInfo($v_header,$p_file_list[$v_nb_extracted]))!=1){$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result;}$p_file_list[$v_nb_extracted]['content']=$v_string;$v_nb_extracted++;if($v_result1==2){break;}}elseif((isset($p_options[PCLZIP_OPT_EXTRACT_IN_OUTPUT]))&&($p_options[PCLZIP_OPT_EXTRACT_IN_OUTPUT])){$v_result1=$this->privExtractFileInOutput($v_header,$p_options);if($v_result1<1){$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result1;}if(($v_result=$this->privConvertHeader2FileInfo($v_header,$p_file_list[$v_nb_extracted++]))!=1){$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result;}if($v_result1==2){break;}}else{$v_result1=$this->privExtractFile($v_header,$p_path,$p_remove_path,$p_remove_all_path,$p_options);if($v_result1<1){$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result1;}if(($v_result=$this->privConvertHeader2FileInfo($v_header,$p_file_list[$v_nb_extracted++]))!=1){$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result;}if($v_result1==2){break;}}}}$this->privCloseFd();$this->privSwapBackMagicQuotes();return $v_result;}function privExtractFile(&$p_entry,$p_path,$p_remove_path,$p_remove_all_path,&$p_options){$v_result=1;if(($v_result=$this->privReadFileHeader($v_header))!=1){return $v_result;}if($this->privCheckFileHeaders($v_header,$p_entry)!=1){}if($p_remove_all_path==true){if(($p_entry['external']&0x00000010)==0x00000010){$p_entry['status']="filtered";return $v_result;}$p_entry['filename']=basename($p_entry['filename']);}else if($p_remove_path!=""){if(PclZipUtilPathInclusion($p_remove_path,$p_entry['filename'])==2){$p_entry['status']="filtered";return $v_result;}$p_remove_path_size=strlen($p_remove_path);if(substr($p_entry['filename'],0,$p_remove_path_size)==$p_remove_path){$p_entry['filename']=substr($p_entry['filename'],$p_remove_path_size);}}if($p_path!=''){$p_entry['filename']=$p_path."/".$p_entry['filename'];}if(isset($p_options[PCLZIP_OPT_EXTRACT_DIR_RESTRICTION])){$v_inclusion=PclZipUtilPathInclusion($p_options[PCLZIP_OPT_EXTRACT_DIR_RESTRICTION],$p_entry['filename']);if($v_inclusion==0){PclZip::privErrorLog(PCLZIP_ERR_DIRECTORY_RESTRICTION,"Filename '".$p_entry['filename']."' is "."outside PCLZIP_OPT_EXTRACT_DIR_RESTRICTION");return PclZip::errorCode();}}if(isset($p_options[PCLZIP_CB_PRE_EXTRACT])){$v_local_header=array();$this->privConvertHeader2FileInfo($p_entry,$v_local_header);$v_result=$p_options[PCLZIP_CB_PRE_EXTRACT](PCLZIP_CB_PRE_EXTRACT,$v_local_header);if($v_result==0){$p_entry['status']="skipped";$v_result=1;}if($v_result==2){$p_entry['status']="aborted";$v_result=PCLZIP_ERR_USER_ABORTED;}$p_entry['filename']=$v_local_header['filename'];}if($p_entry['status']=='ok'){if(file_exists($p_entry['filename'])){if(is_dir($p_entry['filename'])){$p_entry['status']="already_a_directory";if((isset($p_options[PCLZIP_OPT_STOP_ON_ERROR]))&&($p_options[PCLZIP_OPT_STOP_ON_ERROR]===true)){PclZip::privErrorLog(PCLZIP_ERR_ALREADY_A_DIRECTORY,"Filename '".$p_entry['filename']."' is "."already used by an existing directory");return PclZip::errorCode();}}else if(!is_writeable($p_entry['filename'])){$p_entry['status']="write_protected";if((isset($p_options[PCLZIP_OPT_STOP_ON_ERROR]))&&($p_options[PCLZIP_OPT_STOP_ON_ERROR]===true)){PclZip::privErrorLog(PCLZIP_ERR_WRITE_OPEN_FAIL,"Filename '".$p_entry['filename']."' exists "."and is write protected");return PclZip::errorCode();}}else if(filemtime($p_entry['filename'])>$p_entry['mtime']){if((isset($p_options[PCLZIP_OPT_REPLACE_NEWER]))&&($p_options[PCLZIP_OPT_REPLACE_NEWER]===true)){}else{$p_entry['status']="newer_exist";if((isset($p_options[PCLZIP_OPT_STOP_ON_ERROR]))&&($p_options[PCLZIP_OPT_STOP_ON_ERROR]===true)){PclZip::privErrorLog(PCLZIP_ERR_WRITE_OPEN_FAIL,"Newer version of '".$p_entry['filename']."' exists "."and option PCLZIP_OPT_REPLACE_NEWER is not selected");return PclZip::errorCode();}}}else{}}else{if((($p_entry['external']&0x00000010)==0x00000010)||(substr($p_entry['filename'],-1)=='/'))$v_dir_to_check=$p_entry['filename'];else if(!strstr($p_entry['filename'],"/"))$v_dir_to_check="";else $v_dir_to_check=dirname($p_entry['filename']);if(($v_result=$this->privDirCheck($v_dir_to_check,(($p_entry['external']&0x00000010)==0x00000010)))!=1){$p_entry['status']="path_creation_fail";$v_result=1;}}}if($p_entry['status']=='ok'){if(!(($p_entry['external']&0x00000010)==0x00000010)){if($p_entry['compression']==0){if(($v_dest_file=@fopen($p_entry['filename'],'wb'))==0){$p_entry['status']="write_error";return $v_result;}$v_size=$p_entry['compressed_size'];while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@fread($this->zip_fd,$v_read_size);@fwrite($v_dest_file,$v_buffer,$v_read_size);$v_size-=$v_read_size;}fclose($v_dest_file);touch($p_entry['filename'],$p_entry['mtime']);}else{if(($p_entry['flag']&1)==1){PclZip::privErrorLog(PCLZIP_ERR_UNSUPPORTED_ENCRYPTION,'File \''.$p_entry['filename'].'\' is encrypted. Encrypted files are not supported.');return PclZip::errorCode();}if((!isset($p_options[PCLZIP_OPT_TEMP_FILE_OFF]))&&(isset($p_options[PCLZIP_OPT_TEMP_FILE_ON])||(isset($p_options[PCLZIP_OPT_TEMP_FILE_THRESHOLD])&&($p_options[PCLZIP_OPT_TEMP_FILE_THRESHOLD]<=$p_entry['size'])))){$v_result=$this->privExtractFileUsingTempFile($p_entry,$p_options);if($v_result<PCLZIP_ERR_NO_ERROR){return $v_result;}}else{$v_buffer=@fread($this->zip_fd,$p_entry['compressed_size']);$v_file_content=@gzinflate($v_buffer);unset($v_buffer);if($v_file_content===FALSE){$p_entry['status']="error";return $v_result;}if(($v_dest_file=@fopen($p_entry['filename'],'wb'))==0){$p_entry['status']="write_error";return $v_result;}@fwrite($v_dest_file,$v_file_content,$p_entry['size']);unset($v_file_content);@fclose($v_dest_file);}@touch($p_entry['filename'],$p_entry['mtime']);}if(isset($p_options[PCLZIP_OPT_SET_CHMOD])){@chmod($p_entry['filename'],$p_options[PCLZIP_OPT_SET_CHMOD]);}}}if($p_entry['status']=="aborted"){$p_entry['status']="skipped";}elseif(isset($p_options[PCLZIP_CB_POST_EXTRACT])){$v_local_header=array();$this->privConvertHeader2FileInfo($p_entry,$v_local_header);$v_result=$p_options[PCLZIP_CB_POST_EXTRACT](PCLZIP_CB_POST_EXTRACT,$v_local_header);if($v_result==2){$v_result=PCLZIP_ERR_USER_ABORTED;}}return $v_result;}function privExtractFileUsingTempFile(&$p_entry,&$p_options){$v_result=1;$v_gzip_temp_name=PCLZIP_TEMPORARY_DIR.uniqid('pclzip-').'.gz';if(($v_dest_file=@fopen($v_gzip_temp_name,"wb"))==0){fclose($v_file);PclZip::privErrorLog(PCLZIP_ERR_WRITE_OPEN_FAIL,'Unable to open temporary file \''.$v_gzip_temp_name.'\' in binary write mode');return PclZip::errorCode();}$v_binary_data=pack('va1a1Va1a1',0x8b1f,Chr($p_entry['compression']),Chr(0x00),time(),Chr(0x00),Chr(3));@fwrite($v_dest_file,$v_binary_data,10);$v_size=$p_entry['compressed_size'];while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@fread($this->zip_fd,$v_read_size);@fwrite($v_dest_file,$v_buffer,$v_read_size);$v_size-=$v_read_size;}$v_binary_data=pack('VV',$p_entry['crc'],$p_entry['size']);@fwrite($v_dest_file,$v_binary_data,8);@fclose($v_dest_file);if(($v_dest_file=@fopen($p_entry['filename'],'wb'))==0){$p_entry['status']="write_error";return $v_result;}if(($v_src_file=@gzopen($v_gzip_temp_name,'rb'))==0){@fclose($v_dest_file);$p_entry['status']="read_error";PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,'Unable to open temporary file \''.$v_gzip_temp_name.'\' in binary read mode');return PclZip::errorCode();}$v_size=$p_entry['size'];while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@gzread($v_src_file,$v_read_size);@fwrite($v_dest_file,$v_buffer,$v_read_size);$v_size-=$v_read_size;}@fclose($v_dest_file);@gzclose($v_src_file);@unlink($v_gzip_temp_name);return $v_result;}function privExtractFileInOutput(&$p_entry,&$p_options){$v_result=1;if(($v_result=$this->privReadFileHeader($v_header))!=1){return $v_result;}if($this->privCheckFileHeaders($v_header,$p_entry)!=1){}if(isset($p_options[PCLZIP_CB_PRE_EXTRACT])){$v_local_header=array();$this->privConvertHeader2FileInfo($p_entry,$v_local_header);$v_result=$p_options[PCLZIP_CB_PRE_EXTRACT](PCLZIP_CB_PRE_EXTRACT,$v_local_header);if($v_result==0){$p_entry['status']="skipped";$v_result=1;}if($v_result==2){$p_entry['status']="aborted";$v_result=PCLZIP_ERR_USER_ABORTED;}$p_entry['filename']=$v_local_header['filename'];}if($p_entry['status']=='ok'){if(!(($p_entry['external']&0x00000010)==0x00000010)){if($p_entry['compressed_size']==$p_entry['size']){$v_buffer=@fread($this->zip_fd,$p_entry['compressed_size']);echo $v_buffer;unset($v_buffer);}else{$v_buffer=@fread($this->zip_fd,$p_entry['compressed_size']);$v_file_content=gzinflate($v_buffer);unset($v_buffer);echo $v_file_content;unset($v_file_content);}}}if($p_entry['status']=="aborted"){$p_entry['status']="skipped";}elseif(isset($p_options[PCLZIP_CB_POST_EXTRACT])){$v_local_header=array();$this->privConvertHeader2FileInfo($p_entry,$v_local_header);$v_result=$p_options[PCLZIP_CB_POST_EXTRACT](PCLZIP_CB_POST_EXTRACT,$v_local_header);if($v_result==2){$v_result=PCLZIP_ERR_USER_ABORTED;}}return $v_result;}function privExtractFileAsString(&$p_entry,&$p_string,&$p_options){$v_result=1;$v_header=array();if(($v_result=$this->privReadFileHeader($v_header))!=1){return $v_result;}if($this->privCheckFileHeaders($v_header,$p_entry)!=1){}if(isset($p_options[PCLZIP_CB_PRE_EXTRACT])){$v_local_header=array();$this->privConvertHeader2FileInfo($p_entry,$v_local_header);$v_result=$p_options[PCLZIP_CB_PRE_EXTRACT](PCLZIP_CB_PRE_EXTRACT,$v_local_header);if($v_result==0){$p_entry['status']="skipped";$v_result=1;}if($v_result==2){$p_entry['status']="aborted";$v_result=PCLZIP_ERR_USER_ABORTED;}$p_entry['filename']=$v_local_header['filename'];}if($p_entry['status']=='ok'){if(!(($p_entry['external']&0x00000010)==0x00000010)){if($p_entry['compression']==0){$p_string=@fread($this->zip_fd,$p_entry['compressed_size']);}else{$v_data=@fread($this->zip_fd,$p_entry['compressed_size']);if(($p_string=@gzinflate($v_data))===FALSE){}}}else{}}if($p_entry['status']=="aborted"){$p_entry['status']="skipped";}elseif(isset($p_options[PCLZIP_CB_POST_EXTRACT])){$v_local_header=array();$this->privConvertHeader2FileInfo($p_entry,$v_local_header);$v_local_header['content']=$p_string;$p_string='';$v_result=$p_options[PCLZIP_CB_POST_EXTRACT](PCLZIP_CB_POST_EXTRACT,$v_local_header);$p_string=$v_local_header['content'];unset($v_local_header['content']);if($v_result==2){$v_result=PCLZIP_ERR_USER_ABORTED;}}return $v_result;}function privReadFileHeader(&$p_header){$v_result=1;$v_binary_data=@fread($this->zip_fd,4);$v_data=unpack('Vid',$v_binary_data);if($v_data['id']!=0x04034b50){PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,'Invalid archive structure');return PclZip::errorCode();}$v_binary_data=fread($this->zip_fd,26);if(strlen($v_binary_data)!=26){$p_header['filename']="";$p_header['status']="invalid_header";PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,"Invalid block size : ".strlen($v_binary_data));return PclZip::errorCode();}$v_data=unpack('vversion/vflag/vcompression/vmtime/vmdate/Vcrc/Vcompressed_size/Vsize/vfilename_len/vextra_len',$v_binary_data);$p_header['filename']=fread($this->zip_fd,$v_data['filename_len']);if($v_data['extra_len']!=0){$p_header['extra']=fread($this->zip_fd,$v_data['extra_len']);}else{$p_header['extra']='';}$p_header['version_extracted']=$v_data['version'];$p_header['compression']=$v_data['compression'];$p_header['size']=$v_data['size'];$p_header['compressed_size']=$v_data['compressed_size'];$p_header['crc']=$v_data['crc'];$p_header['flag']=$v_data['flag'];$p_header['filename_len']=$v_data['filename_len'];$p_header['mdate']=$v_data['mdate'];$p_header['mtime']=$v_data['mtime'];if($p_header['mdate']&&$p_header['mtime']){$v_hour=($p_header['mtime']&0xF800)>>11;$v_minute=($p_header['mtime']&0x07E0)>>5;$v_seconde=($p_header['mtime']&0x001F)*2;$v_year=(($p_header['mdate']&0xFE00)>>9)+1980;$v_month=($p_header['mdate']&0x01E0)>>5;$v_day=$p_header['mdate']&0x001F;$p_header['mtime']=@mktime($v_hour,$v_minute,$v_seconde,$v_month,$v_day,$v_year);}else{$p_header['mtime']=time();}$p_header['stored_filename']=$p_header['filename'];$p_header['status']="ok";return $v_result;}function privReadCentralFileHeader(&$p_header){$v_result=1;$v_binary_data=@fread($this->zip_fd,4);$v_data=unpack('Vid',$v_binary_data);if($v_data['id']!=0x02014b50){PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,'Invalid archive structure');return PclZip::errorCode();}$v_binary_data=fread($this->zip_fd,42);if(strlen($v_binary_data)!=42){$p_header['filename']="";$p_header['status']="invalid_header";PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,"Invalid block size : ".strlen($v_binary_data));return PclZip::errorCode();}$p_header=unpack('vversion/vversion_extracted/vflag/vcompression/vmtime/vmdate/Vcrc/Vcompressed_size/Vsize/vfilename_len/vextra_len/vcomment_len/vdisk/vinternal/Vexternal/Voffset',$v_binary_data);if($p_header['filename_len']!=0)$p_header['filename']=fread($this->zip_fd,$p_header['filename_len']);else $p_header['filename']='';if($p_header['extra_len']!=0)$p_header['extra']=fread($this->zip_fd,$p_header['extra_len']);else $p_header['extra']='';if($p_header['comment_len']!=0)$p_header['comment']=fread($this->zip_fd,$p_header['comment_len']);else $p_header['comment']='';if(1){$v_hour=($p_header['mtime']&0xF800)>>11;$v_minute=($p_header['mtime']&0x07E0)>>5;$v_seconde=($p_header['mtime']&0x001F)*2;$v_year=(($p_header['mdate']&0xFE00)>>9)+1980;$v_month=($p_header['mdate']&0x01E0)>>5;$v_day=$p_header['mdate']&0x001F;$p_header['mtime']=@mktime($v_hour,$v_minute,$v_seconde,$v_month,$v_day,$v_year);}else{$p_header['mtime']=time();}$p_header['stored_filename']=$p_header['filename'];$p_header['status']='ok';if(substr($p_header['filename'],-1)=='/'){$p_header['external']=0x00000010;}return $v_result;}function privCheckFileHeaders(&$p_local_header,&$p_central_header){$v_result=1;if($p_local_header['filename']!=$p_central_header['filename']){}if($p_local_header['version_extracted']!=$p_central_header['version_extracted']){}if($p_local_header['flag']!=$p_central_header['flag']){}if($p_local_header['compression']!=$p_central_header['compression']){}if($p_local_header['mtime']!=$p_central_header['mtime']){}if($p_local_header['filename_len']!=$p_central_header['filename_len']){}if(($p_local_header['flag']&8)==8){$p_local_header['size']=$p_central_header['size'];$p_local_header['compressed_size']=$p_central_header['compressed_size'];$p_local_header['crc']=$p_central_header['crc'];}return $v_result;}function privReadEndCentralDir(&$p_central_dir){$v_result=1;$v_size=filesize($this->zipname);@fseek($this->zip_fd,$v_size);if(@ftell($this->zip_fd)!=$v_size){PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,'Unable to go to the end of the archive \''.$this->zipname.'\'');return PclZip::errorCode();}$v_found=0;if($v_size>26){@fseek($this->zip_fd,$v_size-22);if(($v_pos=@ftell($this->zip_fd))!=($v_size-22)){PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,'Unable to seek back to the middle of the archive \''.$this->zipname.'\'');return PclZip::errorCode();}$v_binary_data=@fread($this->zip_fd,4);$v_data=@unpack('Vid',$v_binary_data);if($v_data['id']==0x06054b50){$v_found=1;}$v_pos=ftell($this->zip_fd);}if(!$v_found){$v_maximum_size=65557;if($v_maximum_size>$v_size)$v_maximum_size=$v_size;@fseek($this->zip_fd,$v_size-$v_maximum_size);if(@ftell($this->zip_fd)!=($v_size-$v_maximum_size)){PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,'Unable to seek back to the middle of the archive \''.$this->zipname.'\'');return PclZip::errorCode();}$v_pos=ftell($this->zip_fd);$v_bytes=0x00000000;while($v_pos<$v_size){$v_byte=@fread($this->zip_fd,1);$v_bytes=(($v_bytes&0xFFFFFF)<<8)|Ord($v_byte);if($v_bytes==0x504b0506){$v_pos++;break;}$v_pos++;}if($v_pos==$v_size){PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,"Unable to find End of Central Dir Record signature");return PclZip::errorCode();}}$v_binary_data=fread($this->zip_fd,18);if(strlen($v_binary_data)!=18){PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,"Invalid End of Central Dir Record size : ".strlen($v_binary_data));return PclZip::errorCode();}$v_data=unpack('vdisk/vdisk_start/vdisk_entries/ventries/Vsize/Voffset/vcomment_size',$v_binary_data);if(($v_pos+$v_data['comment_size']+18)!=$v_size){if(0){PclZip::privErrorLog(PCLZIP_ERR_BAD_FORMAT,'The central dir is not at the end of the archive.'.' Some trailing bytes exists after the archive.');return PclZip::errorCode();}}if($v_data['comment_size']!=0){$p_central_dir['comment']=fread($this->zip_fd,$v_data['comment_size']);}else $p_central_dir['comment']='';$p_central_dir['entries']=$v_data['entries'];$p_central_dir['disk_entries']=$v_data['disk_entries'];$p_central_dir['offset']=$v_data['offset'];$p_central_dir['size']=$v_data['size'];$p_central_dir['disk']=$v_data['disk'];$p_central_dir['disk_start']=$v_data['disk_start'];return $v_result;}function privDeleteByRule(&$p_result_list,&$p_options){$v_result=1;$v_list_detail=array();if(($v_result=$this->privOpenFd('rb'))!=1){return $v_result;}$v_central_dir=array();if(($v_result=$this->privReadEndCentralDir($v_central_dir))!=1){$this->privCloseFd();return $v_result;}@rewind($this->zip_fd);$v_pos_entry=$v_central_dir['offset'];@rewind($this->zip_fd);if(@fseek($this->zip_fd,$v_pos_entry)){$this->privCloseFd();PclZip::privErrorLog(PCLZIP_ERR_INVALID_ARCHIVE_ZIP,'Invalid archive size');return PclZip::errorCode();}$v_header_list=array();$j_start=0;for($i=0,$v_nb_extracted=0;$i<$v_central_dir['entries'];$i++){$v_header_list[$v_nb_extracted]=array();if(($v_result=$this->privReadCentralFileHeader($v_header_list[$v_nb_extracted]))!=1){$this->privCloseFd();return $v_result;}$v_header_list[$v_nb_extracted]['index']=$i;$v_found=false;if((isset($p_options[PCLZIP_OPT_BY_NAME]))&&($p_options[PCLZIP_OPT_BY_NAME]!=0)){for($j=0;($j<sizeof($p_options[PCLZIP_OPT_BY_NAME]))&&(!$v_found);$j++){if(substr($p_options[PCLZIP_OPT_BY_NAME][$j],-1)=="/"){if((strlen($v_header_list[$v_nb_extracted]['stored_filename'])>strlen($p_options[PCLZIP_OPT_BY_NAME][$j]))&&(substr($v_header_list[$v_nb_extracted]['stored_filename'],0,strlen($p_options[PCLZIP_OPT_BY_NAME][$j]))==$p_options[PCLZIP_OPT_BY_NAME][$j])){$v_found=true;}elseif((($v_header_list[$v_nb_extracted]['external']&0x00000010)==0x00000010)&&($v_header_list[$v_nb_extracted]['stored_filename'].'/'==$p_options[PCLZIP_OPT_BY_NAME][$j])){$v_found=true;}}elseif($v_header_list[$v_nb_extracted]['stored_filename']==$p_options[PCLZIP_OPT_BY_NAME][$j]){$v_found=true;}}}else if((isset($p_options[PCLZIP_OPT_BY_PREG]))&&($p_options[PCLZIP_OPT_BY_PREG]!="")){if(preg_match($p_options[PCLZIP_OPT_BY_PREG],$v_header_list[$v_nb_extracted]['stored_filename'])){$v_found=true;}}else if((isset($p_options[PCLZIP_OPT_BY_INDEX]))&&($p_options[PCLZIP_OPT_BY_INDEX]!=0)){for($j=$j_start;($j<sizeof($p_options[PCLZIP_OPT_BY_INDEX]))&&(!$v_found);$j++){if(($i>=$p_options[PCLZIP_OPT_BY_INDEX][$j]['start'])&&($i<=$p_options[PCLZIP_OPT_BY_INDEX][$j]['end'])){$v_found=true;}if($i>=$p_options[PCLZIP_OPT_BY_INDEX][$j]['end']){$j_start=$j+1;}if($p_options[PCLZIP_OPT_BY_INDEX][$j]['start']>$i){break;}}}else{$v_found=true;}if($v_found){unset($v_header_list[$v_nb_extracted]);}else{$v_nb_extracted++;}}if($v_nb_extracted>0){$v_zip_temp_name=PCLZIP_TEMPORARY_DIR.uniqid('pclzip-').'.tmp';$v_temp_zip=new PclZip($v_zip_temp_name);if(($v_result=$v_temp_zip->privOpenFd('wb'))!=1){$this->privCloseFd();return $v_result;}for($i=0;$i<sizeof($v_header_list);$i++){@rewind($this->zip_fd);if(@fseek($this->zip_fd,$v_header_list[$i]['offset'])){$this->privCloseFd();$v_temp_zip->privCloseFd();@unlink($v_zip_temp_name);PclZip::privErrorLog(PCLZIP_ERR_INVALID_ARCHIVE_ZIP,'Invalid archive size');return PclZip::errorCode();}$v_local_header=array();if(($v_result=$this->privReadFileHeader($v_local_header))!=1){$this->privCloseFd();$v_temp_zip->privCloseFd();@unlink($v_zip_temp_name);return $v_result;}if($this->privCheckFileHeaders($v_local_header,$v_header_list[$i])!=1){}unset($v_local_header);if(($v_result=$v_temp_zip->privWriteFileHeader($v_header_list[$i]))!=1){$this->privCloseFd();$v_temp_zip->privCloseFd();@unlink($v_zip_temp_name);return $v_result;}if(($v_result=PclZipUtilCopyBlock($this->zip_fd,$v_temp_zip->zip_fd,$v_header_list[$i]['compressed_size']))!=1){$this->privCloseFd();$v_temp_zip->privCloseFd();@unlink($v_zip_temp_name);return $v_result;}}$v_offset=@ftell($v_temp_zip->zip_fd);for($i=0;$i<sizeof($v_header_list);$i++){if(($v_result=$v_temp_zip->privWriteCentralFileHeader($v_header_list[$i]))!=1){$v_temp_zip->privCloseFd();$this->privCloseFd();@unlink($v_zip_temp_name);return $v_result;}$v_temp_zip->privConvertHeader2FileInfo($v_header_list[$i],$p_result_list[$i]);}$v_comment='';if(isset($p_options[PCLZIP_OPT_COMMENT])){$v_comment=$p_options[PCLZIP_OPT_COMMENT];}$v_size=@ftell($v_temp_zip->zip_fd)-$v_offset;if(($v_result=$v_temp_zip->privWriteCentralHeader(sizeof($v_header_list),$v_size,$v_offset,$v_comment))!=1){unset($v_header_list);$v_temp_zip->privCloseFd();$this->privCloseFd();@unlink($v_zip_temp_name);return $v_result;}$v_temp_zip->privCloseFd();$this->privCloseFd();@unlink($this->zipname);PclZipUtilRename($v_zip_temp_name,$this->zipname);unset($v_temp_zip);}else if($v_central_dir['entries']!=0){$this->privCloseFd();if(($v_result=$this->privOpenFd('wb'))!=1){return $v_result;}if(($v_result=$this->privWriteCentralHeader(0,0,0,''))!=1){return $v_result;}$this->privCloseFd();}return $v_result;}function privDirCheck($p_dir,$p_is_dir=false){$v_result=1;if(($p_is_dir)&&(substr($p_dir,-1)=='/')){$p_dir=substr($p_dir,0,strlen($p_dir)-1);}if((is_dir($p_dir))||($p_dir=="")){return 1;}$p_parent_dir=dirname($p_dir);if($p_parent_dir!=$p_dir){if($p_parent_dir!=""){if(($v_result=$this->privDirCheck($p_parent_dir))!=1){return $v_result;}}}if(!@mkdir($p_dir,0777)){PclZip::privErrorLog(PCLZIP_ERR_DIR_CREATE_FAIL,"Unable to create directory '$p_dir'");return PclZip::errorCode();}return $v_result;}function privMerge(&$p_archive_to_add){$v_result=1;if(!is_file($p_archive_to_add->zipname)){$v_result=1;return $v_result;}if(!is_file($this->zipname)){$v_result=$this->privDuplicate($p_archive_to_add->zipname);return $v_result;}if(($v_result=$this->privOpenFd('rb'))!=1){return $v_result;}$v_central_dir=array();if(($v_result=$this->privReadEndCentralDir($v_central_dir))!=1){$this->privCloseFd();return $v_result;}@rewind($this->zip_fd);if(($v_result=$p_archive_to_add->privOpenFd('rb'))!=1){$this->privCloseFd();return $v_result;}$v_central_dir_to_add=array();if(($v_result=$p_archive_to_add->privReadEndCentralDir($v_central_dir_to_add))!=1){$this->privCloseFd();$p_archive_to_add->privCloseFd();return $v_result;}@rewind($p_archive_to_add->zip_fd);$v_zip_temp_name=PCLZIP_TEMPORARY_DIR.uniqid('pclzip-').'.tmp';if(($v_zip_temp_fd=@fopen($v_zip_temp_name,'wb'))==0){$this->privCloseFd();$p_archive_to_add->privCloseFd();PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,'Unable to open temporary file \''.$v_zip_temp_name.'\' in binary write mode');return PclZip::errorCode();}$v_size=$v_central_dir['offset'];while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=fread($this->zip_fd,$v_read_size);@fwrite($v_zip_temp_fd,$v_buffer,$v_read_size);$v_size-=$v_read_size;}$v_size=$v_central_dir_to_add['offset'];while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=fread($p_archive_to_add->zip_fd,$v_read_size);@fwrite($v_zip_temp_fd,$v_buffer,$v_read_size);$v_size-=$v_read_size;}$v_offset=@ftell($v_zip_temp_fd);$v_size=$v_central_dir['size'];while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@fread($this->zip_fd,$v_read_size);@fwrite($v_zip_temp_fd,$v_buffer,$v_read_size);$v_size-=$v_read_size;}$v_size=$v_central_dir_to_add['size'];while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@fread($p_archive_to_add->zip_fd,$v_read_size);@fwrite($v_zip_temp_fd,$v_buffer,$v_read_size);$v_size-=$v_read_size;}$v_comment=$v_central_dir['comment'].' '.$v_central_dir_to_add['comment'];$v_size=@ftell($v_zip_temp_fd)-$v_offset;$v_swap=$this->zip_fd;$this->zip_fd=$v_zip_temp_fd;$v_zip_temp_fd=$v_swap;if(($v_result=$this->privWriteCentralHeader($v_central_dir['entries']+$v_central_dir_to_add['entries'],$v_size,$v_offset,$v_comment))!=1){$this->privCloseFd();$p_archive_to_add->privCloseFd();@fclose($v_zip_temp_fd);$this->zip_fd=null;unset($v_header_list);return $v_result;}$v_swap=$this->zip_fd;$this->zip_fd=$v_zip_temp_fd;$v_zip_temp_fd=$v_swap;$this->privCloseFd();$p_archive_to_add->privCloseFd();@fclose($v_zip_temp_fd);@unlink($this->zipname);PclZipUtilRename($v_zip_temp_name,$this->zipname);return $v_result;}function privDuplicate($p_archive_filename){$v_result=1;if(!is_file($p_archive_filename)){$v_result=1;return $v_result;}if(($v_result=$this->privOpenFd('wb'))!=1){return $v_result;}if(($v_zip_temp_fd=@fopen($p_archive_filename,'rb'))==0){$this->privCloseFd();PclZip::privErrorLog(PCLZIP_ERR_READ_OPEN_FAIL,'Unable to open archive file \''.$p_archive_filename.'\' in binary write mode');return PclZip::errorCode();}$v_size=filesize($p_archive_filename);while($v_size!=0){$v_read_size=($v_size<PCLZIP_READ_BLOCK_SIZE?$v_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=fread($v_zip_temp_fd,$v_read_size);@fwrite($this->zip_fd,$v_buffer,$v_read_size);$v_size-=$v_read_size;}$this->privCloseFd();@fclose($v_zip_temp_fd);return $v_result;}function privErrorLog($p_error_code=0,$p_error_string=''){if(PCLZIP_ERROR_EXTERNAL==1){PclError($p_error_code,$p_error_string);}else{$this->error_code=$p_error_code;$this->error_string=$p_error_string;}}function privErrorReset(){if(PCLZIP_ERROR_EXTERNAL==1){PclErrorReset();}else{$this->error_code=0;$this->error_string='';}}function privDisableMagicQuotes(){$v_result=1;if((!function_exists("get_magic_quotes_runtime"))||(!function_exists("set_magic_quotes_runtime"))){return $v_result;}if($this->magic_quotes_status!=-1){return $v_result;}$this->magic_quotes_status=@get_magic_quotes_runtime();if($this->magic_quotes_status==1){@set_magic_quotes_runtime(0);}return $v_result;}function privSwapBackMagicQuotes(){$v_result=1;if((!function_exists("get_magic_quotes_runtime"))||(!function_exists("set_magic_quotes_runtime"))){return $v_result;}if($this->magic_quotes_status!=-1){return $v_result;}if($this->magic_quotes_status==1){@set_magic_quotes_runtime($this->magic_quotes_status);}return $v_result;}}function PclZipUtilPathReduction($p_dir){$v_result="";if($p_dir!=""){$v_list=explode("/",$p_dir);$v_skip=0;for($i=sizeof($v_list)-1;$i>=0;$i--){if($v_list[$i]=="."){}else if($v_list[$i]==".."){$v_skip++;}else if($v_list[$i]==""){if($i==0){$v_result="/".$v_result;if($v_skip>0){$v_result=$p_dir;$v_skip=0;}}else if($i==(sizeof($v_list)-1)){$v_result=$v_list[$i];}else{}}else{if($v_skip>0){$v_skip--;}else{$v_result=$v_list[$i].($i!=(sizeof($v_list)-1)?"/".$v_result:"");}}}if($v_skip>0){while($v_skip>0){$v_result='../'.$v_result;$v_skip--;}}}return $v_result;}function PclZipUtilPathInclusion($p_dir,$p_path){$v_result=1;if(($p_dir=='.')||((strlen($p_dir)>=2)&&(substr($p_dir,0,2)=='./'))){$p_dir=PclZipUtilTranslateWinPath(getcwd(),FALSE).'/'.substr($p_dir,1);}if(($p_path=='.')||((strlen($p_path)>=2)&&(substr($p_path,0,2)=='./'))){$p_path=PclZipUtilTranslateWinPath(getcwd(),FALSE).'/'.substr($p_path,1);}$v_list_dir=explode("/",$p_dir);$v_list_dir_size=sizeof($v_list_dir);$v_list_path=explode("/",$p_path);$v_list_path_size=sizeof($v_list_path);$i=0;$j=0;while(($i<$v_list_dir_size)&&($j<$v_list_path_size)&&($v_result)){if($v_list_dir[$i]==''){$i++;continue;}if($v_list_path[$j]==''){$j++;continue;}if(($v_list_dir[$i]!=$v_list_path[$j])&&($v_list_dir[$i]!='')&&($v_list_path[$j]!='')){$v_result=0;}$i++;$j++;}if($v_result){while(($j<$v_list_path_size)&&($v_list_path[$j]==''))$j++;while(($i<$v_list_dir_size)&&($v_list_dir[$i]==''))$i++;if(($i>=$v_list_dir_size)&&($j>=$v_list_path_size)){$v_result=2;}else if($i<$v_list_dir_size){$v_result=0;}}return $v_result;}function PclZipUtilCopyBlock($p_src,$p_dest,$p_size,$p_mode=0){$v_result=1;if($p_mode==0){while($p_size!=0){$v_read_size=($p_size<PCLZIP_READ_BLOCK_SIZE?$p_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@fread($p_src,$v_read_size);@fwrite($p_dest,$v_buffer,$v_read_size);$p_size-=$v_read_size;}}else if($p_mode==1){while($p_size!=0){$v_read_size=($p_size<PCLZIP_READ_BLOCK_SIZE?$p_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@gzread($p_src,$v_read_size);@fwrite($p_dest,$v_buffer,$v_read_size);$p_size-=$v_read_size;}}else if($p_mode==2){while($p_size!=0){$v_read_size=($p_size<PCLZIP_READ_BLOCK_SIZE?$p_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@fread($p_src,$v_read_size);@gzwrite($p_dest,$v_buffer,$v_read_size);$p_size-=$v_read_size;}}else if($p_mode==3){while($p_size!=0){$v_read_size=($p_size<PCLZIP_READ_BLOCK_SIZE?$p_size:PCLZIP_READ_BLOCK_SIZE);$v_buffer=@gzread($p_src,$v_read_size);@gzwrite($p_dest,$v_buffer,$v_read_size);$p_size-=$v_read_size;}}return $v_result;}function PclZipUtilRename($p_src,$p_dest){$v_result=1;if(!@rename($p_src,$p_dest)){if(!@copy($p_src,$p_dest)){$v_result=0;}else if(!@unlink($p_src)){$v_result=0;}}return $v_result;}function PclZipUtilOptionText($p_option){$v_list=get_defined_constants();for(reset($v_list);$v_key=key($v_list);next($v_list)){$v_prefix=substr($v_key,0,10);if((($v_prefix=='PCLZIP_OPT')||($v_prefix=='PCLZIP_CB_')||($v_prefix=='PCLZIP_ATT'))&&($v_list[$v_key]==$p_option)){return $v_key;}}$v_result='Unknown';return $v_result;}function PclZipUtilTranslateWinPath($p_path,$p_remove_disk_letter=true){if(stristr(php_uname(),'windows')){if(($p_remove_disk_letter)&&(($v_position=strpos($p_path,':'))!=false)){$p_path=substr($p_path,$v_position+1);}if((strpos($p_path,'\\')>0)||(substr($p_path,0,1)=='\\')){$p_path=strtr($p_path,'\\','/');}}return $p_path;}
function unlinkRecursive($dir,$deleteRootToo){if(!$dh=@opendir($dir)){return;}while(false!==($obj=readdir($dh))){if($obj=="."||$obj==".."){continue;}if(!@unlink($dir."/".$obj)){unlinkRecursive($dir."/".$obj,true);}}closedir($dh);if($deleteRootToo){@rmdir($dir);}return;}
function doGET_CURL($url){$ch=curl_init($url);curl_setopt($ch,CURLOPT_USERAGENT,$agent);curl_setopt($ch,CURLOPT_HTTPHEADER,["Accept-Language: " . $lang]);curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);curl_setopt($ch,CURLOPT_FOLLOWLOCATION,1);curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,0);curl_setopt($ch,CURLOPT_SSL_VERIFYHOST,0);$data = curl_exec($ch);curl_close($ch);return $data;}
function doGET_PHP($a){$options=array("http"=>array("method"=>"GET","header"=>"Accept-language: es\r\n"."Content-type: application/x-www-form-urlencoded\r\n"."Cookie: foo=bar\r\n"."User-Agent: " . $agent . "\r\n"));$context=stream_context_create($options);$responseData=file_get_contents($a,false,$context);return $responseData;}
function doGET_MercadoLibre($url){$options = array(CURLOPT_RETURNTRANSFER => true, CURLOPT_HEADER => false, CURLOPT_FOLLOWLOCATION => true, CURLOPT_MAXREDIRS => 10, CURLOPT_ENCODING => "", CURLOPT_USERAGENT => "test", CURLOPT_AUTOREFERER => true, CURLOPT_CONNECTTIMEOUT => 120, CURLOPT_TIMEOUT => 120);$ch = curl_init($url);curl_setopt_array($ch, $options);$content  = curl_exec($ch);curl_close($ch);return $content;}
function doPOST_CURL($url,$postvalues){$ch=curl_init($url);curl_setopt($ch,CURLOPT_USERAGENT,$agent);curl_setopt($ch,CURLOPT_HTTPHEADER,["Accept-Language: " . $lang]);curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);curl_setopt($ch,CURLOPT_FOLLOWLOCATION,1);curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,0);curl_setopt($ch,CURLOPT_SSL_VERIFYHOST,0);curl_setopt($ch,CURLOPT_POST,true);curl_setopt($ch,CURLOPT_POSTFIELDS,$postvalues);$data=curl_exec($ch);curl_close($ch);return $data;}
function doPOST_PHP($a,$b){$options=array("http"=>array("method"=>"POST","header"=>"Accept-language: es\r\n"."Content-type: application/x-www-form-urlencoded\r\n"."Cookie: foo=bar\r\n"."User-Agent: " . $agent . "\r\n","content"=>$b));$context=stream_context_create($options);$responseData=file_get_contents($a,false,$context);return $responseData;}
function informar($a){$fechaInformeDia=date("d");$fechaInformeMes=date("m");if($fechaInformeMes=="01"){$fechaInformeMes="Ene";}else if($fechaInformeMes=="02"){$fechaInformeMes="Feb";}else if($fechaInformeMes=="03"){$fechaInformeMes="Mar";}else if($fechaInformeMes=="04"){$fechaInformeMes="Abr";}else if($fechaInformeMes=="05"){$fechaInformeMes="May";}else if($fechaInformeMes=="06"){$fechaInformeMes="Jun";}else if($fechaInformeMes=="07"){$fechaInformeMes="Jul";}else if($fechaInformeMes=="08"){$fechaInformeMes="Ago";}else if($fechaInformeMes=="09"){$fechaInformeMes="Sep";}else if($fechaInformeMes=="10"){$fechaInformeMes="Oct";}else if($fechaInformeMes=="11"){$fechaInformeMes="Nov";}else if($fechaInformeMes=="12"){$fechaInformeMes="Dic";}$fechaInformeAno=date("Y");$fechaInforme=$fechaInformeDia."/".$fechaInformeMes."/".$fechaInformeAno;$valor=$fechaInforme." - ".$a;$myfile=fopen("Results.dat","r");$valorOriginal=fread($myfile,filesize("Results.dat"));fclose($myfile);if(strlen($valorOriginal)>0){$valorOriginal=$valorOriginal."\n";}$myfile=fopen("Results.dat","w");fwrite($myfile,$valorOriginal.$valor);fclose($myfile);}

// ----------------------------------------------------------------------------------------------------------------
// FUNCION DE BUSQUEDA DE MOVIMIENTOS DE MARCAS REGISTRADAS
// ----------------------------------------------------------------------------------------------------------------

function buscar_Marcas_Movimientos($a, $b, $c)
	{
	$response = doGET_CURL($a);
	$verificador = strpos($response, "<table width=\"845\"");
	$hayerror = strpos(strtolower($response), "error");

	// SI NO ENCUENTRA EL VALOR, HUBO UN ERROR EN EL SERVIDOR DEL INPI Y NO REALIZA LA VERIFICACION
	if ($verificador!==false)
		{
		// SI ENCUENTRA LA PALABRA ERROR, HUBO UN ERROR EN EL SERVIDOR DEL INPI Y NO REALIZA LA VERIFICACION
		if ($hayerror===false)
			{
			if(strlen($response)>$b OR strlen($response)<$b)
				{
				// ABRE EL ARCHIVO DE LA BASE DE DATOS PARA REEMPLAZAR LOS VALORES ENCONTRADOS POR LOS NUEVOS
				$myfile = fopen("BrandsRegistered.cfg", "r");
				$database_marcas = fread($myfile,filesize("BrandsRegistered.cfg"));
				$database_marcas = str_replace($a . "|" . $b . "|" . $c, $a . "|" . strlen($response) . "|" . $c, $database_marcas);
				fclose($myfile);

				// ACTUALIZA EL ARCHIVO LA BASE DE DATOS
				$myfile = fopen("BrandsRegistered.cfg", "w");
				fwrite($myfile, $database_marcas);
				fclose($myfile);
				chmod($myfile, 0644);

				informar("CAMBIO EN MARCA REGISTRADA " . $c . ". <a href='" . $a . "' target='top'>CONSULTAR</a>");
				}
			}
		}
	}

// ----------------------------------------------------------------------------------------------------------------
// FUNCION DE BUSQUEDA DE MARCAS NUEVAS
// ----------------------------------------------------------------------------------------------------------------

function buscar_Marcas_Nuevas($a, $b)
	{
	$postdata = http_build_query(array("TxtDenominacionTipoBusqueda","Contiene","TxtDenominacion" => $a,"CboTipo" => "Vacio","CboClase" => "Vacio"));
	$response = doPOST_CURL("https://portaltramites.inpi.gob.ar/Clasico/Docs/ResultadosConsultas/GrillaMarcas.asp","TxtDenominacionTipoBusqueda=Contiene&TxtDenominacion=" . $a . "&CboTipo=Vacio&CboClase=Vacio");
	$verificador = strpos($response, "<table width=\"800\"");
	$hayerror = strpos(strtolower($response), "error");
	$busqueda = strpos($response, "<span class=\"Item3 Estilo59\">" . $b . "</span></span></td>");
	$valorQuery = "<span class=\"Item3 Estilo59\">";
	$valorInicial = strpos($response, $valorQuery);

	// SI NO ENCUENTRA EL VALOR, HUBO UN ERROR EN EL SERVIDOR DEL INPI Y NO REALIZA LA VERIFICACION
	if ($verificador!==false)
		{
		// SI ENCUENTRA LA PALABRA ERROR, HUBO UN ERROR EN EL SERVIDOR DEL INPI Y NO REALIZA LA VERIFICACION
		if ($hayerror===false)
			{
			// SI NO ENCUENTRA EL TAG, HUBO UN ERROR EN EL SERVIDOR DEL INPI Y NO REALIZA LA VERIFICACION
			if ($valorInicial!==false)
				{
				// SI NO ENCUENTRA EL VALOR, REALIZA LA VERIFICACION
				if ($busqueda===false)
					{
					$valorRestante = substr($response, $valorInicial + strlen($valorQuery), strlen($response));
					$valorFinal = trim(substr($valorRestante, 0, strpos($valorRestante,"<")));

					if (is_numeric($valorFinal)==true)
						{
						// ABRE LA BASE DE DATOS PARA REEMPLAZAR LOS VALORES ENCONTRADOS POR LOS NUEVOS
						$myfile = fopen("BrandsSearch.cfg", "r");
						$database_marcas = fread($myfile,filesize("BrandsSearch.cfg"));
						$database_marcas = str_replace($a . "|" . $b, $a . "|" . $valorFinal, $database_marcas);
						fclose($myfile);

						// ACTUALIZA EL ARCHIVO LA BASE DE DATOS
						$myfile = fopen("BrandsSearch.cfg", "w");
						fwrite($myfile, $database_marcas);
						fclose($myfile);
						chmod($myfile, 0644);

						informar("NUEVA MARCA CON " . strtoupper($a) . ". <a href='https://portaltramites.inpi.gob.ar/Clasico/Docs/FormulariosConsultas/MarConsultaAvanzada.asp' target='top'>CONSULTAR</a>");
						}
					}
				}
			}
		}
	}

// ----------------------------------------------------------------------------------------------------------------
// FUNCION DE ACTUALIZACION AUTOMATICA DE TINYMCE
// ----------------------------------------------------------------------------------------------------------------

function actualizarTinyMCE($a)
	{
	// BORRA EL ZIP TEMPORAL (SI EXISTE)
	unlink("./tinyMCE.zip");

	// DESCARGA EL ZIP
	$archivoZIP = doGET_CURL($a);

	// VERIFICA SI EL ARCHIVO SE DESCARGO
	if (strlen($archivoZIP)>0)
		{
		// VERIFICA SI LO QUE SE BAJO ES UN ARCHIVO ZIP
		if (substr($archivoZIP, 0,2)=="PK")
			{
			// GUARDA EL ZIP TEMPORAL
			$myfile = fopen("tinyMCE.zip", "w");
			fwrite($myfile, $archivoZIP);
			fclose($myfile);

			// ABRE EL ARCHIVO TINYMCE.ZIP
			$archivoZIP = new PclZip("tinyMCE.zip");

			$archivo01 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/tinymce.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo02 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/jquery.tinymce.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo03 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/advlist/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo04 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/autolink/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo05 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/autosave/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo06 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/charmap/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo07 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/colorpicker/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo08 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/contextmenu/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo09 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/fullscreen/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo10 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/image/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo11 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/imagetools/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo12 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/link/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo13 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/lists/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo14 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/media/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo15 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/paste/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo16 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/print/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo17 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/save/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo18 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/searchreplace/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo19 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/table/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo20 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/template/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo21 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/plugins/textcolor/plugin.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);
			$archivo22 = $archivoZIP->extract(PCLZIP_OPT_BY_NAME, "tinymce/js/tinymce/themes/modern/theme.min.js", PCLZIP_OPT_EXTRACT_AS_STRING);

			// ELIMINA EL ZIP TEMPORAL QUE YA NO ES NECESARIO
			unlink("./tinyMCE.zip");				
			
			// VERIFICA SI SE DESCARGARON TODOS LOS ARCHIVOS
			if ($archivo01[0]!=0 && $archivo02[0]!=0 && $archivo03[0]!=0 && $archivo04[0]!=0 && $archivo05[0]!=0 && $archivo06[0]!=0 &&
				$archivo07[0]!=0 && $archivo08[0]!=0 && $archivo09[0]!=0 && $archivo10[0]!=0 && $archivo11[0]!=0 && $archivo12[0]!=0 &&
				$archivo13[0]!=0 && $archivo14[0]!=0 && $archivo15[0]!=0 && $archivo16[0]!=0 && $archivo17[0]!=0 && $archivo18[0]!=0 &&
				$archivo19[0]!=0 && $archivo20[0]!=0 && $archivo21[0]!=0 && $archivo22[0]!=0)
				{
				// MODIFICA EL PLUGIN DE 'CHARMAP' PARA QUE DIGA 'INSERTAR SIMBOLO', 'SIMBOLOS' Y 'SIMBOLO'
				$archivo06[0]["content"] = str_replace("title:\"Special character\"", "title:\"Symbols\"", $archivo06[0]["content"]);
				$archivo06[0]["content"] = str_replace("text:\"Special character\"", "text:\"Symbol\"", $archivo06[0]["content"]);
				$archivo06[0]["content"] = str_replace("tooltip:\"Special character\"", "tooltip:\"Insert symbol\"", $archivo06[0]["content"]);

				// MODIFICA EL PLUGIN DE 'CONTEXTMENU' PARA QUE MUESTRE 'PROPIEDADES DE LA TABLA'
				$archivo08[0]["content"] = str_replace("column deletetable", "column | tableprops deletetable", $archivo08[0]["content"]);

				// MODIFICA EL PLUGIN DE 'SAVE' PARA ELIMINAR EL TEXTO 'GUARDAR' DEL ICONO
				$archivo17[0]["content"] = str_replace("icon:\"save\",text:\"Save\",", "icon:\"save\",text:\"\",tooltip:\"Save\",", $archivo17[0]["content"]);

				// MODIFICA EL PLUGIN DE 'TABLE' PARA CAMBIAR EL TEXTO 'TABLA' POR 'INSERTAR/EDITAR TABLA'
				$archivo19[0]["content"] = str_replace("{type:\"menubutton\",title:\"Table\"","{type:\"menubutton\",title:\"Insert/edit table\"", $archivo19[0]["content"]);

				// MODIFICA EL THEME MODERN PARA USAR PX EN LUGAR DE PT Y MODIFICAR LA UBICACION DE LAS HOJAS DE ESTILO
				$archivo22[0]["content"] = str_replace("8pt 10pt 12pt 14pt 18pt 24pt 36pt", "8px 10px 11px 12px 13px 14px 16px 18px 20px 22px 24px 26px 28px 30px 32px 34px 36px", $archivo22[0]["content"]);
				$hayerror1 = strpos($archivo22[0]["content"], "lightgray");
				$hayerror2 = strpos($archivo22[0]["content"], "\"/skins/\"");
				$hayerror3 = strpos($archivo22[0]["content"], "skin.min.css");
				$hayerror4 = strpos($archivo22[0]["content"], "\"/content\"");
				$hayerror5 = strpos($archivo22[0]["content"], "\".min.css\"");

				// SI LAS ENCUENTRA, SIGUE CON LA ACTUALIZACION
				if ($hayerror1>0 && $hayerror2>0 && $hayerror3>0 && $hayerror4>0 && $hayerror5>0)
					{
					// MODIFICA TINYMCE PARA QUE NO REQUIERA DE LA CARPETA SKINS
					$archivo22[0]["content"] = str_replace("lightgray", "", $archivo22[0]["content"]);
					$archivo22[0]["content"] = str_replace("\"/skins/\"", "\"\"", $archivo22[0]["content"]);
					$archivo22[0]["content"] = str_replace("skin.min.css", "tinyMCE_Styles1.css", $archivo22[0]["content"]);
					$archivo22[0]["content"] = str_replace("\"/content\"", "\"/\"", $archivo22[0]["content"]);
					$archivo22[0]["content"] = str_replace("\".min.css\"", "\"tinyMCE_Styles2.css\"", $archivo22[0]["content"]);

					// SE GENERA EL ARCHIVO JS FINAL QUE CONTIENE TODOS LOS ARCHIVOS UNIDOS
					$tinyMCE = "";

					// SE LE AGREGA EL JQUERY AL COMIENZO DEL ARCHIVO
					$valorJQuery = "eval%28function%28p%2Ca%2Cc%2Ck%2Ce%2Cd%29%7Be%3Dfunction%28c%29%7Breturn%28c%3Ca%3F%22%22%3Ae%28parseInt%28c%2Fa%29%29%29%2B%28%28c%3Dc%25a%29%3E35%3FString.fromCharCode%28c%2B29%29%3Ac.toString%2836%29%29%7D%3Bif%28%21%27%27.replace%28%2F%5E%2F%2CString%29%29%7Bwhile%28c--%29%7Bd%5Be%28c%29%5D%3Dk%5Bc%5D%7C%7Ce%28c%29%7Dk%3D%5Bfunction%28e%29%7Breturn%20d%5Be%5D%7D%5D%3Be%3Dfunction%28%29%7Breturn%27%5C%5Cw%2B%27%7D%3Bc%3D1%7D%3Bwhile%28c--%29%7Bif%28k%5Bc%5D%29%7Bp%3Dp.replace%28new%20RegExp%28%27%5C%5Cb%27%2Be%28c%29%2B%27%5C%5Cb%27%2C%27g%27%29%2Ck%5Bc%5D%29%7D%7Dreturn%20p%7D%28%271N.15%3D1N.15%3Bl%206%28a%2Cc%29%7B8%28a%26%26a.H%3D%3D1f%26%266.B.24%29u%206%2812%29.24%28a%29%3Ba%3Da%7C%7C6.1e%7C%7C12%3B8%28a.39%29u%20%24%286.1Y%28a%2C%5B%5D%29%29%3B8%28c%26%26c.39%29u%20%24%28c%29.2h%28a%29%3B8%281N%3D%3D7%29u%2017%206%28a%2Cc%29%3Bq%20m%3D%2F%5E%5B%5E%3C%5D%2A%28%3C.%2B%3E%29%5B%5E%3E%5D%2A%24%2F.2X%28a%29%3B8%28m%29a%3D6.35%28%5Bm%5B1%5D%5D%29%3B7.1o%28a.H%3D%3D2r%7C%7Ca.C%26%26%21a.1X%26%26a%5B0%5D%21%3D15%26%26a%5B0%5D.1X%3F6.1Y%28a%2C%5B%5D%29%3A6.2h%28a%2Cc%29%29%3Bq%20B%3D18%5B18.C-1%5D%3B8%28B%26%26B.H%3D%3D1f%297.P%28B%29%7D8%28%24%296.3B%24%3D%24%3Bq%20%24%3D6%3B6.B%3D6.7A%3D%7B39%3A%22%245A%3A%205B%20%24%22%2C4D%3Al%28%29%7Bu%207.C%7D%2C1o%3Al%2823%29%7B8%2823%26%2623.H%3D%3D2r%29%7B7.C%3D0%3B%5B%5D.1c.14%287%2C23%29%3Bu%207%7DG%20u%2023%3D%3D15%3F6.2c%287%2Cl%28a%29%7Bu%20a%7D%29%3A7%5B23%5D%7D%2CP%3Al%28B%2C1A%29%7Bu%206.P%287%2CB%2C1A%29%7D%2C7n%3Al%28Y%29%7Bq%202d%3D-1%3B7.P%28l%28i%29%7B8%287%3D%3DY%292d%3Di%7D%29%3Bu%202d%7D%2C1J%3Al%281I%2C1h%2Cv%29%7Bu%201I.H%21%3D1G%7C%7C1h%21%3D15%3F7.P%28l%28%29%7B8%281h%3D%3D15%29D%28q%20F%201m%201I%296.1J%28v%3F7.1a%3A7%2CF%2C1I%5BF%5D%29%3BG%206.1J%28v%3F7.1a%3A7%2C1I%2C1h%29%7D%29%3A6%5Bv%7C%7C%221J%22%5D%287%5B0%5D%2C1I%29%7D%2C1d%3Al%281I%2C1h%29%7Bu%207.1J%281I%2C1h%2C%221P%22%29%7D%2C42%3Al%28e%29%7Be%3De%7C%7C7%3Bq%20t%3D%22%22%3BD%28q%20j%3D0%3Bj%3Ce.C%3Bj%2B%2B%29%7Bq%20r%3De%5Bj%5D.1U%3BD%28q%20i%3D0%3Bi%3Cr.C%3Bi%2B%2B%29t%2B%3Dr%5Bi%5D.1X%21%3D1%3Fr%5Bi%5D.5C%3A6.B.42%28%5Br%5Bi%5D%5D%29%7Du%20t%7D%2C7j%3Al%28%29%7Bq%20a%3D6.35%2818%29%3Bu%207.P%28l%28%29%7Bq%20b%3Da%5B0%5D.3l%28U%29%3B7.1w.2A%28b%2C7%29%3B2s%28b.1Q%29b%3Db.1Q%3Bb.3t%287%29%7D%29%7D%2C4N%3Al%28%29%7Bu%207.2G%2818%2CU%2C1%2Cl%28a%29%7B7.3t%28a%29%7D%29%7D%2C4P%3Al%28%29%7Bu%207.2G%2818%2CU%2C-1%2Cl%28a%29%7B7.2A%28a%2C7.1Q%29%7D%29%7D%2C4Q%3Al%28%29%7Bu%207.2G%2818%2C16%2C1%2Cl%28a%29%7B7.1w.2A%28a%2C7%29%7D%29%7D%2C4S%3Al%28%29%7Bu%207.2G%2818%2C16%2C-1%2Cl%28a%29%7B7.1w.2A%28a%2C7.5D%29%7D%29%7D%2C7o%3Al%28%29%7Bu%207.1o%287.33.5F%28%29%29%7D%2C2h%3Al%28t%29%7Bu%207.2a%286.2c%287%2Cl%28a%29%7Bu%206.2h%28t%2Ca%29%7D%29%2C18%29%7D%2C3C%3Al%283N%29%7Bu%207.2a%286.2c%287%2Cl%28a%29%7Bu%20a.3l%283N%21%3D15%3F3N%3AU%29%7D%29%2C18%29%7D%2C1j%3Al%28t%29%7Bu%207.2a%28t.H%3D%3D2r%26%266.2c%287%2Cl%28a%29%7BD%28q%20i%3D0%3Bi%3Ct.C%3Bi%2B%2B%298%286.1j%28t%5Bi%5D%2C%5Ba%5D%29.r.C%29u%20a%7D%29%7C%7Ct.H%3D%3D5G%26%26%28t%3F7.1o%28%29%3A%5B%5D%29%7C%7Ct.H%3D%3D1f%26%266.2C%287%2Ct%29%7C%7C6.1j%28t%2C7%29.r%2C18%29%7D%2C2l%3Al%28t%29%7Bu%207.2a%28t.H%3D%3D1G%3F6.1j%28t%2C7%2C16%29.r%3A6.2C%287%2Cl%28a%29%7Bu%20a%21%3Dt%7D%29%2C18%29%7D%2C1V%3Al%28t%29%7Bu%207.2a%286.1Y%287%2Ct.H%3D%3D1G%3F6.2h%28t%29%3At.H%3D%3D2r%3Ft%3A%5Bt%5D%29%2C18%29%7D%2C3q%3Al%282m%29%7Bu%202m%3F6.1j%282m%2C7%29.r.C%3E0%3A7.C%3E0%7D%2C2G%3Al%281A%2C1g%2C2F%2CB%29%7Bq%203C%3D7.4D%28%29%3E1%3Bq%20a%3D6.35%281A%29%3Bu%207.P%28l%28%29%7Bq%20Y%3D7%3B8%281g%26%267.3S%3D%3D%226S%22%26%26a%5B0%5D.3S%21%3D%225K%22%29%7Bq%2022%3D7.4W%28%2222%22%29%3B8%28%2122.C%29%7BY%3D12.4l%28%2222%22%29%3B7.3t%28Y%29%7DG%20Y%3D22%5B0%5D%7DD%28q%20i%3D%282F%3C0%3Fa.C-1%3A0%29%3Bi%21%3D%282F%3C0%3F2F%3Aa.C%29%3Bi%2B%3D2F%29%7BB.14%28Y%2C%5B3C%3Fa%5Bi%5D.3l%28U%29%3Aa%5Bi%5D%5D%29%7D%7D%29%7D%2C2a%3Al%28a%2C1A%29%7Bq%20B%3D1A%26%261A%5B1A.C-1%5D%3B8%28%21B%7C%7CB.H%21%3D1f%29%7B8%28%217.33%297.33%3D%5B%5D%3B7.33.1c%287.1o%28%29%29%3B7.1o%28a%29%7DG%7Bq%2025%3D7.1o%28%29%3B7.1o%28a%29%3B8%28B.H%3D%3D1f%29u%207.P%28B%29%3B7.1o%2825%29%7Du%207%7D%7D%3B6.1S%3D6.B.1S%3Dl%28Y%2CF%29%7B8%28%21F%29%7BF%3DY%3BY%3D7%7DD%28q%20i%201m%20F%29Y%5Bi%5D%3DF%5Bi%5D%3Bu%20Y%7D%3B6.1S%28%7B5b%3Al%28%29%7B6.5M%3DU%3B6.P%286.2e.52%2Cl%28i%2Cn%29%7B6.B%5Bi%5D%3Dl%28a%29%7Bq%20J%3D6.2c%287%2Cn%29%3B8%28a%26%26a.H%3D%3D1G%29J%3D6.1j%28a%2CJ%29.r%3Bu%207.2a%28J%2C18%29%7D%7D%29%3B6.P%286.2e.2o%2Cl%28i%2Cn%29%7B6.B%5Bi%5D%3Dl%28%29%7Bq%20a%3D18%3Bu%207.P%28l%28%29%7BD%28q%20j%3D0%3Bj%3Ca.C%3Bj%2B%2B%29%24%28a%5Bj%5D%29%5Bn%5D%287%29%7D%29%7D%7D%29%3B6.P%286.2e.P%2Cl%28i%2Cn%29%7B6.B%5Bi%5D%3Dl%28%29%7Bu%207.P%28n%2C18%29%7D%7D%29%3B6.P%286.2e.1j%2Cl%28i%2Cn%29%7B6.B%5Bn%5D%3Dl%2823%2CB%29%7Bu%207.1j%28%22%3A%22%2Bn%2B%22%28%22%2B23%2B%22%29%22%2CB%29%7D%7D%29%3B6.P%286.2e.1J%2Cl%28i%2Cn%29%7Bn%3Dn%7C%7Ci%3B6.B%5Bi%5D%3Dl%28h%29%7Bu%20h%3D%3D15%3F7.C%3F7%5B0%5D%5Bn%5D%3AT%3A7.1J%28n%2Ch%29%7D%7D%29%3B6.P%286.2e.1d%2Cl%28i%2Cn%29%7B6.B%5Bn%5D%3Dl%28h%29%7Bu%20h%3D%3D15%3F%287.C%3F6.1d%287%5B0%5D%2Cn%29%3AT%29%3A7.1d%28n%2Ch%29%7D%7D%29%7D%2CP%3Al%28Y%2CB%2C1A%29%7B8%28Y.C%3D%3D15%29D%28q%20i%201m%20Y%29B.14%28Y%5Bi%5D%2C1A%7C%7C%5Bi%2CY%5Bi%5D%5D%29%3BG%20D%28q%20i%3D0%3Bi%3CY.C%3Bi%2B%2B%29B.14%28Y%5Bi%5D%2C1A%7C%7C%5Bi%2CY%5Bi%5D%5D%29%3Bu%20Y%7D%2C1b%3A%7B1V%3Al%28o%2Cc%29%7B8%286.1b.3g%28o%2Cc%29%29u%3Bo.1b%2B%3D%28o.1b%3F%22%20%22%3A%22%22%29%2Bc%7D%2C2g%3Al%28o%2Cc%29%7Bo.1b%3D%21c%3F%22%22%3Ao.1b.1p%2817%202Q%28%22%28%5E%7C%5C%5C%5C%5Cs%2A%5C%5C%5C%5Cb%5B%5E-%5D%29%22%2Bc%2B%22%28%24%7C%5C%5C%5C%5Cb%28%3F%3D%5B%5E-%5D%29%29%22%2C%22g%22%29%2C%22%22%29%7D%2C3g%3Al%28e%2Ca%29%7B8%28e.1b%21%3D15%29e%3De.1b%3Bu%2017%202Q%28%22%28%5E%7C%5C%5C%5C%5Cs%29%22%2Ba%2B%22%28%5C%5C%5C%5Cs%7C%24%29%22%29.20%28e%29%7D%7D%2C3u%3Al%28e%2Co%2Cf%29%7BD%28q%20i%201m%20o%29%7Be.1a%5B%2225%22%2Bi%5D%3De.1a%5Bi%5D%3Be.1a%5Bi%5D%3Do%5Bi%5D%7Df.14%28e%2C%5B%5D%29%3BD%28q%20i%201m%20o%29e.1a%5Bi%5D%3De.1a%5B%2225%22%2Bi%5D%7D%2C1d%3Al%28e%2Cp%29%7B8%28p%3D%3D%221s%22%7C%7Cp%3D%3D%2227%22%29%7Bq%2025%3D%7B%7D%2C3k%2C2R%2Cd%3D%5B%225P%22%2C%225Q%22%2C%225L%22%2C%225T%22%5D%3BD%28q%20i%201m%20d%29%7B25%5B%225S%22%2Bd%5Bi%5D%5D%3D0%3B25%5B%225U%22%2Bd%5Bi%5D%2B%225W%22%5D%3D0%7D6.3u%28e%2C25%2Cl%28%29%7B8%286.1d%28e%2C%221n%22%29%21%3D%221W%22%29%7B3k%3De.5X%3B2R%3De.7T%7DG%7Be%3D%24%28e.3l%28U%29%29.1d%28%7B3x%3A%221M%22%2C4U%3A%2261%22%2C1n%3A%222J%22%7D%29.4O%28%2262%22%29%5B0%5D%3B3k%3De.63%3B2R%3De.64%3Be.1w.3W%28e%29%7D%7D%29%3Bu%20p%3D%3D%221s%22%3F3k%3A2R%7DG%208%28p%3D%3D%221z%22%26%266.1q.21%29u%203w%286.1P%28e%2C%221j%22%29.1p%28%2F%5B%5E0-9.%5D%2F%2C%22%22%29%29%7C%7C1%3Bu%206.1P%28e%2Cp%29%7D%2C1P%3Al%28I%2CF%2C4g%29%7Bq%20J%3B8%28%214g%26%26I.1a%5BF%5D%29%7BJ%3DI.1a%5BF%5D%7DG%208%28I.2B%29%7Bq%205n%3DF.1p%28%2F%5C%5C-%28%5C%5Cw%29%2Fg%2Cl%28m%2Cc%29%7Bu%20c.3a%28%29%7D%29%3BJ%3DI.2B%5BF%5D%7C%7CI.2B%5B5n%5D%7DG%208%2812.3j%26%2612.3j.3v%29%7BF%3DF.1p%28%2F%28%5BA-Z%5D%29%2Fg%2C%22-%241%22%29.4L%28%29%3Bq%201i%3D12.3j.3v%28I%2CT%29%3B8%281i%29J%3D1i.5h%28F%29%3BG%208%28F%3D%3D%5C%271n%5C%27%29J%3D%5C%271W%5C%27%3BG%206.3u%28I%2C%7B1n%3A%5C%272J%5C%27%7D%2Cl%28%29%7BJ%3D12.3j.3v%287%2CT%29.5h%28F%29%7D%29%7Du%20J%7D%2C35%3Al%28a%29%7Bq%20r%3D%5B%5D%3BD%28q%20i%3D0%3Bi%3Ca.C%3Bi%2B%2B%29%7B8%28a%5Bi%5D.H%3D%3D1G%29%7Bq%201g%3D%22%22%3B8%28%21a%5Bi%5D.19%28%22%3C44%22%29%7C%7C%21a%5Bi%5D.19%28%22%3C22%22%29%29%7B1g%3D%2244%22%3Ba%5Bi%5D%3D%22%3C1g%3E%22%2Ba%5Bi%5D%2B%22%3C%2F1g%3E%22%7DG%208%28%21a%5Bi%5D.19%28%22%3C3e%22%29%29%7B1g%3D%223e%22%3Ba%5Bi%5D%3D%22%3C1g%3E%22%2Ba%5Bi%5D%2B%22%3C%2F1g%3E%22%7DG%208%28%21a%5Bi%5D.19%28%22%3C41%22%29%7C%7C%21a%5Bi%5D.19%28%22%3C69%22%29%29%7B1g%3D%2241%22%3Ba%5Bi%5D%3D%22%3C1g%3E%3C22%3E%3C3e%3E%22%2Ba%5Bi%5D%2B%22%3C%2F3e%3E%3C%2F22%3E%3C%2F1g%3E%22%7Dq%201B%3D12.4l%28%221B%22%29%3B1B.2t%3Da%5Bi%5D%3B8%281g%29%7B1B%3D1B.1Q%3B8%281g%21%3D%2244%22%291B%3D1B.1Q%3B8%281g%3D%3D%2241%22%291B%3D1B.1Q%7DD%28q%20j%3D0%3Bj%3C1B.1U.C%3Bj%2B%2B%29r.1c%281B.1U%5Bj%5D%29%7DG%208%28a%5Bi%5D.39%7C%7Ca%5Bi%5D.C%26%26%21a%5Bi%5D.1X%29D%28q%20k%3D0%3Bk%3Ca%5Bi%5D.C%3Bk%2B%2B%29r.1c%28a%5Bi%5D%5Bk%5D%29%3BG%208%28a%5Bi%5D%21%3D%3DT%29r.1c%28a%5Bi%5D.1X%3Fa%5Bi%5D%3A12.6c%28a%5Bi%5D.6e%28%29%29%29%7Du%20r%7D%2C2m%3A%7B%22%22%3A%22m%5B2%5D%3D%3D%20%5C%27%2A%5C%27%7C%7Ca.3S.3a%28%29%3D%3Dm%5B2%5D.3a%28%29%22%2C%22%23%22%3A%22a.31%28%5C%272N%5C%27%29%26%26a.31%28%5C%272N%5C%27%29%3D%3Dm%5B2%5D%22%2C%22%3A%22%3A%7B4Y%3A%22i%3Cm%5B3%5D-0%22%2C50%3A%22i%3Em%5B3%5D-0%22%2C6f%3A%22m%5B3%5D-0%3D%3Di%22%2C4X%3A%22m%5B3%5D-0%3D%3Di%22%2C2b%3A%22i%3D%3D0%22%2C1K%3A%22i%3D%3Dr.C-1%22%2C4A%3A%22i%252%3D%3D0%22%2C4B%3A%22i%252%22%2C%222b-3Z%22%3A%226.1C%28a%2C0%29.1i%22%2C%221K-3Z%22%3A%226.1C%28a%2C0%29.1K%22%2C%226g-3Z%22%3A%226.1C%28a%29.C%3D%3D1%22%2C53%3A%22a.1U.C%22%2C5a%3A%22%21a.1U.C%22%2C51%3A%22%28a.6i%7C%7Ca.2t%29.19%28m%5B3%5D%29%3E%3D0%22%2C6j%3A%22a.v%21%3D%5C%271M%5C%27%26%266.1d%28a%2C%5C%271n%5C%27%29%21%3D%5C%271W%5C%27%26%266.1d%28a%2C%5C%273x%5C%27%29%21%3D%5C%271M%5C%27%22%2C1M%3A%22a.v%3D%3D%5C%271M%5C%27%7C%7C6.1d%28a%2C%5C%271n%5C%27%29%3D%3D%5C%271W%5C%27%7C%7C6.1d%28a%2C%5C%273x%5C%27%29%3D%3D%5C%271M%5C%27%22%2C6l%3A%22%21a.3Q%22%2C3Q%3A%22a.3Q%22%2C4q%3A%22a.4q%22%2C4r%3A%22a.4r%22%7D%2C%22.%22%3A%226.1b.3g%28a%2Cm%5B2%5D%29%22%2C%22%40%22%3A%7B%22%3D%22%3A%22z%3D%3Dm%5B4%5D%22%2C%22%21%3D%22%3A%22z%21%3Dm%5B4%5D%22%2C%22%5E%3D%22%3A%22%21z.19%28m%5B4%5D%29%22%2C%22%24%3D%22%3A%22z.2x%28z.C%20-%20m%5B4%5D.C%2Cm%5B4%5D.C%29%3D%3Dm%5B4%5D%22%2C%22%2A%3D%22%3A%22z.19%28m%5B4%5D%29%3E%3D0%22%2C%22%22%3A%22z%22%7D%2C%22%5B%22%3A%226.2h%28m%5B2%5D%2Ca%29.C%22%7D%2C38%3A%5B%22%5C%5C%5C%5C.%5C%5C%5C%5C.%7C%2F%5C%5C%5C%5C.%5C%5C%5C%5C.%22%2C%22a.1w%22%2C%22%3E%7C%2F%22%2C%226.1C%28a.1Q%29%22%2C%22%5C%5C%5C%5C%2B%22%2C%226.1C%28a%29.36%22%2C%22~%22%2Cl%28a%29%7Bq%20r%3D%5B%5D%3Bq%20s%3D6.1C%28a%29%3B8%28s.n%3E0%29D%28q%20i%3Ds.n%3Bi%3Cs.C%3Bi%2B%2B%29r.1c%28s%5Bi%5D%29%3Bu%20r%7D%5D%2C2h%3Al%28t%2C1e%29%7B8%281e%26%261e.1X%3D%3D15%291e%3DT%3B1e%3D1e%7C%7C6.1e%7C%7C12%3B8%28t.H%21%3D1G%29u%5Bt%5D%3B8%28%21t.19%28%22%2F%2F%22%29%29%7B1e%3D1e.4s%3Bt%3Dt.2x%282%2Ct.C%29%7DG%208%28%21t.19%28%22%2F%22%29%29%7B1e%3D1e.4s%3Bt%3Dt.2x%281%2Ct.C%29%3B8%28t.19%28%22%2F%22%29%3E%3D1%29t%3Dt.2x%28t.19%28%22%2F%22%29%2Ct.C%29%7Dq%20J%3D%5B1e%5D%3Bq%201D%3D%5B%5D%3Bq%201K%3DT%3B2s%28t.C%3E0%26%261K%21%3Dt%29%7Bq%20r%3D%5B%5D%3B1K%3Dt%3Bt%3D6.2T%28t%29.1p%28%2F%5E%5C%5C%2F%5C%5C%2F%2Fi%2C%22%22%29%3Bq%203y%3D16%3BD%28q%20i%3D0%3Bi%3C6.38.C%3Bi%2B%3D2%29%7Bq%202j%3D17%202Q%28%22%5E%28%22%2B6.38%5Bi%5D%2B%22%29%22%29%3Bq%20m%3D2j.2X%28t%29%3B8%28m%29%7Br%3DJ%3D6.2c%28J%2C6.38%5Bi%2B1%5D%29%3Bt%3D6.2T%28t.1p%282j%2C%22%22%29%29%3B3y%3DU%7D%7D8%28%213y%29%7B8%28%21t.19%28%22%2C%22%29%7C%7C%21t.19%28%22%7C%22%29%29%7B8%28J%5B0%5D%3D%3D1e%29J.3V%28%29%3B1D%3D6.1Y%281D%2CJ%29%3Br%3DJ%3D%5B1e%5D%3Bt%3D%22%20%22%2Bt.2x%281%2Ct.C%29%7DG%7Bq%203A%3D%2F%5E%28%5B%23.%5D%3F%29%28%5Ba-4J-9%5C%5C%5C%5C%2A3B-%5D%2A%29%2Fi%3Bq%20m%3D3A.2X%28t%29%3B8%28m%5B1%5D%3D%3D%22%23%22%29%7Bq%203s%3D12.4a%28m%5B2%5D%29%3Br%3DJ%3D3s%3F%5B3s%5D%3A%5B%5D%3Bt%3Dt.1p%283A%2C%22%22%29%7DG%7B8%28%21m%5B2%5D%7C%7Cm%5B1%5D%3D%3D%22.%22%29m%5B2%5D%3D%22%2A%22%3BD%28q%20i%3D0%3Bi%3CJ.C%3Bi%2B%2B%29r%3D6.1Y%28r%2Cm%5B2%5D%3D%3D%22%2A%22%3F6.3M%28J%5Bi%5D%29%3AJ%5Bi%5D.4W%28m%5B2%5D%29%29%7D%7D%7D8%28t%29%7Bq%201t%3D6.1j%28t%2Cr%29%3BJ%3Dr%3D1t.r%3Bt%3D6.2T%281t.t%29%7D%7D8%28J%26%26J%5B0%5D%3D%3D1e%29J.3V%28%29%3B1D%3D6.1Y%281D%2CJ%29%3Bu%201D%7D%2C3M%3Al%28o%2Cr%29%7Br%3Dr%7C%7C%5B%5D%3Bq%20s%3Do.1U%3BD%28q%20i%3D0%3Bi%3Cs.C%3Bi%2B%2B%298%28s%5Bi%5D.1X%3D%3D1%29%7Br.1c%28s%5Bi%5D%29%3B6.3M%28s%5Bi%5D%2Cr%29%7Du%20r%7D%2C1J%3Al%28I%2C1r%2C1h%29%7Bq%2029%3D%7B%22D%22%3A%2274%22%2C%226s%22%3A%221b%22%2C%224V%22%3A%226t%22%2C2t%3A%222t%22%2C1b%3A%221b%22%7D%3B8%2829%5B1r%5D%29%7B8%281h%21%3D15%29I%5B29%5B1r%5D%5D%3D1h%3Bu%20I%5B29%5B1r%5D%5D%7DG%208%28I.31%29%7B8%281h%21%3D15%29I.6u%281r%2C1h%29%3Bu%20I.31%281r%2C2%29%7DG%7B1r%3D1r.1p%28%2F-%28%5Ba-z%5D%29%2F6w%2Cl%28z%2Cb%29%7Bu%20b.3a%28%29%7D%29%3B8%281h%21%3D15%29I%5B1r%5D%3D1h%3Bu%20I%5B1r%5D%7D%7D%2C4v%3A%5B%5B%22%5C%5C%5C%5C%5B%20%2A%28%40%29S%20%2A%28%5B%21%2A%24%5E%3D%5D%2A%29%20%2AQ%5C%5C%5C%5C%5D%22%2C1%5D%2C%5B%22%28%5C%5C%5C%5C%5B%29Q%5C%5C%5C%5C%5D%22%2C0%5D%2C%5B%22%28%3A%29S%5C%5C%5C%5C%28Q%5C%5C%5C%5C%29%22%2C0%5D%2C%5B%22%28%5B%3A.%23%5D%2A%29S%22%2C0%5D%5D%2C1j%3Al%28t%2Cr%2C2l%29%7Bq%20g%3D2l%21%3D%3D16%3F6.2C%3Al%28a%2Cf%29%7Bu%206.2C%28a%2Cf%2CU%29%7D%3B2s%28t%26%26%2F%5E%5Ba-z%5B%28%7B%3C%2A%3A.%23%5D%2Fi.20%28t%29%29%7Bq%20p%3D6.4v%3BD%28q%20i%3D0%3Bi%3Cp.C%3Bi%2B%2B%29%7Bq%202j%3D17%202Q%28%22%5E%22%2Bp%5Bi%5D%5B0%5D.1p%28%5C%27S%5C%27%2C%22%28%5Ba-z%2A3B-%5D%5Ba-4J-6A-%5D%2A%29%22%29.1p%28%5C%27Q%5C%27%2C%22%20%2A%5C%27%3F%5C%5C%22%3F%28%5B%5E%5C%27%5C%5C%22%5D%2A%3F%29%5C%27%3F%5C%5C%22%3F%20%2A%22%29%2C%22i%22%29%3Bq%20m%3D2j.2X%28t%29%3B8%28m%29%7B8%28p%5Bi%5D%5B1%5D%29m%3D%5B%22%22%2Cm%5B1%5D%2Cm%5B3%5D%2Cm%5B2%5D%2Cm%5B4%5D%5D%3Bt%3Dt.1p%282j%2C%22%22%29%3B6C%7D%7D8%28m%5B1%5D%3D%3D%22%3A%22%26%26m%5B2%5D%3D%3D%222l%22%29r%3D6.1j%28m%5B3%5D%2Cr%2C16%29.r%3BG%7Bq%20f%3D6.2m%5Bm%5B1%5D%5D%3B8%28f.H%21%3D1G%29f%3D6.2m%5Bm%5B1%5D%5D%5Bm%5B2%5D%5D%3B3z%28%22f%20%3D%20l%28a%2Ci%29%7B%22%2B%28m%5B1%5D%3D%3D%22%40%22%3F%22z%3D6.1J%28a%2Cm%5B3%5D%29%3B%22%3A%22%22%29%2B%22u%20%22%2Bf%2B%22%7D%22%29%3Br%3Dg%28r%2Cf%29%7D%7Du%7Br%3Ar%2Ct%3At%7D%7D%2C2T%3Al%28t%29%7Bu%20t.1p%28%2F%5E%5C%5Cs%2B%7C%5C%5Cs%2B%24%2Fg%2C%22%22%29%7D%2C2M%3Al%28I%29%7Bq%203E%3D%5B%5D%3Bq%201i%3DI.1w%3B2s%281i%26%261i%21%3D12%29%7B3E.1c%281i%29%3B1i%3D1i.1w%7Du%203E%7D%2C1C%3Al%28I%2C2d%2C2l%29%7Bq%20W%3D%5B%5D%3Bq%2026%3DI.1w.1U%3BD%28q%20i%3D0%3Bi%3C26.C%3Bi%2B%2B%29%7B8%282l%3D%3D%3DU%26%2626%5Bi%5D%3D%3DI%296E%3B8%2826%5Bi%5D.1X%3D%3D1%29W.1c%2826%5Bi%5D%29%3B8%2826%5Bi%5D%3D%3DI%29W.n%3DW.C-1%7Du%206.1S%28W%2C%7B1K%3AW.n%3D%3DW.C-1%2C1i%3A2d%3D%3D%224A%22%26%26W.n%252%3D%3D0%7C%7C2d%3D%3D%224B%22%26%26W.n%252%7C%7CW%5B2d%5D%3D%3DI%2C3P%3AW%5BW.n-1%5D%2C36%3AW%5BW.n%2B1%5D%7D%29%7D%2C1Y%3Al%282b%2C2W%29%7Bq%201y%3D%5B%5D%3BD%28q%20k%3D0%3Bk%3C2b.C%3Bk%2B%2B%291y%5Bk%5D%3D2b%5Bk%5D%3BD%28q%20i%3D0%3Bi%3C2W.C%3Bi%2B%2B%29%7Bq%203F%3DU%3BD%28q%20j%3D0%3Bj%3C2b.C%3Bj%2B%2B%298%282W%5Bi%5D%3D%3D2b%5Bj%5D%293F%3D16%3B8%283F%291y.1c%282W%5Bi%5D%29%7Du%201y%7D%2C2C%3Al%28W%2CB%2C3G%29%7B8%28B.H%3D%3D1G%29B%3D17%201f%28%22a%22%2C%22i%22%2C%22u%20%22%2BB%29%3Bq%201y%3D%5B%5D%3BD%28q%20i%3D0%3Bi%3CW.C%3Bi%2B%2B%298%28%213G%26%26B%28W%5Bi%5D%2Ci%29%7C%7C3G%26%26%21B%28W%5Bi%5D%2Ci%29%291y.1c%28W%5Bi%5D%29%3Bu%201y%7D%2C2c%3Al%28W%2CB%29%7B8%28B.H%3D%3D1G%29B%3D17%201f%28%22a%22%2C%22u%20%22%2BB%29%3Bq%201y%3D%5B%5D%3BD%28q%20i%3D0%3Bi%3CW.C%3Bi%2B%2B%29%7Bq%201t%3DB%28W%5Bi%5D%2Ci%29%3B8%281t%21%3D%3DT%26%261t%21%3D15%29%7B8%281t.H%21%3D2r%291t%3D%5B1t%5D%3B1y%3D6.1Y%281y%2C1t%29%7D%7Du%201y%7D%2CM%3A%7B1V%3Al%28N%2Cv%2C1Z%29%7B8%286.1q.21%26%26N.3I%21%3D15%29N%3D1N%3B8%28%211Z.2n%291Z.2n%3D7.2n%2B%2B%3B8%28%21N.1v%29N.1v%3D%7B%7D%3Bq%202D%3DN.1v%5Bv%5D%3B8%28%212D%29%7B2D%3DN.1v%5Bv%5D%3D%7B%7D%3B8%28N%5B%222z%22%2Bv%5D%292D%5B0%5D%3DN%5B%222z%22%2Bv%5D%7D2D%5B1Z.2n%5D%3D1Z%3BN%5B%222z%22%2Bv%5D%3D7.4H%3B8%28%217.2E%5Bv%5D%297.2E%5Bv%5D%3D%5B%5D%3B7.2E%5Bv%5D.1c%28N%29%7D%2C2n%3A1%2C2E%3A%7B%7D%2C2g%3Al%28N%2Cv%2C1Z%29%7B8%28N.1v%298%28v%26%26N.1v%5Bv%5D%298%281Z%294E%20N.1v%5Bv%5D%5B1Z.2n%5D%3BG%20D%28q%20i%201m%20N.1v%5Bv%5D%294E%20N.1v%5Bv%5D%5Bi%5D%3BG%20D%28q%20j%201m%20N.1v%297.2g%28N%2Cj%29%7D%2C1H%3Al%28v%2CK%2CN%29%7BK%3DK%7C%7C%5B%5D%3B8%28%21N%29%7Bq%20g%3D7.2E%5Bv%5D%3B8%28g%29D%28q%20i%3D0%3Bi%3Cg.C%3Bi%2B%2B%297.1H%28v%2CK%2Cg%5Bi%5D%29%7DG%208%28N%5B%222z%22%2Bv%5D%29%7BK.6N%287.29%28%7Bv%3Av%2C6O%3AN%7D%29%29%3BN%5B%222z%22%2Bv%5D.14%28N%2CK%29%7D%7D%2C4H%3Al%28M%29%7B8%286Q%206%3D%3D%2215%22%29u%3BM%3DM%7C%7C6.M.29%281N.M%29%3B8%28%21M%29u%3Bq%202Z%3DU%3Bq%20c%3D7.1v%5BM.v%5D%3BD%28q%20j%201m%20c%29%7B8%28c%5Bj%5D.14%287%2C%5BM%5D%29%3D%3D%3D16%29%7BM.3Y%28%29%3BM.4K%28%29%3B2Z%3D16%7D%7Du%202Z%7D%2C29%3Al%28M%29%7B8%28M%29%7BM.3Y%3Dl%28%29%7B7.2Z%3D16%7D%3BM.4K%3Dl%28%29%7B7.6T%3DU%7D%7Du%20M%7D%7D%7D%29%3B17%20l%28%29%7Bq%20b%3D5k.5l.4L%28%29%3B6.1q%3D%7B2O%3A%2F6U%2F.20%28b%29%2C2K%3A%2F2K%2F.20%28b%29%2C21%3A%2F21%2F.20%28b%29%26%26%21%2F2K%2F.20%28b%29%2C3n%3A%2F3n%2F.20%28b%29%26%26%21%2F6V%2F.20%28b%29%7D%3B6.6W%3D%216.1q.21%7C%7C12.6X%3D%3D%226Z%22%7D%3B6.2e%3D%7B2o%3A%7B70%3A%224N%22%2C4O%3A%224P%22%2C2A%3A%224Q%22%2C72%3A%224S%22%7D%2C1d%3A%2227%2C1s%2C73%2C75%2C4U%2C4V%2C2S%2C77%2C78%22.3m%28%22%2C%22%29%2C1j%3A%5B%224X%22%2C%224Y%22%2C%2250%22%2C%2251%22%5D%2C1J%3A%7B1t%3A%221h%22%2C5c%3A%222t%22%2C2N%3AT%2C79%3AT%2C1r%3AT%2C7a%3AT%2C37%3AT%2C7b%3AT%7D%2C52%3A%7B53%3A%22a.1w%22%2C7c%3A6.2M%2C2M%3A6.2M%2C36%3A%226.1C%28a%29.36%22%2C3P%3A%226.1C%28a%29.3P%22%2C26%3A6.1C%2C7e%3A%22a.1U%22%7D%2CP%3A%7B7f%3Al%281I%29%7B7.7g%281I%29%7D%2C1x%3Al%28%29%7B7.1a.1n%3D7.2i%3F7.2i%3A%22%22%3B8%286.1d%287%2C%221n%22%29%3D%3D%221W%22%297.1a.1n%3D%222J%22%7D%2C1k%3Al%28%29%7B7.2i%3D7.2i%7C%7C6.1d%287%2C%221n%22%29%3B8%287.2i%3D%3D%221W%22%297.2i%3D%222J%22%3B7.1a.1n%3D%221W%22%7D%2C3X%3Al%28%29%7B%24%287%29%5B%24%287%29.3q%28%22%3A1M%22%29%3F%221x%22%3A%221k%22%5D.14%28%24%287%29%2C18%29%7D%2C7i%3Al%28c%29%7B6.1b.1V%287%2Cc%29%7D%2C7k%3Al%28c%29%7B6.1b.2g%287%2Cc%29%7D%2C7l%3Al%28c%29%7B6.1b%5B6.1b.3g%287%2Cc%29%3F%222g%22%3A%221V%22%5D%287%2Cc%29%7D%2C2g%3Al%28a%29%7B8%28%21a%7C%7C6.1j%28%5B7%5D%2Ca%29.r%297.1w.3W%287%29%7D%2C5a%3Al%28%29%7B2s%287.1Q%297.3W%287.1Q%29%7D%2C2L%3Al%28v%2CB%29%7B8%28B.H%3D%3D1G%29B%3D17%201f%28%22e%22%2C%28%21B.19%28%22.%22%29%3F%22%24%287%29%22%3A%22u%20%22%29%2BB%29%3B6.M.1V%287%2Cv%2CB%29%7D%2C5q%3Al%28v%2CB%29%7B6.M.2g%287%2Cv%2CB%29%7D%2C1H%3Al%28v%2CK%29%7B6.M.1H%28v%2CK%2C7%29%7D%7D%7D%3B6.5b%28%29%3B6.B.1S%28%7B5e%3A6.B.3X%2C3X%3Al%28a%2Cb%29%7Bu%20a%26%26b%26%26a.H%3D%3D1f%26%26b.H%3D%3D1f%3F7.5i%28l%28e%29%7B7.1K%3D7.1K%3D%3Da%3Fb%3Aa%3Be.3Y%28%29%3Bu%207.1K.14%287%2C%5Be%5D%29%7C%7C16%7D%29%3A7.5e.14%287%2C18%29%7D%2C7p%3Al%28f%2Cg%29%7Bl%2045%28e%29%7Bq%20p%3D%28e.v%3D%3D%223i%22%3Fe.7q%3Ae.7r%29%7C%7Ce.7s%3B2s%28p%26%26p%21%3D7%29p%3Dp.1w%3B8%28p%3D%3D7%29u%2016%3Bu%28e.v%3D%3D%223i%22%3Ff%3Ag%29.14%287%2C%5Be%5D%29%7Du%207.3i%2845%29.5m%2845%29%7D%2C24%3Al%28f%29%7B8%286.3b%29f.14%2812%29%3BG%7B6.2u.1c%28f%29%7Du%207%7D%7D%29%3B6.1S%28%7B3b%3A16%2C2u%3A%5B%5D%2C24%3Al%28%29%7B8%28%216.3b%29%7B6.3b%3DU%3B8%286.2u%29%7BD%28q%20i%3D0%3Bi%3C6.2u.C%3Bi%2B%2B%296.2u%5Bi%5D.14%2812%29%3B6.2u%3DT%7D%7D%7D%7D%29%3B17%20l%28%29%7Bq%20e%3D%28%227u%2C7v%2C2I%2C7w%2C7x%2C7y%2C5i%2C7B%2C%22%2B%227C%2C7D%2C7E%2C3i%2C5m%2C7F%2C7I%2C7J%2C%22%2B%227L%2C7M%2C7O%2C7P%2C2f%22%29.3m%28%22%2C%22%29%3BD%28q%20i%3D0%3Bi%3Ce.C%3Bi%2B%2B%2917%20l%28%29%7Bq%20o%3De%5Bi%5D%3B6.B%5Bo%5D%3Dl%28f%29%7Bu%20f%3F7.2L%28o%2Cf%29%3A7.1H%28o%29%7D%3B6.B%5B%227R%22%2Bo%5D%3Dl%28f%29%7Bu%207.5q%28o%2Cf%29%7D%3B6.B%5B%225s%22%2Bo%5D%3Dl%28f%29%7Bu%207.P%28l%28%29%7Bq%2049%3D0%3B6.M.1V%287%2Co%2Cl%28e%29%7B8%2849%2B%2B%29u%3Bu%20f.14%287%2C%5Be%5D%29%7D%29%7D%29%7D%7D%3B8%286.1q.3n%7C%7C6.1q.2K%29%7B12.5t%28%225u%22%2C6.24%2C16%29%7DG%208%286.1q.21%29%7B12.5v%28%22%3C5w%22%2B%225x%202N%3D57%205z%3DU%20%22%2B%2237%3D%2F%2F%3A%3E%3C%5C%5C%2F28%3E%22%29%3Bq%2028%3D12.4a%28%2257%22%29%3B28.2p%3Dl%28%29%7B8%287.34%3D%3D%221u%22%296.24%28%29%7D%3B28%3DT%7DG%208%286.1q.2O%29%7B6.3p%3D3I%28l%28%29%7B8%2812.34%3D%3D%225E%22%7C%7C12.34%3D%3D%221u%22%29%7B4I%286.3p%29%3B6.3p%3DT%3B6.24%28%29%7D%7D%2C10%29%7D6.M.1V%281N%2C%222I%22%2C6.24%29%7D%3B6.B.1S%28%7B4c%3A6.B.1x%2C1x%3Al%28V%2CE%29%7Bu%20V%3F7.1T%28%7B1s%3A%221x%22%2C27%3A%221x%22%2C1z%3A%221x%22%7D%2CV%2CE%29%3A7.4c%28%29%7D%2C4R%3A6.B.1k%2C1k%3Al%28V%2CE%29%7Bu%20V%3F7.1T%28%7B1s%3A%221k%22%2C27%3A%221k%22%2C1z%3A%221k%22%7D%2CV%2CE%29%3A7.4R%28%29%7D%2C5N%3Al%28V%2CE%29%7Bu%207.1T%28%7B1s%3A%221x%22%7D%2CV%2CE%29%7D%2C5O%3Al%28V%2CE%29%7Bu%207.1T%28%7B1s%3A%221k%22%7D%2CV%2CE%29%7D%2C5R%3Al%28V%2CE%29%7Bu%207.P%28l%28%29%7Bq%204e%3D%24%287%29.3q%28%22%3A1M%22%29%3F%221x%22%3A%221k%22%3B%24%287%29.1T%28%7B1s%3A4e%7D%2CV%2CE%29%7D%29%7D%2C5I%3Al%28V%2CE%29%7Bu%207.1T%28%7B1z%3A%221x%22%7D%2CV%2CE%29%7D%2C5Y%3Al%28V%2CE%29%7Bu%207.1T%28%7B1z%3A%221k%22%7D%2CV%2CE%29%7D%2C60%3Al%28V%2C2o%2CE%29%7Bu%207.1T%28%7B1z%3A2o%7D%2CV%2CE%29%7D%2C1T%3Al%28F%2CV%2CE%29%7Bu%207.1l%28l%28%29%7B7.2y%3DF%3BD%28q%20p%201m%20F%29%7Bq%20e%3D17%206.2H%287%2C6.V%28V%2CE%29%2Cp%29%3B8%28F%5Bp%5D.H%3D%3D4m%29e.2V%28e.1i%28%29%2CF%5Bp%5D%29%3BG%20e%5BF%5Bp%5D%5D%28F%29%7D%7D%29%7D%2C1l%3Al%28v%2CB%29%7B8%28%21B%29%7BB%3Dv%3Bv%3D%222H%22%7Du%207.P%28l%28%29%7B8%28%217.1l%297.1l%3D%7B%7D%3B8%28%217.1l%5Bv%5D%297.1l%5Bv%5D%3D%5B%5D%3B7.1l%5Bv%5D.1c%28B%29%3B8%287.1l%5Bv%5D.C%3D%3D1%29B.14%287%29%7D%29%7D%7D%29%3B6.1S%28%7B4Z%3Al%28e%2Cp%29%7B8%28e.4j%29u%3B8%28p%3D%3D%221s%22%26%26e.5o%21%3D30%286.1P%28e%2Cp%29%29%29u%3B8%28p%3D%3D%2227%22%26%26e.4f%21%3D30%286.1P%28e%2Cp%29%29%29u%3Bq%20a%3De.1a%5Bp%5D%3Bq%20o%3D6.1P%28e%2Cp%2C1%29%3B8%28p%3D%3D%221s%22%26%26e.5o%21%3Do%7C%7Cp%3D%3D%2227%22%26%26e.4f%21%3Do%29u%3Be.1a%5Bp%5D%3De.2B%3F%22%22%3A%224h%22%3Bq%20n%3D6.1P%28e%2Cp%2C1%29%3B8%28o%21%3Dn%26%26n%21%3D%224h%22%29%7Be.1a%5Bp%5D%3Da%3Be.4j%3DU%7D%7D%2CV%3Al%28s%2Co%29%7Bo%3Do%7C%7C%7B%7D%3B8%28o.H%3D%3D1f%29o%3D%7B1u%3Ao%7D%3Bq%204o%3D%7B68%3A6a%2C6b%3A4n%7D%3Bo.2w%3D%28s%26%26s.H%3D%3D4m%3Fs%3A4o%5Bs%5D%29%7C%7C58%3Bo.3f%3Do.1u%3Bo.1u%3Dl%28%29%7B6.5r%287%2C%222H%22%29%3B8%28o.3f%26%26o.3f.H%3D%3D1f%29o.3f.14%287%29%7D%3Bu%20o%7D%2C1l%3A%7B%7D%2C5r%3Al%28I%2Cv%29%7Bv%3Dv%7C%7C%222H%22%3B8%28I.1l%26%26I.1l%5Bv%5D%29%7BI.1l%5Bv%5D.3V%28%29%3Bq%20f%3DI.1l%5Bv%5D%5B0%5D%3B8%28f%29f.14%28I%29%7D%7D%2C2H%3Al%28I%2C2q%2CF%29%7Bq%20z%3D7%3Bz.o%3D%7B2w%3A2q.2w%7C%7C58%2C1u%3A2q.1u%2C2k%3A2q.2k%7D%3Bz.R%3DI%3Bq%20y%3Dz.R.1a%3Bz.a%3Dl%28%29%7B8%282q.2k%292q.2k.14%28I%2C%5Bz.1E%5D%29%3B8%28F%3D%3D%221z%22%29%7B8%28z.1E%3D%3D1%29z.1E%3D0.6o%3B8%281N.5j%29y.1j%3D%226p%281z%3D%22%2Bz.1E%2A6q%2B%22%29%22%3BG%20y.1z%3Dz.1E%7DG%208%2830%28z.1E%29%29y%5BF%5D%3D30%28z.1E%29%2B%224T%22%3By.1n%3D%222J%22%7D%3Bz.4w%3Dl%28%29%7Bu%203w%286.1d%28z.R%2CF%29%29%7D%3Bz.1i%3Dl%28%29%7Bq%20r%3D3w%286.1P%28z.R%2CF%29%29%3Bu%20r%26%26r%3E-6y%3Fr%3Az.4w%28%29%7D%3Bz.2V%3Dl%283D%2C2o%29%7Bz.3o%3D%2817%204F%28%29%29.4G%28%29%3Bz.1E%3D3D%3Bz.a%28%29%3Bz.3K%3D3I%28l%28%29%7Bz.2k%283D%2C2o%29%7D%2C13%29%7D%3Bz.1x%3Dl%28p%29%7B8%28%21z.R.1L%29z.R.1L%3D%7B%7D%3Bz.R.1L%5BF%5D%3D7.1i%28%29%3Bz.2V%280%2Cz.R.1L%5BF%5D%29%3B8%28F%21%3D%221z%22%29y%5BF%5D%3D%226F%22%7D%3Bz.1k%3Dl%28%29%7B8%28%21z.R.1L%29z.R.1L%3D%7B%7D%3Bz.R.1L%5BF%5D%3D7.1i%28%29%3Bz.o.1k%3DU%3Bz.2V%28z.R.1L%5BF%5D%2C0%29%7D%3B8%286.1q.21%26%26%21z.R.2B.6J%29y.6K%3D%221%22%3B8%28%21z.R.6L%29z.R.4M%3D6.1d%28z.R%2C%222S%22%29%3By.2S%3D%221M%22%3Bz.2k%3Dl%283T%2C47%29%7Bq%20t%3D%2817%204F%28%29%29.4G%28%29%3B8%28t%3Ez.o.2w%2Bz.3o%29%7B4I%28z.3K%29%3Bz.3K%3DT%3Bz.1E%3D47%3Bz.a%28%29%3Bz.R.2y%5BF%5D%3DU%3Bq%201D%3DU%3BD%28q%20i%201m%20z.R.2y%298%28z.R.2y%5Bi%5D%21%3D%3DU%291D%3D16%3B8%281D%29%7By.2S%3Dz.R.4M%3B8%28z.o.1k%29y.1n%3D%5C%271W%5C%27%3B8%28z.o.1k%29%7BD%28q%20p%201m%20z.R.2y%29%7By%5Bp%5D%3Dz.R.1L%5Bp%5D%2B%28p%3D%3D%221z%22%3F%22%22%3A%224T%22%29%3B8%28p%3D%3D%5C%271s%5C%27%7C%7Cp%3D%3D%5C%2727%5C%27%296.4Z%28z.R%2Cp%29%7D%7D%7D8%281D%26%26z.o.1u%26%26z.o.1u.H%3D%3D1f%29z.o.1u.14%28z.R%29%7DG%7Bq%20p%3D%28t-7.3o%29%2Fz.o.2w%3Bz.1E%3D%28%28-56.7d%28p%2A56.7h%29%2F2%29%2B0.5%29%2A%2847-3T%29%2B3T%3Bz.a%28%29%7D%7D%7D%7D%29%3B6.B.7m%3Dl%28O%2C1F%2CE%29%7B7.2I%28O%2C1F%2CE%2C1%29%7D%3B6.B.2I%3Dl%28O%2C1F%2CE%2C1R%29%7B8%28O.H%3D%3D1f%29u%207.2L%28%222I%22%2CO%29%3BE%3DE%7C%7Cl%28%29%7B%7D%3Bq%20v%3D%223U%22%3B8%281F%29%7B8%281F.H%3D%3D1f%29%7BE%3D1F%3B1F%3DT%7DG%7B1F%3D6.32%281F%29%3Bv%3D%224b%22%7D%7Dq%203c%3D7%3B6.3h%28v%2CO%2C1F%2Cl%283d%2C11%29%7B8%2811%3D%3D%222v%22%7C%7C%211R%26%2611%3D%3D%2254%22%29%7B3c.5c%283d.2Y%29.P%28E%2C%5B3d.2Y%2C11%5D%29%3B%24%28%2228%22%2C3c%29.P%28l%28%29%7B8%287.37%29%24.4i%287.37%29%3BG%203z.4y%281N%2C7.42%7C%7C7.7t%7C%7C7.2t%7C%7C%22%22%29%7D%29%7DG%20E.14%283c%2C%5B3d.2Y%2C11%5D%29%7D%2C1R%29%3Bu%207%7D%3B8%286.1q.21%293L%3Dl%28%29%7Bu%2017%205j%285k.5l.19%28%227G%205%22%29%3E%3D0%3F%227N.5p%22%3A%227Q.5p%22%29%7D%3B17%20l%28%29%7Bq%20e%3D%224k%2C5g%2C5f%2C5d%2C59%22.3m%28%5C%27%2C%5C%27%29%3BD%28q%20i%3D0%3Bi%3Ce.C%3Bi%2B%2B%2917%20l%28%29%7Bq%20o%3De%5Bi%5D%3B6.B%5Bo%5D%3Dl%28f%29%7Bu%207.2L%28o%2Cf%29%7D%7D%7D%3B6.1S%28%7B1o%3Al%28O%2CK%2CE%2Cv%2C1R%29%7B8%28K.H%3D%3D1f%29%7Bv%3DE%3BE%3DK%3BK%3DT%7D8%28K%29O%2B%3D%22%3F%22%2B6.32%28K%29%3B6.3h%28%223U%22%2CO%2CT%2Cl%28r%2C11%29%7B8%28E%29E%286.40%28r%2Cv%29%2C11%29%7D%2C1R%29%7D%2C5J%3Al%28O%2CK%2CE%2Cv%29%7B6.1o%28O%2CK%2CE%2Cv%2C1%29%7D%2C4i%3Al%28O%2CK%2CE%29%7B6.1o%28O%2CK%2CE%2C%2228%22%29%7D%2C5V%3Al%28O%2CK%2CE%2Cv%29%7B6.3h%28%224b%22%2CO%2C6.32%28K%29%2Cl%28r%2C11%29%7B8%28E%29E%286.40%28r%2Cv%29%2C11%29%7D%29%7D%2C1O%3A0%2C65%3Al%281O%29%7B6.1O%3D1O%7D%2C2U%3A%7B%7D%2C3h%3Al%28v%2CO%2CK%2CJ%2C1R%29%7B8%28%21O%29%7BJ%3Dv.1u%3Bq%202v%3Dv.2v%3Bq%202f%3Dv.2f%3BK%3Dv.K%3BO%3Dv.O%3Bv%3Dv.v%7D8%28%216.3r%2B%2B%296.M.1H%28%224k%22%29%3Bq%2048%3D16%3Bq%20L%3D17%203L%28%29%3BL.6d%28v%7C%7C%223U%22%2CO%2CU%29%3B8%28K%29L.2P%28%226k-6m%22%2C%226n%2Fx-6r-6v-6x%22%29%3B8%281R%29L.2P%28%226z-3J-6B%22%2C6.2U%5BO%5D%7C%7C%226D%2C%206G%206H%206I%203H%3A3H%3A3H%206M%22%29%3BL.2P%28%22X-6P-6R%22%2C%223L%22%29%3B8%28L.6Y%29L.2P%28%2271%22%2C%2276%22%29%3Bq%202p%3Dl%283O%29%7B8%28L%26%26%28L.34%3D%3D4%7C%7C3O%3D%3D%221O%22%29%29%7B48%3DU%3Bq%2011%3D6.4d%28L%29%26%263O%21%3D%221O%22%3F1R%26%266.4p%28L%2CO%29%3F%2254%22%3A%222v%22%3A%222f%22%3B8%2811%21%3D%222f%22%29%7Bq%203R%3DL.43%28%224u-3J%22%29%3B8%281R%26%263R%296.2U%5BO%5D%3D3R%3B8%282v%292v%28L%2C11%29%3B6.M.1H%28%2259%22%29%7DG%7B8%282f%292f%28L%2C11%29%3B6.M.1H%28%225d%22%29%7D6.M.1H%28%225f%22%29%3B8%28%21--6.3r%296.M.1H%28%225g%22%29%3B8%28J%29J%28L%2C11%29%3BL.2p%3Dl%28%29%7B%7D%3BL%3DT%7D%7D%3BL.2p%3D2p%3B8%286.1O%3E0%297H%28l%28%29%7B8%28L%29%7BL.7K%28%29%3B8%28%2148%292p%28%221O%22%29%3BL%3DT%7D%7D%2C6.1O%29%3BL.5H%28K%29%7D%2C3r%3A0%2C4d%3Al%28r%29%7B4t%7Bu%21r.11%26%265Z.66%3D%3D%2267%3A%22%7C%7C%28r.11%3E%3D4n%26%26r.11%3C6h%29%7C%7Cr.11%3D%3D4z%7C%7C6.1q.2O%26%26r.11%3D%3D15%7D55%28e%29%7B%7Du%2016%7D%2C4p%3Al%28L%2CO%29%7B4t%7Bq%204C%3DL.43%28%224u-3J%22%29%3Bu%20L.11%3D%3D4z%7C%7C4C%3D%3D6.2U%5BO%5D%7C%7C6.1q.2O%26%26L.11%3D%3D15%7D55%28e%29%7B%7Du%2016%7D%2C40%3Al%28r%2Cv%29%7Bq%2046%3Dr.43%28%227z-v%22%29%3Bq%20K%3D%21v%26%2646%26%2646.19%28%22L%22%29%3E%3D0%3BK%3Dv%3D%3D%22L%22%7C%7CK%3Fr.5y%3Ar.2Y%3B8%28v%3D%3D%2228%22%293z.4y%281N%2CK%29%3Bu%20K%7D%2C32%3Al%28a%29%7Bq%20s%3D%5B%5D%3B8%28a.H%3D%3D2r%29%7BD%28q%20i%3D0%3Bi%3Ca.C%3Bi%2B%2B%29s.1c%28a%5Bi%5D.1r%2B%22%3D%22%2B4x%28a%5Bi%5D.1h%29%29%7DG%7BD%28q%20j%201m%20a%29s.1c%28j%2B%22%3D%22%2B4x%28a%5Bj%5D%29%29%7Du%20s.7S%28%22%26%22%29%7D%7D%29%3B%27%2C62%2C490%2C%27%7C%7C%7C%7C%7C%7CjQuery%7Cthis%7Cif%7C%7C%7C%7C%7C%7C%7C%7C%7C%7C%7C%7C%7Cfunction%7C%7C%7C%7C%7Cvar%7C%7C%7C%7Creturn%7Ctype%7C%7C%7C%7C%7C%7Cfn%7Clength%7Cfor%7Ccallback%7Cprop%7Celse%7Cconstructor%7Celem%7Cret%7Cdata%7Cxml%7Cevent%7Celement%7Curl%7Ceach%7C%7Cel%7C%7Cnull%7Ctrue%7Cspeed%7Celems%7C%7Cobj%7C%7C%7Cstatus%7Cdocument%7C%7Capply%7Cundefined%7Cfalse%7Cnew%7Carguments%7CindexOf%7Cstyle%7CclassName%7Cpush%7Ccss%7Ccontext%7CFunction%7Ctable%7Cvalue%7Ccur%7Cfilter%7Chide%7Cqueue%7Cin%7Cdisplay%7Cget%7Creplace%7Cbrowser%7Cname%7Cheight%7Cval%7Ccomplete%7Cevents%7CparentNode%7Cshow%7Cresult%7Copacity%7Cargs%7Cdiv%7Csibling%7Cdone%7Cnow%7Cparams%7CString%7Ctrigger%7Ckey%7Cattr%7Clast%7Corig%7Chidden%7Cwindow%7Ctimeout%7CcurCSS%7CfirstChild%7CifModified%7Cextend%7Canimate%7CchildNodes%7Cadd%7Cnone%7CnodeType%7Cmerge%7Chandler%7Ctest%7Cmsie%7Ctbody%7Cnum%7Cready%7Cold%7Csiblings%7Cwidth%7Cscript%7Cfix%7CpushStack%7Cfirst%7Cmap%7Cpos%7Cmacros%7Cerror%7Cremove%7Cfind%7Coldblock%7Cre%7Cstep%7Cnot%7Cexpr%7Cguid%7Cto%7Conreadystatechange%7Coptions%7CArray%7Cwhile%7CinnerHTML%7CreadyList%7Csuccess%7Cduration%7Csubstr%7CcurAnim%7Con%7CinsertBefore%7CcurrentStyle%7Cgrep%7Chandlers%7Cglobal%7Cdir%7CdomManip%7Cfx%7Cload%7Cblock%7Copera%7Cbind%7Cparents%7Cid%7Csafari%7CsetRequestHeader%7CRegExp%7CoWidth%7Coverflow%7Ctrim%7ClastModified%7Ccustom%7Csecond%7Cexec%7CresponseText%7CreturnValue%7CparseInt%7CgetAttribute%7Cparam%7Cstack%7CreadyState%7Cclean%7Cnext%7Csrc%7Ctoken%7Cjquery%7CtoUpperCase%7CisReady%7Cself%7Cres%7Ctr%7ColdComplete%7Chas%7Cajax%7Cmouseover%7CdefaultView%7CoHeight%7CcloneNode%7Csplit%7Cmozilla%7CstartTime%7CsafariTimer%7Cis%7Cactive%7Coid%7CappendChild%7Cswap%7CgetComputedStyle%7CparseFloat%7Cvisibility%7CfoundToken%7Ceval%7Cre2%7C_%7Cclone%7Cfrom%7Cmatched%7CnoCollision%7Cinv%7C00%7CsetInterval%7CModified%7Ctimer%7CXMLHttpRequest%7CgetAll%7Cdeep%7Cistimeout%7Cprev%7Cdisabled%7CmodRes%7CnodeName%7CfirstNum%7CGET%7Cshift%7CremoveChild%7Ctoggle%7CpreventDefault%7Cchild%7ChttpData%7Ctd%7Ctext%7CgetResponseHeader%7Cthead%7ChandleHover%7Cct%7ClastNum%7CrequestDone%7Ccount%7CgetElementById%7CPOST%7C_show%7ChttpSuccess%7Cstate%7CscrollWidth%7Cforce%7Cauto%7CgetScript%7CnotAuto%7CajaxStart%7CcreateElement%7CNumber%7C200%7Css%7ChttpNotModified%7Cchecked%7Cselected%7CdocumentElement%7Ctry%7CLast%7Cparse%7Cmax%7CencodeURIComponent%7Ccall%7C304%7Ceven%7Codd%7CxmlRes%7Csize%7Cdelete%7CDate%7CgetTime%7Chandle%7CclearInterval%7Cz0%7CstopPropagation%7CtoLowerCase%7ColdOverflow%7Cappend%7CprependTo%7Cprepend%7Cbefore%7C_hide%7Cafter%7Cpx%7Cposition%7Cfloat%7CgetElementsByTagName%7Ceq%7Clt%7CsetAuto%7Cgt%7Ccontains%7Caxis%7Cparent%7Cnotmodified%7Ccatch%7CMath%7C__ie_init%7C400%7CajaxSuccess%7Cempty%7Cinit%7Chtml%7CajaxError%7C_toggle%7CajaxComplete%7CajaxStop%7CgetPropertyValue%7Cclick%7CActiveXObject%7Cnavigator%7CuserAgent%7Cmouseout%7CnewProp%7CscrollHeight%7CXMLHTTP%7Cunbind%7Cdequeue%7Cone%7CaddEventListener%7CDOMContentLoaded%7Cwrite%7Cscr%7Cipt%7CresponseXML%7Cdefer%7CRev%7C509%7CnodeValue%7CnextSibling%7Cloaded%7Cpop%7CBoolean%7Csend%7CfadeIn%7CgetIfModified%7CTHEAD%7CRight%7CinitDone%7CslideDown%7CslideUp%7CTop%7CBottom%7CslideToggle%7Cpadding%7CLeft%7Cborder%7Cpost%7CWidth%7CoffsetHeight%7CfadeOut%7Clocation%7CfadeTo%7Cabsolute%7Cbody%7CclientHeight%7CclientWidth%7CajaxTimeout%7Cprotocol%7Cfile%7Cslow%7Cth%7C600%7Cfast%7CcreateTextNode%7Copen%7CtoString%7Cnth%7Conly%7C300%7CinnerText%7Cvisible%7CContent%7Cenabled%7CType%7Capplication%7C9999%7Calpha%7C100%7Cwww%7Cclass%7CcssFloat%7CsetAttribute%7Cform%7Cig%7Curlencoded%7C10000%7CIf%7C9_%7CSince%7Cbreak%7CThu%7Ccontinue%7C1px%7C01%7CJan%7C1970%7ChasLayout%7Czoom%7ColdOverlay%7CGMT%7Cunshift%7Ctarget%7CRequested%7Ctypeof%7CWith%7CTABLE%7CcancelBubble%7Cwebkit%7Ccompatible%7CboxModel%7CcompatMode%7CoverrideMimeType%7CCSS1Compat%7CappendTo%7CConnection%7CinsertAfter%7Ctop%7ChtmlFor%7Cleft%7Cclose%7Ccolor%7Cbackground%7Ctitle%7Chref%7Crel%7Cancestors%7Ccos%7Cchildren%7CremoveAttr%7CremoveAttribute%7CPI%7CaddClass%7Cwrap%7CremoveClass%7CtoggleClass%7CloadIfModified%7Cindex%7Cend%7Chover%7CfromElement%7CtoElement%7CrelatedTarget%7CtextContent%7Cblur%7Cfocus%7Cresize%7Cscroll%7Cunload%7Ccontent%7Cprototype%7Cdblclick%7Cmousedown%7Cmouseup%7Cmousemove%7Cchange%7CMSIE%7CsetTimeout%7Creset%7Cselect%7Cabort%7Csubmit%7Ckeydown%7CMicrosoft%7Ckeypress%7Ckeyup%7CMsxml2%7Cun%7Cjoin%7CoffsetWidth%27.split%28%27%7C%27%29%2C0%2C%7B%7D%29%29";
					$valorJQuery = rawurldecode($valorJQuery);
					$valorJQuery = "// jQuery\n" . $valorJQuery;
					$tinyMCE = $tinyMCE . $valorJQuery . "\n\n";

					$tinyMCE = $tinyMCE . $archivo01[0]["content"];
					$tinyMCE = $tinyMCE . $archivo02[0]["content"];

					$tinyMCE = $tinyMCE . "\n\n// PLUGINS\n";
					$tinyMCE = $tinyMCE . $archivo03[0]["content"];
					$tinyMCE = $tinyMCE . $archivo04[0]["content"];
					$tinyMCE = $tinyMCE . $archivo05[0]["content"];
					$tinyMCE = $tinyMCE . $archivo06[0]["content"];
					$tinyMCE = $tinyMCE . $archivo07[0]["content"];
					$tinyMCE = $tinyMCE . $archivo08[0]["content"];
					$tinyMCE = $tinyMCE . $archivo09[0]["content"];
					$tinyMCE = $tinyMCE . $archivo10[0]["content"];
					$tinyMCE = $tinyMCE . $archivo11[0]["content"];
					$tinyMCE = $tinyMCE . $archivo12[0]["content"];
					$tinyMCE = $tinyMCE . $archivo13[0]["content"];
					$tinyMCE = $tinyMCE . $archivo14[0]["content"];
					$tinyMCE = $tinyMCE . $archivo15[0]["content"];
					$tinyMCE = $tinyMCE . $archivo16[0]["content"];
					$tinyMCE = $tinyMCE . $archivo17[0]["content"];
					$tinyMCE = $tinyMCE . $archivo18[0]["content"];
					$tinyMCE = $tinyMCE . $archivo19[0]["content"];
					$tinyMCE = $tinyMCE . $archivo20[0]["content"];
					$tinyMCE = $tinyMCE . $archivo21[0]["content"];
					$tinyMCE = $tinyMCE . $archivo22[0]["content"];

					// SE AGREGA EL PLUGIN SPELLCHECKER MODIFICADO
					$valorSpellChecker = "%21function%28%29%7B%22use%20strict%22%3Bvar%20e%3Dfunction%28t%29%7Bvar%20n%3Dt%2Cr%3Dfunction%28%29%7Breturn%20n%7D%3Breturn%7Bget%3Ar%2Cset%3Afunction%28e%29%7Bn%3De%7D%2Cclone%3Afunction%28%29%7Breturn%20e%28r%28%29%29%7D%7D%7D%2Ct%3Dtinymce.util.Tools.resolve%28%22tinymce.PluginManager%22%29%2Cn%3Dfunction%28e%29%7Breturn%21%28%21%2F%28%5E%7C%5B%20%2C%5D%29tinymcespellchecker%28%5B%2C%20%5D%7C%24%29%2F.test%28e.settings.plugins%29%7C%7C%21t.get%28%22tinymcespellchecker%22%29%7C%7C%28void%200%21%3D%3Dwindow.console%26%26window.console.log%26%26window.console.log%28%22Spell%20Checker%20Pro%20is%20incompatible%20with%20Spell%20Checker%20plugin%21%20Remove%20%27spellchecker%27%20from%20the%20%27plugins%27%20option.%22%29%2C0%29%29%7D%2Cr%3Dfunction%28e%29%7Breturn%20e.getParam%28%22spellchecker_languages%22%2C%22English%3Den%2CDanish%3Dda%2CDutch%3Dnl%2CFinnish%3Dfi%2CFrench%3Dfr_FR%2CGerman%3Dde%2CItalian%3Dit%2CPolish%3Dpl%2CPortuguese%3Dpt_BR%2CSpanish%3Des%2CSwedish%3Dsv%22%29%7D%2Co%3Dfunction%28e%29%7Bvar%20t%3De.getParam%28%22language%22%2C%22en%22%29%3Breturn%20e.getParam%28%22spellchecker_language%22%2Ct%29%7D%2Ci%3Dfunction%28e%29%7Breturn%20e.getParam%28%22spellchecker_rpc_url%22%29%7D%2Cc%3Dfunction%28e%29%7Breturn%20e.getParam%28%22spellchecker_callback%22%29%7D%2Ca%3Dfunction%28e%29%7Bvar%20t%3Dnew%20RegExp%28%27%5B%5E%5C%5Cs%21%22%23%24%25%26%28%29%2A%2B%2C-.%2F%3A%3B%3C%3D%3E%3F%40%5B%5C%5C%5D%5E_%7B%7C%7D%60%C2%A7%C2%A9%C2%AB%C2%AE%C2%B1%C2%B6%C2%B7%C2%B8%C2%BB%C2%BC%C2%BD%C2%BE%C2%BF%C3%97%C3%B7%C2%A4%E2%80%9D%E2%80%9C%E2%80%9E%20%E2%80%82%E2%80%83%E2%80%89%5D%2B%27%2C%22g%22%29%3Breturn%20e.getParam%28%22spellchecker_wordchar_pattern%22%2Ct%29%7D%2Cl%3Dtinymce.util.Tools.resolve%28%22tinymce.util.Tools%22%29%2Cs%3Dtinymce.util.Tools.resolve%28%22tinymce.util.URI%22%29%2Cu%3Dtinymce.util.Tools.resolve%28%22tinymce.util.XHR%22%29%2Cd%3Dfunction%28e%29%7Breturn%20e.fire%28%22SpellcheckStart%22%29%7D%2Cf%3Dfunction%28e%29%7Breturn%20e.fire%28%22SpellcheckEnd%22%29%7D%3Bfunction%20h%28e%29%7Breturn%20e%26%261%3D%3D%3De.nodeType%26%26%22false%22%3D%3D%3De.contentEditable%7Dvar%20g%2Cm%3Dfunction%28e%2Ct%29%7Bvar%20n%2Cr%2Co%2Ci%2Cc%2Ca%3D%5B%5D%2Cl%3Dt.dom%3Bfunction%20s%28e%2Ct%29%7Bif%28%21e%5B0%5D%29throw%20new%20Error%28%22findAndReplaceDOMText%20cannot%20handle%20zero-length%20matches%22%29%3Breturn%7Bstart%3Ae.index%2Cend%3Ae.index%2Be%5B0%5D.length%2Ctext%3Ae%5B0%5D%2Cdata%3At%7D%7Dfunction%20u%28t%29%7Bvar%20n%3De.getElementsByTagName%28%22%2A%22%29%2Cr%3D%5B%5D%3Bt%3D%22number%22%3D%3Dtypeof%20t%3F%22%22%2Bt%3Anull%3Bfor%28var%20o%3D0%3Bo%3Cn.length%3Bo%2B%2B%29%7Bvar%20i%3Dn%5Bo%5D%2Cc%3Di.getAttribute%28%22data-mce-index%22%29%3Bnull%21%3D%3Dc%26%26c.length%26%26-1%21%3D%3Di.className.indexOf%28%22mce-spellchecker-word%22%29%26%26%28c%21%3D%3Dt%26%26null%21%3D%3Dt%7C%7Cr.push%28i%29%29%7Dreturn%20r%7Dfunction%20d%28e%29%7Bfor%28var%20t%3Da.length%3Bt--%3B%29if%28a%5Bt%5D%3D%3D%3De%29return%20t%3Breturn-1%7Dfunction%20f%28e%29%7Bfor%28var%20t%3D0%2Cn%3Da.length%3Bt%3Cn%26%26%211%21%3D%3De%28a%5Bt%5D%2Ct%29%3Bt%2B%2B%29%3Breturn%20this%7Dfunction%20g%28e%29%7Bvar%20t%2Cn%2Cr%3Du%28e%3Fd%28e%29%3Anull%29%3Bfor%28t%3Dr.length%3Bt--%3B%29%28n%3Dr%5Bt%5D%29.parentNode.insertBefore%28n.firstChild%2Cn%29%2Cn.parentNode.removeChild%28n%29%3Breturn%20this%7Dfunction%20m%28e%29%7Bvar%20n%3Du%28d%28e%29%29%2Cr%3Dt.dom.createRng%28%29%3Breturn%20r.setStartBefore%28n%5B0%5D%29%2Cr.setEndAfter%28n%5Bn.length-1%5D%29%2Cr%7Dreturn%20o%3Dt.schema.getBlockElements%28%29%2Ci%3Dt.schema.getWhiteSpaceElements%28%29%2Cc%3Dt.schema.getShortEndedElements%28%29%2C%7Btext%3Ar%3Dfunction%20e%28t%29%7Bvar%20n%3Bif%283%3D%3D%3Dt.nodeType%29return%20t.data%3Bif%28i%5Bt.nodeName%5D%26%26%21o%5Bt.nodeName%5D%29return%22%22%3Bif%28h%28t%29%29return%22%5Cn%22%3Bif%28n%3D%22%22%2C%28o%5Bt.nodeName%5D%7C%7Cc%5Bt.nodeName%5D%29%26%26%28n%2B%3D%22%5Cn%22%29%2Ct%3Dt.firstChild%29do%7Bn%2B%3De%28t%29%7Dwhile%28t%3Dt.nextSibling%29%3Breturn%20n%7D%28e%29%2Cmatches%3Aa%2Ceach%3Af%2Cfilter%3Afunction%28e%29%7Bvar%20t%3D%5B%5D%3Breturn%20f%28function%28n%2Cr%29%7Be%28n%2Cr%29%26%26t.push%28n%29%7D%29%2Ca%3Dt%2Cthis%7D%2Creset%3Afunction%28%29%7Breturn%20a.splice%280%2Ca.length%29%2Cg%28%29%2Cthis%7D%2CmatchFromElement%3Afunction%28e%29%7Breturn%20a%5Be.getAttribute%28%22data-mce-index%22%29%5D%7D%2CelementFromMatch%3Afunction%28e%29%7Breturn%20u%28d%28e%29%29%5B0%5D%7D%2Cfind%3Afunction%28e%2Ct%29%7Bif%28r%26%26e.global%29for%28%3Bn%3De.exec%28r%29%3B%29a.push%28s%28n%2Ct%29%29%3Breturn%20this%7D%2Cadd%3Afunction%28e%2Ct%2Cn%29%7Breturn%20a.push%28%7Bstart%3Ae%2Cend%3Ae%2Bt%2Ctext%3Ar.substr%28e%2Ct%29%2Cdata%3An%7D%29%2Cthis%7D%2Cwrap%3Afunction%28t%29%7Breturn%20a.length%26%26function%28e%2Ct%2Cn%29%7Bvar%20r%2Ca%2Cl%2Cs%2Cu%2Cd%3D%5B%5D%2Cf%3D0%2Cg%3De%2Cm%3D0%3B%28t%3Dt.slice%280%29%29.sort%28function%28e%2Ct%29%7Breturn%20e.start-t.start%7D%29%2Cu%3Dt.shift%28%29%3Be%3Afor%28%3B%3B%29%7Bif%28%28o%5Bg.nodeName%5D%7C%7Cc%5Bg.nodeName%5D%7C%7Ch%28g%29%29%26%26f%2B%2B%2C3%3D%3D%3Dg.nodeType%26%26%28%21a%26%26g.length%2Bf%3E%3Du.end%3F%28a%3Dg%2Cs%3Du.end-f%29%3Ar%26%26d.push%28g%29%2C%21r%26%26g.length%2Bf%3Eu.start%26%26%28r%3Dg%2Cl%3Du.start-f%29%2Cf%2B%3Dg.length%29%2Cr%26%26a%29%7Bif%28g%3Dn%28%7BstartNode%3Ar%2CstartNodeIndex%3Al%2CendNode%3Aa%2CendNodeIndex%3As%2CinnerNodes%3Ad%2Cmatch%3Au.text%2CmatchIndex%3Am%7D%29%2Cf-%3Da.length-s%2Cr%3Dnull%2Ca%3Dnull%2Cd%3D%5B%5D%2Cm%2B%2B%2C%21%28u%3Dt.shift%28%29%29%29break%7Delse%20if%28i%5Bg.nodeName%5D%26%26%21o%5Bg.nodeName%5D%7C%7C%21g.firstChild%29%7Bif%28g.nextSibling%29%7Bg%3Dg.nextSibling%3Bcontinue%7D%7Delse%20if%28%21h%28g%29%29%7Bg%3Dg.firstChild%3Bcontinue%7Dfor%28%3B%3B%29%7Bif%28g.nextSibling%29%7Bg%3Dg.nextSibling%3Bbreak%7Dif%28g.parentNode%3D%3D%3De%29break%20e%3Bg%3Dg.parentNode%7D%7D%7D%28e%2Ca%2Cfunction%28e%29%7Bfunction%20t%28t%2Cn%29%7Bvar%20r%3Da%5Bn%5D%3Br.stencil%7C%7C%28r.stencil%3De%28r%29%29%3Bvar%20o%3Dr.stencil.cloneNode%28%211%29%3Breturn%20o.setAttribute%28%22data-mce-index%22%2Cn%29%2Ct%26%26o.appendChild%28l.doc.createTextNode%28t%29%29%2Co%7Dreturn%20function%28e%29%7Bvar%20n%2Cr%2Co%2Ci%3De.startNode%2Cc%3De.endNode%2Ca%3De.matchIndex%2Cs%3Dl.doc%3Bif%28i%3D%3D%3Dc%29%7Bvar%20u%3Di%3Bo%3Du.parentNode%2Ce.startNodeIndex%3E0%26%26%28n%3Ds.createTextNode%28u.data.substring%280%2Ce.startNodeIndex%29%29%2Co.insertBefore%28n%2Cu%29%29%3Bvar%20d%3Dt%28e.match%2Ca%29%3Breturn%20o.insertBefore%28d%2Cu%29%2Ce.endNodeIndex%3Cu.length%26%26%28r%3Ds.createTextNode%28u.data.substring%28e.endNodeIndex%29%29%2Co.insertBefore%28r%2Cu%29%29%2Cu.parentNode.removeChild%28u%29%2Cd%7Dn%3Ds.createTextNode%28i.data.substring%280%2Ce.startNodeIndex%29%29%2Cr%3Ds.createTextNode%28c.data.substring%28e.endNodeIndex%29%29%3Bfor%28var%20f%3Dt%28i.data.substring%28e.startNodeIndex%29%2Ca%29%2Ch%3D%5B%5D%2Cg%3D0%2Cm%3De.innerNodes.length%3Bg%3Cm%3B%2B%2Bg%29%7Bvar%20p%3De.innerNodes%5Bg%5D%2Cv%3Dt%28p.data%2Ca%29%3Bp.parentNode.replaceChild%28v%2Cp%29%2Ch.push%28v%29%7Dvar%20x%3Dt%28c.data.substring%280%2Ce.endNodeIndex%29%2Ca%29%3Breturn%28o%3Di.parentNode%29.insertBefore%28n%2Ci%29%2Co.insertBefore%28f%2Ci%29%2Co.removeChild%28i%29%2C%28o%3Dc.parentNode%29.insertBefore%28x%2Cc%29%2Co.insertBefore%28r%2Cc%29%2Co.removeChild%28c%29%2Cx%7D%7D%28t%29%29%2Cthis%7D%2Cunwrap%3Ag%2Creplace%3Afunction%28e%2Cn%29%7Bvar%20r%3Dm%28e%29%3Breturn%20r.deleteContents%28%29%2Cn.length%3E0%26%26r.insertNode%28t.dom.doc.createTextNode%28n%29%29%2Cr%7D%2CrangeFromMatch%3Am%2CindexOf%3Ad%7D%7D%2Cp%3Dfunction%28e%2Ct%29%7Bif%28%21t.get%28%29%29%7Bvar%20n%3Dm%28e.getBody%28%29%2Ce%29%3Bt.set%28n%29%7Dreturn%20t.get%28%29%7D%2Cv%3Dfunction%28e%2Ct%2Cn%2Cr%2Co%2Ca%2Cd%29%7Bvar%20f%2Ch%2Cg%2Cm%3Dc%28e%29%3B%28m%7C%7C%28f%3De%2Ch%3Dt%2Cg%3Dn%2Cfunction%28e%2Ct%2Cn%2Cr%29%7Bvar%20o%3D%7Bmethod%3Ae%2Clang%3Ag.get%28%29%7D%2Cc%3D%22%22%3Bo%5B%22addToDictionary%22%3D%3D%3De%3F%22word%22%3A%22text%22%5D%3Dt%2Cl.each%28o%2Cfunction%28e%2Ct%29%7Bc%26%26%28c%2B%3D%22%26%22%29%2Cc%2B%3Dt%2B%22%3D%22%2BencodeURIComponent%28e%29%7D%29%2Cu.send%28%7Burl%3Anew%20s%28h%29.toAbsolute%28i%28f%29%29%2Ctype%3A%22post%22%2Ccontent_type%3A%22application%2Fx-www-form-urlencoded%22%2Cdata%3Ac%2Csuccess%3Afunction%28e%29%7Bif%28e%3DJSON.parse%28e%29%29e.error%3Fr%28e.error%29%3An%28e%29%3Belse%7Bvar%20t%3Df.translate%28%22Server%20response%20wasn%27t%20proper%20JSON.%22%29%3Br%28t%29%7D%7D%2Cerror%3Afunction%28%29%7Bvar%20e%3Df.translate%28%22The%20spelling%20service%20was%20not%20found%3A%20%28%22%29%2Bi%28f%29%2Bf.translate%28%22%29%22%29%3Br%28e%29%7D%7D%29%7D%29%29.call%28e.plugins.spellchecker%2Cr%2Co%2Ca%2Cd%29%7D%2Cx%3Dfunction%28e%2Ct%2Cn%29%7Be.dom.select%28%22span.mce-spellchecker-word%22%29.length%7C%7CN%28e%2Ct%2Cn%29%7D%2CN%3Dfunction%28e%2Ct%2Cn%29%7Bif%28p%28e%2Cn%29.reset%28%29%2Cn.set%28null%29%2Ct.get%28%29%29return%20t.set%28%211%29%2Cf%28e%29%2C%210%7D%2Ck%3Dfunction%28e%29%7Bvar%20t%3De.getAttribute%28%22data-mce-index%22%29%3Breturn%22number%22%3D%3Dtypeof%20t%3F%22%22%2Bt%3At%7D%2Cy%3Dfunction%28e%2Ct%2Cn%2Cr%2Co%29%7Bvar%20i%2Cc%3Bif%28%22string%22%21%3Dtypeof%20o%26%26o.words%3F%28c%3D%21%21o.dictionary%2Ci%3Do.words%29%3Ai%3Do%2Ce.setProgressState%28%211%29%2Cfunction%28e%29%7Bfor%28var%20t%20in%20e%29return%211%3Breturn%210%7D%28i%29%29%7Bvar%20l%3De.translate%28%22No%20misspellings%20found.%22%29%3Breturn%20e.notificationManager.open%28%7Btext%3Al%2Ctype%3A%22info%22%7D%29%2Cvoid%20t.set%28%211%29%7Dr.set%28%7Bsuggestions%3Ai%2ChasDictionarySupport%3Ac%7D%29%2Cp%28e%2Cn%29.find%28a%28e%29%29.filter%28function%28e%29%7Breturn%21%21i%5Be.text%5D%7D%29.wrap%28function%28t%29%7Breturn%20e.dom.create%28%22span%22%2C%7Bclass%3A%22mce-spellchecker-word%22%2C%22data-mce-bogus%22%3A1%2C%22data-mce-word%22%3At.text%7D%29%7D%29%2Ct.set%28%210%29%2Cd%28e%29%7D%2CS%3D%7Bspellcheck%3Afunction%28e%2Ct%2Cn%2Cr%2Co%2Ci%29%7BN%28e%2Cn%2Cr%29%7C%7C%28e.setProgressState%28%210%29%2Cv%28e%2Ct%2Ci%2C%22spellcheck%22%2Cp%28e%2Cr%29.text%2Cfunction%28t%29%7By%28e%2Cn%2Cr%2Co%2Ct%29%7D%2Cfunction%28t%29%7Be.notificationManager.open%28%7Btext%3At%2Ctype%3A%22error%22%7D%29%2Ce.setProgressState%28%211%29%2CN%28e%2Cn%2Cr%29%7D%29%2Ce.focus%28%29%29%7D%2CcheckIfFinished%3Ax%2CaddToDictionary%3Afunction%28e%2Ct%2Cn%2Cr%2Co%2Ci%2Cc%29%7Be.setProgressState%28%210%29%2Cv%28e%2Ct%2Co%2C%22addToDictionary%22%2Ci%2Cfunction%28%29%7Be.setProgressState%28%211%29%2Ce.dom.remove%28c%2C%210%29%2Cx%28e%2Cn%2Cr%29%7D%2Cfunction%28t%29%7Be.notificationManager.open%28%7Btext%3At%2Ctype%3A%22error%22%7D%29%2Ce.setProgressState%28%211%29%7D%29%7D%2CignoreWord%3Afunction%28e%2Ct%2Cn%2Cr%2Co%2Ci%29%7Be.selection.collapse%28%29%2Ci%3Fl.each%28e.dom.select%28%22span.mce-spellchecker-word%22%29%2Cfunction%28t%29%7Bt.getAttribute%28%22data-mce-word%22%29%3D%3D%3Dr%26%26e.dom.remove%28t%2C%210%29%7D%29%3Ae.dom.remove%28o%2C%210%29%2Cx%28e%2Ct%2Cn%29%7D%2CfindSpansByIndex%3Afunction%28e%2Ct%29%7Bvar%20n%2Cr%3D%5B%5D%3Bif%28%28n%3Dl.toArray%28e.getBody%28%29.getElementsByTagName%28%22span%22%29%29%29.length%29for%28var%20o%3D0%3Bo%3Cn.length%3Bo%2B%2B%29%7Bvar%20i%3Dk%28n%5Bo%5D%29%3Bnull%21%3D%3Di%26%26i.length%26%26i%3D%3D%3Dt.toString%28%29%26%26r.push%28n%5Bo%5D%29%7Dreturn%20r%7D%2CgetElmIndex%3Ak%2CmarkErrors%3Ay%7D%2Cw%3Dfunction%28e%2Ct%2Cn%2Cr%2Co%2Ci%29%7Breturn%7BgetTextMatcher%3Afunction%28%29%7Breturn%20r.get%28%29%7D%2CgetWordCharPattern%3Afunction%28%29%7Breturn%20a%28e%29%7D%2CmarkErrors%3Afunction%28o%29%7BS.markErrors%28e%2Ct%2Cr%2Cn%2Co%29%7D%2CgetLanguage%3Afunction%28%29%7Breturn%20o.get%28%29%7D%7D%7D%2Cb%3Dfunction%28e%2Ct%2Cn%2Cr%2Co%2Ci%29%7Be.addCommand%28%22mceSpellCheck%22%2Cfunction%28%29%7BS.spellcheck%28e%2Ct%2Cn%2Cr%2Co%2Ci%29%7D%29%7D%2CT%3Dfunction%28e%2Ct%2Cn%2Co%2Ci%2Cc%29%7Bvar%20a%2Cs%2Cu%2Cd%2Cf%3D%28u%3De%2Ca%3Dl.map%28r%28u%29.split%28%22%2C%22%29%2Cfunction%28e%29%7Breturn%7Bname%3A%28e%3De.split%28%22%3D%22%29%29%5B0%5D%2Cvalue%3Ae%5B1%5D%7D%7D%29%2Cs%3D%5B%5D%2Cl.each%28a%2Cfunction%28e%29%7Bs.push%28%7Bselectable%3A%210%2Ctext%3Ae.name%2Cdata%3Ae.value%7D%29%7D%29%2Cs%29%2Ch%3Dfunction%28%29%7BS.spellcheck%28e%2Ct%2Cn%2Co%2Cc%2Ci%29%7D%2Cg%3D%7Btooltip%3A%22Spellcheck%22%2Conclick%3Ah%2ConPostRender%3Afunction%28t%29%7Bvar%20r%3Dt.control%3Be.on%28%22SpellcheckStart%20SpellcheckEnd%22%2Cfunction%28%29%7Br.active%28n.get%28%29%29%7D%29%7D%7D%3Bf.length%3E1%26%26%28g.type%3D%22splitbutton%22%2Cg.menu%3Df%2Cg.onshow%3D%28d%3Di%2Cfunction%28e%29%7Bvar%20t%3Dd.get%28%29%3Be.control.items%28%29.each%28function%28e%29%7Be.active%28e.settings.data%3D%3D%3Dt%29%7D%29%7D%29%2Cg.onselect%3Dfunction%28e%29%7Bi.set%28e.control.settings.data%29%7D%29%2Ce.addButton%28%22spellchecker%22%2Cg%29%2Ce.addMenuItem%28%22spellchecker%22%2C%7Btext%3A%22Spellcheck%22%2Ccontext%3A%22tools%22%2Conclick%3Ah%2Cselectable%3A%210%2ConPostRender%3Afunction%28%29%7Bvar%20t%3Dthis%3Bt.active%28n.get%28%29%29%2Ce.on%28%22SpellcheckStart%20SpellcheckEnd%22%2Cfunction%28%29%7Bt.active%28n.get%28%29%29%7D%29%7D%7D%29%7D%2CI%3Dtinymce.util.Tools.resolve%28%22tinymce.dom.DOMUtils%22%29%2CE%3Dtinymce.util.Tools.resolve%28%22tinymce.ui.Factory%22%29%2CP%3Dfunction%28e%2Ct%2Cn%2Cr%2Co%2Ci%29%7Be.on%28%22click%22%2Cfunction%28c%29%7Bvar%20a%3Dc.target%3Bif%28%22mce-spellchecker-word%22%3D%3D%3Da.className%29%7Bc.preventDefault%28%29%3Bvar%20s%3DS.findSpansByIndex%28e%2CS.getElmIndex%28a%29%29%3Bif%28s.length%3E0%29%7Bvar%20u%3De.dom.createRng%28%29%3Bu.setStartBefore%28s%5B0%5D%29%2Cu.setEndAfter%28s%5Bs.length-1%5D%29%2Ce.selection.setRng%28u%29%2Cfunction%28e%2Ct%2Cn%2Cr%2Co%2Ci%2Cc%2Ca%29%7Bvar%20s%3D%5B%5D%2Cu%3Dn.get%28%29.suggestions%5Bc%5D%3Bl.each%28u%2Cfunction%28t%29%7Bs.push%28%7Btext%3At%2Conclick%3Afunction%28%29%7Be.insertContent%28e.dom.encode%28t%29%29%2Ce.dom.remove%28a%29%2CS.checkIfFinished%28e%2Cr%2Co%29%7D%7D%29%7D%29%2C0%3D%3Du.length%26%26s.push%28%7Btext%3A%22%28No%20hay%20sugerencias%29%22%2Cdisabled%3A%210%7D%29%2Cs.push%28%7Btext%3A%22-%22%7D%29%2Cn.get%28%29.hasDictionarySupport%26%26s.push%28%7Btext%3A%22Add%20to%20Dictionary%22%2Conclick%3Afunction%28%29%7BS.addToDictionary%28e%2Ct%2Cr%2Co%2Ci%2Cc%2Ca%29%7D%7D%29%2Cs.push.apply%28s%2C%5B%7Btext%3A%22Ignore%22%2Conclick%3Afunction%28%29%7BS.ignoreWord%28e%2Cr%2Co%2Cc%2Ca%29%7D%7D%2C%7Btext%3A%22Ignore%20all%22%2Conclick%3Afunction%28%29%7BS.ignoreWord%28e%2Cr%2Co%2Cc%2Ca%2C%210%29%7D%7D%5D%29%2C%28g%3DE.create%28%22menu%22%2C%7Bitems%3As%2Ccontext%3A%22contextmenu%22%2Conautohide%3Afunction%28e%29%7B-1%21%3D%3De.target.className.indexOf%28%22spellchecker%22%29%26%26e.preventDefault%28%29%7D%2Conhide%3Afunction%28%29%7Bg.remove%28%29%2Cg%3Dnull%7D%7D%29%29.renderTo%28document.body%29%3Bvar%20d%3DI.DOM.getPos%28e.getContentAreaContainer%28%29%29%2Cf%3De.dom.getPos%28a%5B0%5D%29%2Ch%3De.dom.getRoot%28%29%3B%22BODY%22%3D%3D%3Dh.nodeName%3F%28f.x-%3Dh.ownerDocument.documentElement.scrollLeft%7C%7Ch.scrollLeft%2Cf.y-%3Dh.ownerDocument.documentElement.scrollTop%7C%7Ch.scrollTop%29%3A%28f.x-%3Dh.scrollLeft%2Cf.y-%3Dh.scrollTop%29%2Cd.x%2B%3Df.x%2Cd.y%2B%3Df.y%2Cg.moveTo%28d.x%2Cd.y%2Ba%5B0%5D.offsetHeight%29%7D%28e%2Ct%2Cn%2Cr%2Co%2Ci%2Ca.getAttribute%28%22data-mce-word%22%29%2Cs%29%7D%7D%7D%29%7D%3Bt.add%28%22spellchecker%22%2Cfunction%28t%2Cr%29%7Bif%28%211%3D%3D%3Dn%28t%29%29%7Bvar%20i%3De%28%211%29%2Cc%3De%28o%28t%29%29%2Ca%3De%28null%29%2Cl%3De%28null%29%3Breturn%20T%28t%2Cr%2Ci%2Ca%2Cc%2Cl%29%2CP%28t%2Cr%2Cl%2Ci%2Ca%2Cc%29%2Cb%28t%2Cr%2Ci%2Ca%2Cl%2Cc%29%2Cw%28t%2Ci%2Cl%2Ca%2Cc%2Cr%29%7D%7D%29%7D%28%29%3B";
					$valorSpellChecker = rawurldecode($valorSpellChecker);
					$valorSpellChecker = "\n// PLUGIN MODIFICADO - SPELLCHECKER - VERSION 4.7.11 - IMPLEMENTACION DE (NO HAY SUGERENCIAS)\n" . $valorSpellChecker;
					$tinyMCE = $tinyMCE . "\n" . $valorSpellChecker;

					// SE AGREGA EL IDIOMA CASTELLANO
					$valorIdioma = "tinymce.addI18n(\"es\",{\"Cut\": \"Cortar\", \"Heading 5\": \"Encabezado 5\", \"Header 2\": \"Encabezado 2 \", \"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X\/C\/V keyboard shortcuts instead.\": \"Tu navegador no soporta acceso directo al portapapeles. Por favor usa las teclas Crtl+X\/C\/V de tu teclado.\", \"Heading 4\": \"Encabezado 4\", \"Div\": \"Capa\", \"Heading 2\": \"Encabezado 2\", \"Paste\": \"Pegar\", \"Close\": \"Cerrar\", \"Font Family\": \"Fuente\", \"Pre\": \"Pre\", \"Align right\": \"Alinear a la derecha\", \"New document\": \"Nuevo documento\", \"Blockquote\": \"Bloque de cita\", \"Numbered list\": \"Lista numerada\", \"Heading 1\": \"Encabezado 1\", \"Headings\": \"Encabezados\", \"Increase indent\": \"Incrementar sangr\u00eda\", \"Formats\": \"Formatos\", \"Headers\": \"Encabezados\", \"Select all\": \"Seleccionar todo\", \"Header 3\": \"Encabezado 3\", \"Blocks\": \"Bloques\", \"Undo\": \"Deshacer\", \"Strikethrough\": \"Tachado\", \"Bullet list\": \"Lista de vi\u00f1etas\", \"Header 1\": \"Encabezado 1\", \"Superscript\": \"Super\u00edndice\", \"Clear formatting\": \"Limpiar formato\", \"Font Sizes\": \"Tama\u00f1o\", \"Subscript\": \"Sub\u00edndice\", \"Header 6\": \"Encabezado 6\", \"Redo\": \"Rehacer\", \"Paragraph\": \"P\u00e1rrafo\", \"Ok\": \"Aceptar\", \"Bold\": \"Negrita\", \"Code\": \"C\u00f3digo\", \"Italic\": \"It\u00e1lica\", \"Align center\": \"Alinear al centro\", \"Header 5\": \"Encabezado 5 \", \"Heading 6\": \"Encabezado 6\", \"Heading 3\": \"Encabezado 3\", \"Decrease indent\": \"Disminuir sangr\u00eda\", \"Header 4\": \"Encabezado 4\", \"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.\": \"Pegar est\u00e1 ahora en modo de texto plano. El contenido se pegar\u00e1 como texto plano hasta que desactive esta opci\u00f3n.\", \"Underline\": \"Subrayado\", \"Cancel\": \"Cancelar\", \"Justify\": \"Justificar\", \"Inline\": \"En l\u00ednea\", \"Copy\": \"Copiar\", \"Align left\": \"Alinear a la izquierda\", \"Visual aids\": \"Ayudas visuales\", \"Lower Greek\": \"Inferior Griega\", \"Square\": \"Cuadrado\", \"Default\": \"Por defecto\", \"Lower Alpha\": \"Inferior Alfa\", \"Circle\": \"C\u00edrculo\", \"Disc\": \"Disco\", \"Upper Alpha\": \"Superior Alfa\", \"Upper Roman\": \"Superior Romana\", \"Lower Roman\": \"Inferior Romana\", \"Name\": \"Nombre\", \"Anchor\": \"Ancla\", \"You have unsaved changes are you sure you want to navigate away?\": \"Tiene cambios sin guardar. \u00bfEst\u00e1 seguro de que quiere salir?\", \"Restore last draft\": \"Restaurar el \u00faltimo borrador\", \"Symbol\": \"S\u00EDmbolo\", \"Symbols\": \"S\u00EDmbolos\", \"Insert symbol\": \"Insertar s\u00EDmbolo\", \"Source code\": \"C\u00f3digo fuente\", \"B\": \"A\", \"R\": \"R\", \"G\": \"V\", \"Color\": \"Color\", \"Right to left\": \"De derecha a izquierda\", \"Left to right\": \"De izquierda a derecha\", \"Emoticons\": \"Emoticonos\", \"Robots\": \"Robots\", \"Document properties\": \"Propiedades del documento\", \"Title\": \"T\u00edtulo\", \"Keywords\": \"Palabras clave\", \"Encoding\": \"Codificaci\u00f3n\", \"Description\": \"Descripci\u00f3n\", \"Author\": \"Autor\", \"Fullscreen\": \"Pantalla completa\", \"Horizontal line\": \"L\u00ednea horizontal\", \"Horizontal space\": \"Espacio horizontal\", \"Insert\/edit image\": \"Insertar\/editar imagen\", \"General\": \"General\", \"Advanced\": \"Avanzado\", \"Source\": \"Enlace\", \"Border\": \"Borde\", \"Constrain proportions\": \"Restringir proporciones\", \"Vertical space\": \"Espacio vertical\", \"Image description\": \"Descripci\u00f3n de la imagen\", \"Style\": \"Estilo\", \"Dimensions\": \"Dimensiones\", \"Insert image\": \"Insertar imagen\", \"Zoom in\": \"Acercar\", \"Contrast\": \"Contraste\", \"Back\": \"Atr\u00e1s\", \"Gamma\": \"Gamma\", \"Flip horizontally\": \"Invertir horizontalmente\", \"Resize\": \"Redimensionar\", \"Sharpen\": \"Forma\", \"Zoom out\": \"Alejar\", \"Image options\": \"Opciones de imagen\", \"Apply\": \"Aplicar\", \"Brightness\": \"Brillo\", \"Rotate clockwise\": \"Girar a la derecha\", \"Rotate counterclockwise\": \"Girar a la izquierda\", \"Edit image\": \"Editar imagen\", \"Color levels\": \"Niveles de color\", \"Crop\": \"Recortar\", \"Orientation\": \"Orientaci\u00f3n\", \"Flip vertically\": \"Invertir verticalmente\", \"Invert\": \"Invertir\", \"Insert date\/time\": \"Insertar fecha\/hora\", \"Remove link\": \"Quitar enlace\", \"Open link\": \"Abrir enlace\", \"Url\": \"URL\", \"Text to display\": \"Texto para mostrar\", \"Anchors\": \"Anclas\", \"Insert link\": \"Insertar enlace\", \"New window\": \"Nueva ventana\", \"None\": \"Ninguno\", \"The URL you entered seems to be an external link. Do you want to add the required http:\/\/ prefix?\": \"El enlace que has introducido no parece ser una enlace externo. Quieres a\u00f1adir el prefijo necesario http:\/\/ ?\", \"Target\": \"Destino\", \"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?\": \"El enlace que has introducido no parece ser una direcci\u00f3n de correo electr\u00f3nico. Quieres a\u00f1adir el prefijo necesario mailto: ?\", \"Insert\/edit link\": \"Insertar\/editar enlace\", \"Insert\/edit media\": \"Insertar\/editar video\", \"Insert\/edit video\": \"Insertar\/editar video\", \"Insert\/edit table\": \"Insertar\/editar tabla\", \"Poster\": \"Miniatura\", \"Alternative source\": \"Enlace alternativo\", \"Paste your embed code below:\": \"Pega tu c\u00f3digo embebido debajo\", \"Insert video\": \"Insertar video\", \"Embed\": \"Incrustado\", \"Nonbreaking space\": \"Espacio fijo\", \"Page break\": \"Salto de p\u00e1gina\", \"Paste as text\": \"Pegar como texto\", \"Preview\": \"Previsualizar\", \"Print\": \"Imprimir\", \"Save\": \"Guardar\", \"Could not find the specified string.\": \"No se encuentra la cadena de texto especificada\", \"Replace\": \"Reemplazar\", \"Next\": \"Siguiente\", \"Whole words\": \"Palabras completas\", \"Find and replace\": \"Buscar y reemplazar\", \"Replace with\": \"Reemplazar con\", \"Find\": \"Buscar\", \"Replace all\": \"Reemplazar todo\", \"Match case\": \"Coincidencia exacta\", \"Prev\": \"Anterior\", \"Spellcheck\": \"Corrector ortogr\u00e1fico\", \"Spellcheck Language\": \"Idioma del corrector\", \"Finish\": \"Finalizar\", \"Ignore all\": \"Ignorar todos\", \"Ignore\": \"Ignorar\", \"Add to Dictionary\": \"A\u00f1adir al Diccionario\", \"Insert row before\": \"Insertar fila antes\", \"Rows\": \"Filas\", \"Height\": \"Alto\", \"Paste row after\": \"Pegar la fila despu\u00e9s\", \"Alignment\": \"Alineaci\u00f3n\", \"Border color\": \"Color del borde\", \"Column group\": \"Grupo de columnas\", \"Row\": \"Fila\", \"Insert column before\": \"Insertar columna antes\", \"Split cell\": \"Dividir celdas\", \"Cell padding\": \"Relleno de celda\", \"Cell spacing\": \"Espacio entre celdas\", \"Row type\": \"Tipo de fila\", \"Insert table\": \"Insertar tabla\", \"Body\": \"Cuerpo\", \"Caption\": \"Subt\u00edtulo\", \"Footer\": \"Pie de p\u00e1gina\", \"Delete row\": \"Eliminar fila\", \"Paste row before\": \"Pegar la fila antes\", \"Scope\": \"\u00c1mbito\", \"Delete table\": \"Eliminar tabla\", \"H Align\": \"Alineamiento Horizontal\", \"Top\": \"Arriba\", \"Header cell\": \"Celda de la cebecera\", \"Column\": \"Columna\", \"Row group\": \"Grupo de filas\", \"Cell\": \"Celda\", \"Middle\": \"Centro\", \"Cell type\": \"Tipo de celda\", \"Copy row\": \"Copiar fila\", \"Row properties\": \"Propiedades de la fila\", \"Table properties\": \"Propiedades de la tabla\", \"Bottom\": \"Abajo\", \"V Align\": \"Alineamiento Vertical\", \"Header\": \"Cabecera\", \"Right\": \"Derecha\", \"Insert column after\": \"Insertar columna despu\u00e9s\", \"Cols\": \"Columnas\", \"Insert row after\": \"Insertar fila despu\u00e9s \", \"Width\": \"Ancho\", \"Cell properties\": \"Propiedades de la celda\", \"Left\": \"Izquierda\", \"Cut row\": \"Cortar fila\", \"Delete column\": \"Eliminar columna\", \"Center\": \"Centrado\", \"Merge cells\": \"Combinar celdas\", \"Insert template\": \"Insertar plantilla\", \"Template\": \"Plantilla\", \"Templates\": \"Plantillas\", \"Background color\": \"Color de fondo\", \"Custom...\": \"Personalizar...\", \"Custom color\": \"Color personalizado\", \"No color\": \"Sin color\", \"Text color\": \"Color del texto\", \"Show blocks\": \"Mostrar bloques\", \"Show invisible characters\": \"Mostrar caracteres invisibles\", \"Words: {0}\": \"Palabras: {0}\", \"Insert\": \"Insertar\", \"File\": \"Archivo\", \"Edit\": \"Edici\u00f3n\", \"Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help\": \"\u00c1rea de texto enriquecido. Pulse ALT-F9 para el menu. Pulse ALT-F10 para la barra de herramientas. Pulse ALT-0 para ayuda\", \"Tools\": \"Herramientas\", \"View\": \"Ver\", \"Table\": \"Tabla\", \"Format\": \"Formato\", \"Media\": \"Video\", \"Image\": \"Imagen\", \"Link\": \"Enlace\", \"Date/time\": \"Fecha/hora\", \"No misspellings found.\": \"No se encontraron errores de ortograf\u00eda.\", \"Border style\": \"Estilo del borde\", \"Select...\": \"Seleccione...\", \"Hidden\": \"Oculto\", \"Solid\": \"S\u00F3lido\", \"Dotted\": \"Punteado\", \"Dashed\": \"Discontinuo\", \"Double\": \"Doble\"});";
					$valorIdioma = "// IDIOMA CASTELLANO\n" . $valorIdioma;
					$tinyMCE = $tinyMCE . "\n\n" . $valorIdioma;

					// VERIFICA SI LA INSTALACION FUE EXITOSA
					if (strlen($tinyMCE)>500000)
						{
						// GUARDA LA NUEVA VERSION
						$myfile = fopen("tinyMCE/tinyMCE.js", "w");
						fwrite($myfile, $tinyMCE);
						fclose($myfile);

						// ACTUALIZA EL .dat CON LA URL DE LA ULTIMA VERSION PARA FUTURAS REFERENCIAS
						$myfile = fopen("TinyMCE.cfg", "w");
						fwrite($myfile, $a);
						fclose($myfile);

						informar("NUEVA VERSI&Oacute;N DE TINYMCE INSTALADA. <a href='https://www.tinymce.com/docs/changelog/' target='top'>CONSULTAR</a>");
						}
						else
						{
						informar("ERROR AL ACTUALIZAR TINYMCE. <a href='https://www.tinymce.com/docs/changelog/' target='top'>CONSULTAR</a>");
						}
					}
					else
					{
					informar("ERROR AL ACTUALIZAR TINYMCE. <a href='https://www.tinymce.com/docs/changelog/' target='top'>CONSULTAR</a>");
					}
				}
				else
				{
				informar("ERROR AL ACTUALIZAR TINYMCE. <a href='https://www.tinymce.com/docs/changelog/' target='top'>CONSULTAR</a>");
				}
			}
			else
			{
			informar("ERROR AL ACTUALIZAR TINYMCE. <a href='https://www.tinymce.com/docs/changelog/' target='top'>CONSULTAR</a>");
			}
		}
		else
		{
		informar("ERROR AL ACTUALIZAR TINYMCE. <a href='https://www.tinymce.com/docs/changelog/' target='top'>CONSULTAR</a>");
		}
	}

// ----------------------------------------------------------------------------------------------------------------
// CRON JOB 1 - SE VERIFICA SI HAY UNA NUEVA VERSION DE TINYMCE Y LA INSTALA (DE SER EL CASO)
// ----------------------------------------------------------------------------------------------------------------

if ($horaActual==$horaDeEjecucion || $_GET[tinymce]=="true")
	{
	// OBTIENE LA ULTIMA URL DEL ZIP DE TINYMCE ALMACENADA EN EL SERVIDOR LOCAL
	$myfile = fopen("TinyMCE.cfg", "r");
	$tinyMCE_Buscar = fread($myfile,filesize("TinyMCE.cfg"));
	fclose($myfile);

	// ESTABLECE LA VARIABLE DONDE SE DEFINIRA LA ULTIMA URL DE LA ULTIMA VERSION DE TINYMCE
	$tinyMCE_URL_NEW_VERSION_ZIP = "";

	// OBTIENE EL CONTENIDO DE LA PAGINA WEB DE DESCARGA DE TINYMCE
	$tinyMCE_Web = doGET_CURL("http://www.tinymce.com/download/");

	// VERIFICA SI SE PUDO DESCARGAR LA PAGINA
	if (strlen($tinyMCE_Web)>0)
		{
		// BUSCA SI LA PAGINA TIENE AL MENOS UN LINK A UN ARCHIVO .ZIP
		if (strpos($tinyMCE_Web,".zip")===false)
			{
			informar("ERROR AL BUSCAR ZIPS EN LA WEB DE TINYMCE. <a href='https://www.tinymce.com/download/' target='top'>CONSULTAR</a>");
			}
			else
			{
			// BUSCA LA ULTIMA URL ALMACENADA EN LA PAGINA, SI NO LA ENCUENTRA, SIGUE ADELANTE
			if (strpos($tinyMCE_Web, $tinyMCE_Buscar)===false)
				{
				// HACE UN LOOP LISTANDO TODOS LOS LINKS DE LA PAGINA
				if(preg_match_all("/<a\s[^>]*href=(\"??)([^\" >]*?)\\1[^>]*>(.*)<\/a>/siU", $tinyMCE_Web, $matches, PREG_SET_ORDER))
					{
					foreach($matches as $match)
						{
						// EL PRIMER LINK QUE SEA UN ZIP PASA A SER LA URL DE DESCARGA PARA EL UPDATE
						if (substr($match[2],-4)==".zip")
							{
							if ($tinyMCE_URL_NEW_VERSION_ZIP=="")
								{
								$tinyMCE_URL_NEW_VERSION_ZIP = $match[2];
								}
							}
						}
					}
				}
			// SI SE PUDO UBICAR LA URL DEL NUEVO .ZIP DE LA NUEVA VERSION DE TINYMCE EN SU WEB, REALIZA EL UPDATE
			if ($tinyMCE_URL_NEW_VERSION_ZIP!="")
				{
				// EJECUTA EL SCRIPT DE UPDATE CON EL PARAMETRO DE LA ULTIMA URL DE LA ULTIMA VERSION
				actualizarTinyMCE($tinyMCE_URL_NEW_VERSION_ZIP);
				}
			}
		}
	}

// ----------------------------------------------------------------------------------------------------------------
// CRON JOB 2 - SE BUSCAN CAMBIOS EN LAS MARCAS REGISTRADAS
// ----------------------------------------------------------------------------------------------------------------

if ($horaActual==$horaDeEjecucion_Consultas_INPI)
	{
	$myfile = fopen("BrandsRegistered.cfg", "r");
	$database_marcas = fread($myfile,filesize("BrandsRegistered.cfg"));
	$database_marcas_array = explode("\n", $database_marcas);
	fclose($myfile);

	for ($i = 0; $i < sizeof($database_marcas_array); $i++)
		{
		$database_marcas_array_sub = explode("|", $database_marcas_array[$i]);
		buscar_Marcas_Movimientos($database_marcas_array_sub[0], $database_marcas_array_sub[1], $database_marcas_array_sub[2]);
		}
	}

// ----------------------------------------------------------------------------------------------------------------
// CRON JOB 3 - SE BUSCAN POSIBLES NOMBRES SIMILARES DE LAS MARCAS REGISTRADAS
// ----------------------------------------------------------------------------------------------------------------

if ($horaActual==$horaDeEjecucion_Consultas_INPI)
	{
	$myfile = fopen("BrandsSearch.cfg", "r");
	$database_marcas = fread($myfile,filesize("BrandsSearch.cfg"));
	$database_marcas_array = explode("\n", $database_marcas);
	fclose($myfile);

	for ($i = 0; $i < sizeof($database_marcas_array); $i++)
		{
		$database_marcas_array_sub = explode("|", $database_marcas_array[$i]);
		buscar_Marcas_Nuevas($database_marcas_array_sub[0], $database_marcas_array_sub[1]);
		}
	}

// ----------------------------------------------------------------------------------------------------------------
// CRON JOB 4 - SE BUSCA SI CAMBIO LA COMISION DE MERCADOLIBRE
// ----------------------------------------------------------------------------------------------------------------

if ($horaActual==$horaDeEjecucion)
	{
	$myfile = fopen("MercadoLibre.cfg", "r");
	$porcentajeML = fread($myfile,filesize("MercadoLibre.cfg"));
	fclose($myfile);

	$response = doGET_MercadoLibre("https://www.mercadolibre.com.ar/ayuda/Costos-de-vender-un-producto_870");

	if (strlen($response)>1000)
		{
		$texto = "% por venta";
		$buscar = $porcentajeML . $texto;
		if (strpos($response, $buscar)===false)
			{
			$parte1 = substr($response, 0, strpos($response,$texto));
			$comisionActual = substr($parte1, strrpos($parte1,">") + 1);
			if (is_numeric($comisionActual)==true)
				{
				$myfile = fopen("MercadoLibre.cfg", "w");
				fwrite($myfile, $comisionActual);
				fclose($myfile);
				informar("CAMBI&Oacute; LA COMISI&Oacute;N DE MERCADOLIBRE. <a href='https://www.mercadolibre.com.ar/ayuda/Costos-de-vender-un-producto_870' target='top'>CONSULTAR</a>");
				}
				else
				{
				informar("ERROR EN LA COMISI&Oacute;N DE MERCADOLIBRE. <a href='https://www.mercadolibre.com.ar/ayuda/Costos-de-vender-un-producto_870' target='top'>CONSULTAR</a>");
				}
			}
		}
	}

// ----------------------------------------------------------------------------------------------------------------
// CRON JOB 5 - ELIMINA EL CONTENIDO DE CARPETAS CON ARCHIVOS TEMPORALES
// ----------------------------------------------------------------------------------------------------------------

$carpetas = []; 
$carpetas[] = "/home/user/tmp/";
$carpetas[] = "/home/user/logs/";

foreach ($carpetas as $valor)
	{
	if (file_exists($valor)==true)
		{
		if (is_dir($valor)==true)
			{
			unlinkRecursive($valor,false);
			}
		}
	}

// ----------------------------------------------------------------------------------------------------------------
// CRON JOB 6 - ELIMINA LOS ARCHIVOS DE ERRORES GENERADOS POR EL SERVIDOR
// ----------------------------------------------------------------------------------------------------------------

$files = glob("error_log");

foreach($files as $file)
	{
	unlink($file);
	}

echo "Tareas programadas ejecutadas correctamente.";
?>